/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(globalThis["webpackChunksuperset"] = globalThis["webpackChunksuperset"] || []).push([["plugins_plugin-chart-pivot-table_src_PivotScreenshotAPI_tsx"],{

/***/ "./node_modules/@ant-design/icons/es/icons/MinusSquareOutlined.js":
/*!************************************************************************!*\
  !*** ./node_modules/@ant-design/icons/es/icons/MinusSquareOutlined.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectSpread2 */ \"./node_modules/@babel/runtime/helpers/esm/objectSpread2.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _ant_design_icons_svg_es_asn_MinusSquareOutlined__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ant-design/icons-svg/es/asn/MinusSquareOutlined */ \"./node_modules/@ant-design/icons-svg/es/asn/MinusSquareOutlined.js\");\n/* harmony import */ var _components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/AntdIcon */ \"./node_modules/@ant-design/icons/es/components/AntdIcon.js\");\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\n\n\nvar MinusSquareOutlined = function MinusSquareOutlined(props, ref) {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__[\"default\"], (0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[\"default\"])((0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({}, props), {}, {\n    ref: ref,\n    icon: _ant_design_icons_svg_es_asn_MinusSquareOutlined__WEBPACK_IMPORTED_MODULE_3__[\"default\"]\n  }));\n};\nMinusSquareOutlined.displayName = 'MinusSquareOutlined';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(MinusSquareOutlined));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGFudC1kZXNpZ24vaWNvbnMvZXMvaWNvbnMvTWludXNTcXVhcmVPdXRsaW5lZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vbm9kZV9tb2R1bGVzL0BhbnQtZGVzaWduL2ljb25zL2VzL2ljb25zL01pbnVzU3F1YXJlT3V0bGluZWQuanM/ODE0NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuLy8gR0VORVJBVEUgQlkgLi9zY3JpcHRzL2dlbmVyYXRlLnRzXG4vLyBET04gTk9UIEVESVQgSVQgTUFOVUFMTFlcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBNaW51c1NxdWFyZU91dGxpbmVkU3ZnIGZyb20gXCJAYW50LWRlc2lnbi9pY29ucy1zdmcvZXMvYXNuL01pbnVzU3F1YXJlT3V0bGluZWRcIjtcbmltcG9ydCBBbnRkSWNvbiBmcm9tICcuLi9jb21wb25lbnRzL0FudGRJY29uJztcbnZhciBNaW51c1NxdWFyZU91dGxpbmVkID0gZnVuY3Rpb24gTWludXNTcXVhcmVPdXRsaW5lZChwcm9wcywgcmVmKSB7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChBbnRkSWNvbiwgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwcm9wcyksIHt9LCB7XG4gICAgcmVmOiByZWYsXG4gICAgaWNvbjogTWludXNTcXVhcmVPdXRsaW5lZFN2Z1xuICB9KSk7XG59O1xuTWludXNTcXVhcmVPdXRsaW5lZC5kaXNwbGF5TmFtZSA9ICdNaW51c1NxdWFyZU91dGxpbmVkJztcbmV4cG9ydCBkZWZhdWx0IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKE1pbnVzU3F1YXJlT3V0bGluZWQpOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@ant-design/icons/es/icons/MinusSquareOutlined.js\n");

/***/ }),

/***/ "./node_modules/@ant-design/icons/es/icons/PlusSquareOutlined.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@ant-design/icons/es/icons/PlusSquareOutlined.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectSpread2 */ \"./node_modules/@babel/runtime/helpers/esm/objectSpread2.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _ant_design_icons_svg_es_asn_PlusSquareOutlined__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ant-design/icons-svg/es/asn/PlusSquareOutlined */ \"./node_modules/@ant-design/icons-svg/es/asn/PlusSquareOutlined.js\");\n/* harmony import */ var _components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/AntdIcon */ \"./node_modules/@ant-design/icons/es/components/AntdIcon.js\");\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\n\n\nvar PlusSquareOutlined = function PlusSquareOutlined(props, ref) {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__[\"default\"], (0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[\"default\"])((0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({}, props), {}, {\n    ref: ref,\n    icon: _ant_design_icons_svg_es_asn_PlusSquareOutlined__WEBPACK_IMPORTED_MODULE_3__[\"default\"]\n  }));\n};\nPlusSquareOutlined.displayName = 'PlusSquareOutlined';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(PlusSquareOutlined));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGFudC1kZXNpZ24vaWNvbnMvZXMvaWNvbnMvUGx1c1NxdWFyZU91dGxpbmVkLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3VwZXJzZXQvLi9ub2RlX21vZHVsZXMvQGFudC1kZXNpZ24vaWNvbnMvZXMvaWNvbnMvUGx1c1NxdWFyZU91dGxpbmVkLmpzP2M0NjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbi8vIEdFTkVSQVRFIEJZIC4vc2NyaXB0cy9nZW5lcmF0ZS50c1xuLy8gRE9OIE5PVCBFRElUIElUIE1BTlVBTExZXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUGx1c1NxdWFyZU91dGxpbmVkU3ZnIGZyb20gXCJAYW50LWRlc2lnbi9pY29ucy1zdmcvZXMvYXNuL1BsdXNTcXVhcmVPdXRsaW5lZFwiO1xuaW1wb3J0IEFudGRJY29uIGZyb20gJy4uL2NvbXBvbmVudHMvQW50ZEljb24nO1xudmFyIFBsdXNTcXVhcmVPdXRsaW5lZCA9IGZ1bmN0aW9uIFBsdXNTcXVhcmVPdXRsaW5lZChwcm9wcywgcmVmKSB7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChBbnRkSWNvbiwgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwcm9wcyksIHt9LCB7XG4gICAgcmVmOiByZWYsXG4gICAgaWNvbjogUGx1c1NxdWFyZU91dGxpbmVkU3ZnXG4gIH0pKTtcbn07XG5QbHVzU3F1YXJlT3V0bGluZWQuZGlzcGxheU5hbWUgPSAnUGx1c1NxdWFyZU91dGxpbmVkJztcbmV4cG9ydCBkZWZhdWx0IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKFBsdXNTcXVhcmVPdXRsaW5lZCk7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@ant-design/icons/es/icons/PlusSquareOutlined.js\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/react-pivot-screen-api/PivotTable.jsx":
/*!************************************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/react-pivot-screen-api/PivotTable.jsx ***!
  \************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _TableRenderers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TableRenderers */ \"./plugins/plugin-chart-pivot-table/src/react-pivot-screen-api/TableRenderers.jsx\");\n/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @emotion/react */ \"./node_modules/@emotion/react/dist/emotion-react.browser.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\n\n\n\n\nclass PivotTable extends react__WEBPACK_IMPORTED_MODULE_0__.PureComponent {\n  render() {\n    return (0,_emotion_react__WEBPACK_IMPORTED_MODULE_1__.jsx)(_TableRenderers__WEBPACK_IMPORTED_MODULE_2__.TableRenderer, this.props);\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nPivotTable.propTypes = _TableRenderers__WEBPACK_IMPORTED_MODULE_2__.TableRenderer.propTypes;\nPivotTable.defaultProps = _TableRenderers__WEBPACK_IMPORTED_MODULE_2__.TableRenderer.defaultProps;const _default =\n\nPivotTable;/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_default);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(PivotTable, \"PivotTable\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\PivotTable.jsx\");reactHotLoader.register(_default, \"default\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\PivotTable.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3Qtc2NyZWVuLWFwaS9QaXZvdFRhYmxlLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vcGx1Z2lucy9wbHVnaW4tY2hhcnQtcGl2b3QtdGFibGUvc3JjL3JlYWN0LXBpdm90LXNjcmVlbi1hcGkvUGl2b3RUYWJsZS5qc3g/YzZhMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuICogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgVGFibGVSZW5kZXJlciB9IGZyb20gJy4vVGFibGVSZW5kZXJlcnMnO1xyXG5cclxuY2xhc3MgUGl2b3RUYWJsZSBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xyXG4gIHJlbmRlcigpIHtcclxuICAgIHJldHVybiA8VGFibGVSZW5kZXJlciB7Li4udGhpcy5wcm9wc30gLz47XHJcbiAgfVxyXG59XHJcblxyXG5QaXZvdFRhYmxlLnByb3BUeXBlcyA9IFRhYmxlUmVuZGVyZXIucHJvcFR5cGVzO1xyXG5QaXZvdFRhYmxlLmRlZmF1bHRQcm9wcyA9IFRhYmxlUmVuZGVyZXIuZGVmYXVsdFByb3BzO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGl2b3RUYWJsZTtcclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/react-pivot-screen-api/PivotTable.jsx\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/react-pivot-screen-api/TableRenderers.jsx":
/*!****************************************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/react-pivot-screen-api/TableRenderers.jsx ***!
  \****************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TableRenderer: () => (/* binding */ TableRenderer)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! prop-types */ \"./node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities */ \"./plugins/plugin-chart-pivot-table/src/react-pivot-screen-api/utilities.js\");\n/* harmony import */ var _plugin_downloadAsImage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../plugin/downloadAsImage */ \"./plugins/plugin-chart-pivot-table/src/plugin/downloadAsImage.ts\");\n/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @emotion/react */ \"./node_modules/@emotion/react/dist/emotion-react.browser.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; // noinspection DuplicatedCode\n\n/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\n\n\n// import { t } from '@superset-ui/core';\n\n\n\n// import { Styles } from './Styles';\n\n// const DUDAGI_URL = 'http://gocap.kr:30643/api/v1/storage/';\nconst DUDAGI_URL = 'http://125.129.210.138:80/api/v1/storage/';\n\n// const parseLabel = value => {\n//   if (typeof value === 'number' || typeof value === 'string') {\n//     return value;\n//   }\n//   return String(value);\n// };\n\n// function displayHeaderCell(\n//   needToggle,\n//   ArrowIcon,\n//   onArrowClick,\n//   value,\n//   namesMapping,\n// ) {\n//   const name = namesMapping[value] || value;\n//   return needToggle ? (\n//     <span className=\"toggle-wrapper\">\n//       <span\n//         role=\"button\"\n//         tabIndex=\"0\"\n//         className=\"toggle\"\n//         onClick={onArrowClick}\n//       >\n//         {ArrowIcon}\n//       </span>\n//       <span className=\"toggle-val\">{parseLabel(name)}</span>\n//     </span>\n//   ) : (\n//     parseLabel(name)\n//   );\n// }\n\nclass TableRenderer extends react__WEBPACK_IMPORTED_MODULE_0__.Component {\n  constructor(props) {\n    super(props);\n\n    // We need state to record which entries are collapsed and which aren't.\n    // This is an object with flat-keys indicating if the corresponding rows\n    // should be collapsed.\n    this.state = { collapsedRows: {}, collapsedCols: {} /*base64URLs: []*/ };\n\n    this.clickHeaderHandler = this.clickHeaderHandler.bind(this);\n    this.clickHandler = this.clickHandler.bind(this);\n  }\n\n  getBasePivotSettings() {\n    // One-time extraction of pivot settings that we'll use throughout the render.\n\n    const { props } = this;\n    const colAttrs = props.cols;\n    const rowAttrs = props.rows;\n\n    const tableOptions = {\n      rowTotals: true,\n      colTotals: true,\n      ...props.tableOptions\n    };\n    // const rowTotals = tableOptions.rowTotals || colAttrs.length === 0;\n    // const colTotals = tableOptions.colTotals || rowAttrs.length === 0;\n    const rowTotals = false;\n    const colTotals = false;\n\n    const namesMapping = props.namesMapping || {};\n    const subtotalOptions = {\n      arrowCollapsed: '\\u25B2',\n      arrowExpanded: '\\u25BC',\n      ...props.subtotalOptions\n    };\n\n    const colSubtotalDisplay = {\n      displayOnTop: false,\n      enabled: tableOptions.colSubTotals,\n      hideOnExpand: false,\n      ...subtotalOptions.colSubtotalDisplay\n    };\n\n    const rowSubtotalDisplay = {\n      displayOnTop: false,\n      enabled: tableOptions.rowSubTotals,\n      hideOnExpand: false,\n      ...subtotalOptions.rowSubtotalDisplay\n    };\n\n    const pivotData = new _utilities__WEBPACK_IMPORTED_MODULE_1__.PivotData(props, {\n      rowEnabled: rowSubtotalDisplay.enabled,\n      colEnabled: colSubtotalDisplay.enabled,\n      rowPartialOnTop: rowSubtotalDisplay.displayOnTop,\n      colPartialOnTop: colSubtotalDisplay.displayOnTop\n    });\n    const rowKeys = pivotData.getRowKeys();\n    const colKeys = pivotData.getColKeys();\n\n    // Also pre-calculate all the callbacks for cells, etc... This is nice to have to\n    // avoid re-calculations of the call-backs on cell expansions, etc...\n    const cellCallbacks = {};\n    const rowTotalCallbacks = {};\n    const colTotalCallbacks = {};\n    let grandTotalCallback = null;\n    if (tableOptions.clickCallback) {\n      rowKeys.forEach((rowKey) => {\n        const flatRowKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_1__.flatKey)(rowKey);\n        if (!(flatRowKey in cellCallbacks)) {\n          cellCallbacks[flatRowKey] = {};\n        }\n        colKeys.forEach((colKey) => {\n          cellCallbacks[flatRowKey][(0,_utilities__WEBPACK_IMPORTED_MODULE_1__.flatKey)(colKey)] = this.clickHandler(\n            pivotData,\n            rowKey,\n            colKey\n          );\n        });\n      });\n\n      // Add in totals as well.\n      if (rowTotals) {\n        rowKeys.forEach((rowKey) => {\n          rowTotalCallbacks[(0,_utilities__WEBPACK_IMPORTED_MODULE_1__.flatKey)(rowKey)] = this.clickHandler(\n            pivotData,\n            rowKey,\n            []\n          );\n        });\n      }\n      if (colTotals) {\n        colKeys.forEach((colKey) => {\n          colTotalCallbacks[(0,_utilities__WEBPACK_IMPORTED_MODULE_1__.flatKey)(colKey)] = this.clickHandler(\n            pivotData,\n            [],\n            colKey\n          );\n        });\n      }\n      if (rowTotals && colTotals) {\n        grandTotalCallback = this.clickHandler(pivotData, [], []);\n      }\n    }\n\n    return {\n      pivotData,\n      colAttrs,\n      rowAttrs,\n      colKeys,\n      rowKeys,\n      rowTotals,\n      colTotals,\n      arrowCollapsed: subtotalOptions.arrowCollapsed,\n      arrowExpanded: subtotalOptions.arrowExpanded,\n      colSubtotalDisplay,\n      rowSubtotalDisplay,\n      cellCallbacks,\n      rowTotalCallbacks,\n      colTotalCallbacks,\n      grandTotalCallback,\n      namesMapping\n    };\n  }\n\n  clickHandler(pivotData, rowValues, colValues) {\n    const colAttrs = this.props.cols;\n    const rowAttrs = this.props.rows;\n    const value = pivotData.getAggregator(rowValues, colValues).value();\n    const filters = {};\n    const colLimit = Math.min(colAttrs.length, colValues.length);\n    for (let i = 0; i < colLimit; i += 1) {\n      const attr = colAttrs[i];\n      if (colValues[i] !== null) {\n        filters[attr] = colValues[i];\n      }\n    }\n    const rowLimit = Math.min(rowAttrs.length, rowValues.length);\n    for (let i = 0; i < rowLimit; i += 1) {\n      const attr = rowAttrs[i];\n      if (rowValues[i] !== null) {\n        filters[attr] = rowValues[i];\n      }\n    }\n    return (e) =>\n    this.props.tableOptions.clickCallback(e, value, filters, pivotData);\n  }\n\n  clickHeaderHandler(\n  pivotData,\n  values,\n  attrs,\n  attrIdx,\n  callback,\n  isSubtotal,\n  isGrandTotal)\n  {if (isSubtotal === void 0) {isSubtotal = false;}if (isGrandTotal === void 0) {isGrandTotal = false;}\n    const filters = {};\n    for (let i = 0; i <= attrIdx; i += 1) {\n      const attr = attrs[i];\n      filters[attr] = values[i];\n    }\n    return (e) =>\n    callback(\n      e,\n      values[attrIdx],\n      filters,\n      pivotData,\n      isSubtotal,\n      isGrandTotal\n    );\n  }\n\n  // collapseAttr(rowOrCol, attrIdx, allKeys) {\n  //   return e => {\n  //     // Collapse an entire attribute.\n  //     e.stopPropagation();\n  //     const keyLen = attrIdx + 1;\n  //     const collapsed = allKeys.filter(k => k.length === keyLen).map(flatKey);\n  //\n  //     const updates = {};\n  //     collapsed.forEach(k => {\n  //       updates[k] = true;\n  //     });\n  //\n  //     if (rowOrCol) {\n  //       this.setState(state => ({\n  //         collapsedRows: { ...state.collapsedRows, ...updates },\n  //       }));\n  //     } else {\n  //       this.setState(state => ({\n  //         collapsedCols: { ...state.collapsedCols, ...updates },\n  //       }));\n  //     }\n  //   };\n  // }\n\n  // expandAttr(rowOrCol, attrIdx, allKeys) {\n  //   return e => {\n  //     // Expand an entire attribute. This implicitly implies expanding all of the\n  //     // parents as well. It's a bit inefficient but ah well...\n  //     e.stopPropagation();\n  //     const updates = {};\n  //     allKeys.forEach(k => {\n  //       for (let i = 0; i <= attrIdx; i += 1) {\n  //         updates[flatKey(k.slice(0, i + 1))] = false;\n  //       }\n  //     });\n  //\n  //     if (rowOrCol) {\n  //       this.setState(state => ({\n  //         collapsedRows: { ...state.collapsedRows, ...updates },\n  //       }));\n  //     } else {\n  //       this.setState(state => ({\n  //         collapsedCols: { ...state.collapsedCols, ...updates },\n  //       }));\n  //     }\n  //   };\n  // }\n\n  // toggleRowKey(flatRowKey) {\n  //   return e => {\n  //     e.stopPropagation();\n  //     this.setState(state => ({\n  //       collapsedRows: {\n  //         ...state.collapsedRows,\n  //         [flatRowKey]: !state.collapsedRows[flatRowKey],\n  //       },\n  //     }));\n  //   };\n  // }\n\n  // toggleColKey(flatColKey) {\n  //   return e => {\n  //     e.stopPropagation();\n  //     this.setState(state => ({\n  //       collapsedCols: {\n  //         ...state.collapsedCols,\n  //         [flatColKey]: !state.collapsedCols[flatColKey],\n  //       },\n  //     }));\n  //   };\n  // }\n\n  // calcAttrSpans(attrArr, numAttrs) {\n  //   // Given an array of attribute values (i.e. each element is another array with\n  //   // the value at every level), compute the spans for every attribute value at\n  //   // every level. The return value is a nested array of the same shape. It has\n  //   // -1's for repeated values and the span number otherwise.\n  //\n  //   const spans = [];\n  //   // Index of the last new value\n  //   const li = Array(numAttrs).map(() => 0);\n  //   let lv = Array(numAttrs).map(() => null);\n  //   for (let i = 0; i < attrArr.length; i += 1) {\n  //     // Keep increasing span values as long as the last keys are the same. For\n  //     // the rest, record spans of 1. Update the indices too.\n  //     const cv = attrArr[i];\n  //     const ent = [];\n  //     let depth = 0;\n  //     const limit = Math.min(lv.length, cv.length);\n  //     while (depth < limit && lv[depth] === cv[depth]) {\n  //       ent.push(-1);\n  //       spans[li[depth]][depth] += 1;\n  //       depth += 1;\n  //     }\n  //     while (depth < cv.length) {\n  //       li[depth] = i;\n  //       ent.push(1);\n  //       depth += 1;\n  //     }\n  //     spans.push(ent);\n  //     lv = cv;\n  //   }\n  //   return spans;\n  // }\n\n  // renderColHeaderRow(attrName, attrIdx, pivotSettings) {\n  //   // Render a single row in the column header at the top of the pivot table.\n  //\n  //   const {\n  //     rowAttrs,\n  //     colAttrs,\n  //     colKeys,\n  //     visibleColKeys,\n  //     colAttrSpans,\n  //     rowTotals,\n  //     arrowExpanded,\n  //     arrowCollapsed,\n  //     colSubtotalDisplay,\n  //     maxColVisible,\n  //     pivotData,\n  //     namesMapping,\n  //   } = pivotSettings;\n  //   const {\n  //     highlightHeaderCellsOnHover,\n  //     omittedHighlightHeaderGroups = [],\n  //     highlightedHeaderCells,\n  //     dateFormatters,\n  //   } = this.props.tableOptions;\n  //\n  //   const spaceCell =\n  //     attrIdx === 0 && rowAttrs.length !== 0 ? (\n  //       <th\n  //         key=\"padding\"\n  //         colSpan={rowAttrs.length}\n  //         rowSpan={colAttrs.length}\n  //         aria-hidden=\"true\"\n  //       />\n  //     ) : null;\n  //\n  //   const needToggle =\n  //     colSubtotalDisplay.enabled && attrIdx !== colAttrs.length - 1;\n  //   let arrowClickHandle = null;\n  //   let subArrow = null;\n  //   if (needToggle) {\n  //     arrowClickHandle =\n  //       attrIdx + 1 < maxColVisible\n  //         ? this.collapseAttr(false, attrIdx, colKeys)\n  //         : this.expandAttr(false, attrIdx, colKeys);\n  //     subArrow = attrIdx + 1 < maxColVisible ? arrowExpanded : arrowCollapsed;\n  //   }\n  //   const attrNameCell = (\n  //     <th key=\"label\" className=\"pvtAxisLabel\">\n  //       {displayHeaderCell(\n  //         needToggle,\n  //         subArrow,\n  //         arrowClickHandle,\n  //         attrName,\n  //         namesMapping,\n  //       )}\n  //     </th>\n  //   );\n  //\n  //   const attrValueCells = [];\n  //   const rowIncrSpan = rowAttrs.length !== 0 ? 1 : 0;\n  //   // Iterate through columns. Jump over duplicate values.\n  //   let i = 0;\n  //   while (i < visibleColKeys.length) {\n  //     let handleContextMenu;\n  //     const colKey = visibleColKeys[i];\n  //     const colSpan = attrIdx < colKey.length ? colAttrSpans[i][attrIdx] : 1;\n  //     let colLabelClass = 'pvtColLabel';\n  //     if (attrIdx < colKey.length) {\n  //       if (!omittedHighlightHeaderGroups.includes(colAttrs[attrIdx])) {\n  //         if (highlightHeaderCellsOnHover) {\n  //           colLabelClass += ' hoverable';\n  //         }\n  //         handleContextMenu = e =>\n  //           this.props.onContextMenu(e, colKey, undefined, {\n  //             [attrName]: colKey[attrIdx],\n  //           });\n  //       }\n  //       if (\n  //         highlightedHeaderCells &&\n  //         Array.isArray(highlightedHeaderCells[colAttrs[attrIdx]]) &&\n  //         highlightedHeaderCells[colAttrs[attrIdx]].includes(colKey[attrIdx])\n  //       ) {\n  //         colLabelClass += ' active';\n  //       }\n  //\n  //       const rowSpan = 1 + (attrIdx === colAttrs.length - 1 ? rowIncrSpan : 0);\n  //       const flatColKey = flatKey(colKey.slice(0, attrIdx + 1));\n  //       const onArrowClick = needToggle ? this.toggleColKey(flatColKey) : null;\n  //\n  //       const headerCellFormattedValue =\n  //         dateFormatters &&\n  //         dateFormatters[attrName] &&\n  //         typeof dateFormatters[attrName] === 'function'\n  //           ? dateFormatters[attrName](colKey[attrIdx])\n  //           : colKey[attrIdx];\n  //       attrValueCells.push(\n  //         <th\n  //           className={colLabelClass}\n  //           key={`colKey-${flatColKey}`}\n  //           colSpan={colSpan}\n  //           rowSpan={rowSpan}\n  //           onClick={this.clickHeaderHandler(\n  //             pivotData,\n  //             colKey,\n  //             this.props.cols,\n  //             attrIdx,\n  //             this.props.tableOptions.clickColumnHeaderCallback,\n  //           )}\n  //           onContextMenu={handleContextMenu}\n  //         >\n  //           {displayHeaderCell(\n  //             needToggle,\n  //             this.state.collapsedCols[flatColKey]\n  //               ? arrowCollapsed\n  //               : arrowExpanded,\n  //             onArrowClick,\n  //             headerCellFormattedValue,\n  //             namesMapping,\n  //           )}\n  //         </th>,\n  //       );\n  //     } else if (attrIdx === colKey.length) {\n  //       const rowSpan = colAttrs.length - colKey.length + rowIncrSpan;\n  //       attrValueCells.push(\n  //         <th\n  //           className={`${colLabelClass} pvtSubtotalLabel`}\n  //           key={`colKeyBuffer-${flatKey(colKey)}`}\n  //           colSpan={colSpan}\n  //           rowSpan={rowSpan}\n  //           onClick={this.clickHeaderHandler(\n  //             pivotData,\n  //             colKey,\n  //             this.props.cols,\n  //             attrIdx,\n  //             this.props.tableOptions.clickColumnHeaderCallback,\n  //             true,\n  //           )}\n  //         >\n  //           {t('Subtotal')}\n  //         </th>,\n  //       );\n  //     }\n  //     // The next colSpan columns will have the same value anyway...\n  //     i += colSpan;\n  //   }\n  //\n  //   const totalCell =\n  //     attrIdx === 0 && rowTotals ? (\n  //       <th\n  //         key=\"total\"\n  //         className=\"pvtTotalLabel\"\n  //         rowSpan={colAttrs.length + Math.min(rowAttrs.length, 1)}\n  //         onClick={this.clickHeaderHandler(\n  //           pivotData,\n  //           [],\n  //           this.props.cols,\n  //           attrIdx,\n  //           this.props.tableOptions.clickColumnHeaderCallback,\n  //           false,\n  //           true,\n  //         )}\n  //       >\n  //         {t('Total (%(aggregatorName)s)', {\n  //           aggregatorName: t(this.props.aggregatorName),\n  //         })}\n  //       </th>\n  //     ) : null;\n  //\n  //   const cells = [spaceCell, attrNameCell, ...attrValueCells, totalCell];\n  //   return <tr key={`colAttr-${attrIdx}`}>{cells}</tr>;\n  // }\n\n  // renderRowHeaderRow(pivotSettings) {\n  //   // Render just the attribute names of the rows (the actual attribute values\n  //   // will show up in the individual rows).\n  //\n  //   const {\n  //     rowAttrs,\n  //     colAttrs,\n  //     rowKeys,\n  //     arrowCollapsed,\n  //     arrowExpanded,\n  //     rowSubtotalDisplay,\n  //     maxRowVisible,\n  //     pivotData,\n  //     namesMapping,\n  //   } = pivotSettings;\n  //   return (\n  //     <tr key=\"rowHdr\">\n  //       {rowAttrs.map((r, i) => {\n  //         const needLabelToggle =\n  //           rowSubtotalDisplay.enabled && i !== rowAttrs.length - 1;\n  //         let arrowClickHandle = null;\n  //         let subArrow = null;\n  //         if (needLabelToggle) {\n  //           arrowClickHandle =\n  //             i + 1 < maxRowVisible\n  //               ? this.collapseAttr(true, i, rowKeys)\n  //               : this.expandAttr(true, i, rowKeys);\n  //           subArrow = i + 1 < maxRowVisible ? arrowExpanded : arrowCollapsed;\n  //         }\n  //         return (\n  //           <th className=\"pvtAxisLabel\" key={`rowAttr-${i}`}>\n  //             {displayHeaderCell(\n  //               needLabelToggle,\n  //               subArrow,\n  //               arrowClickHandle,\n  //               r,\n  //               namesMapping,\n  //             )}\n  //           </th>\n  //         );\n  //       })}\n  //       <th\n  //         className=\"pvtTotalLabel\"\n  //         key=\"padding\"\n  //         onClick={this.clickHeaderHandler(\n  //           pivotData,\n  //           [],\n  //           this.props.rows,\n  //           0,\n  //           this.props.tableOptions.clickRowHeaderCallback,\n  //           false,\n  //           true,\n  //         )}\n  //       >\n  //         {colAttrs.length === 0\n  //           ? t('Total (%(aggregatorName)s)', {\n  //             aggregatorName: t(this.props.aggregatorName),\n  //           })\n  //           : null}\n  //       </th>\n  //     </tr>\n  //   );\n  // }\n\n  // renderTableRow(rowKey, rowIdx, pivotSettings) {\n  //   // Render a single row in the pivot table.\n  //\n  //   const {\n  //     rowAttrs,\n  //     colAttrs,\n  //     rowAttrSpans,\n  //     visibleColKeys,\n  //     pivotData,\n  //     rowTotals,\n  //     rowSubtotalDisplay,\n  //     arrowExpanded,\n  //     arrowCollapsed,\n  //     cellCallbacks,\n  //     rowTotalCallbacks,\n  //     namesMapping,\n  //   } = pivotSettings;\n  //\n  //   const {\n  //     highlightHeaderCellsOnHover,\n  //     omittedHighlightHeaderGroups = [],\n  //     highlightedHeaderCells,\n  //     cellColorFormatters,\n  //     dateFormatters,\n  //   } = this.props.tableOptions;\n  //   const flatRowKey = flatKey(rowKey);\n  //\n  //   const colIncrSpan = colAttrs.length !== 0 ? 1 : 0;\n  //   const attrValueCells = rowKey.map((r, i) => {\n  //     let handleContextMenu;\n  //     let valueCellClassName = 'pvtRowLabel';\n  //     if (!omittedHighlightHeaderGroups.includes(rowAttrs[i])) {\n  //       if (highlightHeaderCellsOnHover) {\n  //         valueCellClassName += ' hoverable';\n  //       }\n  //       handleContextMenu = e =>\n  //         this.props.onContextMenu(e, undefined, rowKey, {\n  //           [rowAttrs[i]]: r,\n  //         });\n  //     }\n  //     if (\n  //       highlightedHeaderCells &&\n  //       Array.isArray(highlightedHeaderCells[rowAttrs[i]]) &&\n  //       highlightedHeaderCells[rowAttrs[i]].includes(r)\n  //     ) {\n  //       valueCellClassName += ' active';\n  //     }\n  //     const rowSpan = rowAttrSpans[rowIdx][i];\n  //     if (rowSpan > 0) {\n  //       const flatRowKey = flatKey(rowKey.slice(0, i + 1));\n  //       const colSpan = 1 + (i === rowAttrs.length - 1 ? colIncrSpan : 0);\n  //       const needRowToggle =\n  //         rowSubtotalDisplay.enabled && i !== rowAttrs.length - 1;\n  //       const onArrowClick = needRowToggle\n  //         ? this.toggleRowKey(flatRowKey)\n  //         : null;\n  //\n  //       const headerCellFormattedValue =\n  //         dateFormatters && dateFormatters[rowAttrs[i]]\n  //           ? dateFormatters[rowAttrs[i]](r)\n  //           : r;\n  //       return (\n  //         <th\n  //           key={`rowKeyLabel-${i}`}\n  //           className={valueCellClassName}\n  //           rowSpan={rowSpan}\n  //           colSpan={colSpan}\n  //           onClick={this.clickHeaderHandler(\n  //             pivotData,\n  //             rowKey,\n  //             this.props.rows,\n  //             i,\n  //             this.props.tableOptions.clickRowHeaderCallback,\n  //           )}\n  //           onContextMenu={handleContextMenu}\n  //         >\n  //           {displayHeaderCell(\n  //             needRowToggle,\n  //             this.state.collapsedRows[flatRowKey]\n  //               ? arrowCollapsed\n  //               : arrowExpanded,\n  //             onArrowClick,\n  //             headerCellFormattedValue,\n  //             namesMapping,\n  //           )}\n  //         </th>\n  //       );\n  //     }\n  //     return null;\n  //   });\n  //\n  //   const attrValuePaddingCell =\n  //     rowKey.length < rowAttrs.length ? (\n  //       <th\n  //         className=\"pvtRowLabel pvtSubtotalLabel\"\n  //         key=\"rowKeyBuffer\"\n  //         colSpan={rowAttrs.length - rowKey.length + colIncrSpan}\n  //         rowSpan={1}\n  //         onClick={this.clickHeaderHandler(\n  //           pivotData,\n  //           rowKey,\n  //           this.props.rows,\n  //           rowKey.length,\n  //           this.props.tableOptions.clickRowHeaderCallback,\n  //           true,\n  //         )}\n  //       >\n  //         {t('Subtotal')}\n  //       </th>\n  //     ) : null;\n  //\n  //   const rowClickHandlers = cellCallbacks[flatRowKey] || {};\n  //   const valueCells = visibleColKeys.map(colKey => {\n  //     const flatColKey = flatKey(colKey);\n  //     const agg = pivotData.getAggregator(rowKey, colKey);\n  //     const aggValue = agg.value();\n  //\n  //     const keys = [...rowKey, ...colKey];\n  //     let backgroundColor;\n  //     if (cellColorFormatters) {\n  //       Object.values(cellColorFormatters).forEach(cellColorFormatter => {\n  //         if (Array.isArray(cellColorFormatter)) {\n  //           keys.forEach(key => {\n  //             if (backgroundColor) {\n  //               return;\n  //             }\n  //             cellColorFormatter\n  //               .filter(formatter => formatter.column === key)\n  //               .forEach(formatter => {\n  //                 const formatterResult = formatter.getColorFromValue(aggValue);\n  //                 if (formatterResult) {\n  //                   backgroundColor = formatterResult;\n  //                 }\n  //               });\n  //           });\n  //         }\n  //       });\n  //     }\n  //\n  //     const style = agg.isSubtotal\n  //       ? { fontWeight: 'bold' }\n  //       : { backgroundColor };\n  //\n  //     return (\n  //       <td\n  //         role=\"gridcell\"\n  //         className=\"pvtVal\"\n  //         key={`pvtVal-${flatColKey}`}\n  //         onClick={rowClickHandlers[flatColKey]}\n  //         onContextMenu={e => this.props.onContextMenu(e, colKey, rowKey)}\n  //         style={style}\n  //       >\n  //         {agg.format(aggValue)}\n  //       </td>\n  //     );\n  //   });\n  //\n  //   let totalCell = null;\n  //   if (rowTotals) {\n  //     const agg = pivotData.getAggregator(rowKey, []);\n  //     const aggValue = agg.value();\n  //     totalCell = (\n  //       <td\n  //         role=\"gridcell\"\n  //         key=\"total\"\n  //         className=\"pvtTotal\"\n  //         onClick={rowTotalCallbacks[flatRowKey]}\n  //         onContextMenu={e => this.props.onContextMenu(e, undefined, rowKey)}\n  //       >\n  //         {agg.format(aggValue)}\n  //       </td>\n  //     );\n  //   }\n  //\n  //   const rowCells = [\n  //     ...attrValueCells,\n  //     attrValuePaddingCell,\n  //     ...valueCells,\n  //     totalCell,\n  //   ];\n  //\n  //   return <tr key={`keyRow-${flatRowKey}`}>{rowCells}</tr>;\n  // }\n\n  // renderTotalsRow(pivotSettings) {\n  //   // Render the final totals rows that has the totals for all the columns.\n  //\n  //   const {\n  //     rowAttrs,\n  //     colAttrs,\n  //     visibleColKeys,\n  //     rowTotals,\n  //     pivotData,\n  //     colTotalCallbacks,\n  //     grandTotalCallback,\n  //   } = pivotSettings;\n  //\n  //   const totalLabelCell = (\n  //     <th\n  //       key=\"label\"\n  //       className=\"pvtTotalLabel pvtRowTotalLabel\"\n  //       colSpan={rowAttrs.length + Math.min(colAttrs.length, 1)}\n  //       onClick={this.clickHeaderHandler(\n  //         pivotData,\n  //         [],\n  //         this.props.rows,\n  //         0,\n  //         this.props.tableOptions.clickRowHeaderCallback,\n  //         false,\n  //         true,\n  //       )}\n  //     >\n  //       {t('Total (%(aggregatorName)s)', {\n  //         aggregatorName: t(this.props.aggregatorName),\n  //       })}\n  //     </th>\n  //   );\n  //\n  //   const totalValueCells = visibleColKeys.map(colKey => {\n  //     const flatColKey = flatKey(colKey);\n  //     const agg = pivotData.getAggregator([], colKey);\n  //     const aggValue = agg.value();\n  //\n  //     return (\n  //       <td\n  //         role=\"gridcell\"\n  //         className=\"pvtTotal pvtRowTotal\"\n  //         key={`total-${flatColKey}`}\n  //         onClick={colTotalCallbacks[flatColKey]}\n  //         onContextMenu={e => this.props.onContextMenu(e, colKey, undefined)}\n  //         style={{ padding: '5px' }}\n  //       >\n  //         {agg.format(aggValue)}\n  //       </td>\n  //     );\n  //   });\n  //\n  //   let grandTotalCell = null;\n  //   if (rowTotals) {\n  //     const agg = pivotData.getAggregator([], []);\n  //     const aggValue = agg.value();\n  //     grandTotalCell = (\n  //       <td\n  //         role=\"gridcell\"\n  //         key=\"total\"\n  //         className=\"pvtGrandTotal pvtRowTotal\"\n  //         onClick={grandTotalCallback}\n  //         onContextMenu={e => this.props.onContextMenu(e, undefined, undefined)}\n  //       >\n  //         {agg.format(aggValue)}\n  //       </td>\n  //     );\n  //   }\n  //\n  //   const totalCells = [totalLabelCell, ...totalValueCells, grandTotalCell];\n  //\n  //   return (\n  //     <tr key=\"total\" className=\"pvtRowTotals\">\n  //       {totalCells}\n  //     </tr>\n  //   );\n  // }\n\n  visibleKeys(keys, collapsed, numAttrs, subtotalDisplay) {\n    return keys.filter(\n      (key) =>\n      // Is the key hidden by one of its parents?\n      !key.some((_, j) => collapsed[(0,_utilities__WEBPACK_IMPORTED_MODULE_1__.flatKey)(key.slice(0, j))]) && (\n      // Leaf key.\n      key.length === numAttrs ||\n      // Children hidden. Must show total.\n      (0,_utilities__WEBPACK_IMPORTED_MODULE_1__.flatKey)(key) in collapsed ||\n      // Don't hide totals.\n      !subtotalDisplay.hideOnExpand)\n    );\n  }\n\n  // isDashboardEditMode() {\n  //   return document.contains(document.querySelector('.dashboard--editing'));\n  // }\n\n  // getData() {\n  //   if (this.cachedProps !== this.props) {\n  //     this.cachedProps = this.props;\n  //     this.cachedBasePivotSettings = this.getBasePivotSettings();\n  //   }\n  //   const {\n  //     colAttrs,\n  //     colKeys,\n  //     colSubtotalDisplay,\n  //   } = this.cachedBasePivotSettings;\n  //\n  //   const visibleColKeys = colKeys.filter(\n  //     key =>\n  //       // Is the key hidden by one of its parents?\n  //       !key.some((k, j) => this.state.collapsedCols[flatKey(key.slice(0, j))]) &&\n  //       // Leaf key.\n  //       (key.length === colAttrs.length ||\n  //         // Children hidden. Must show total.\n  //         flatKey(key) in this.state.collapsedCols ||\n  //         // Don't hide totals.\n  //         !colSubtotalDisplay.hideOnExpand),\n  //   )\n  //   // console.log(visibleColKeys);\n  //\n  //   (async () => {\n  //     const list = [];\n  //\n  //     for (let i = 0; i < visibleColKeys.length; i++) {\n  //       const v = visibleColKeys[i];\n  //\n  //       try {\n  //         const response = await fetch(DUDAGI_URL + v[1]);\n  //         const blob = await response.blob();\n  //         const reader = new FileReader();\n  //         reader.readAsDataURL(blob);\n  //         reader.onloadend = () => {\n  //           const base64data = reader.result;\n  //           list.push(base64data);\n  //         };\n  //       } catch (e) {\n  //         console.error(\"Error: \", e);\n  //       }\n  //     }\n  //\n  //     const listjoin = list.join(',');\n  //     const join = this.state.imageList.join(',');\n  //\n  //     if(listjoin !== join) {\n  //       this.setState(() => ({\n  //         imageList: [...list],\n  //       }));\n  //     }\n  //     // console.log('this.state.imageList', listjoin === join, this.state.imageList);\n  //   })();\n  // }\n\n  // componentDidMount() {\n  //   if (this.cachedProps !== this.props) {\n  //     this.cachedProps = this.props;\n  //     this.cachedBasePivotSettings = this.getBasePivotSettings();\n  //   }\n  //   const {\n  //     colAttrs,\n  //     colKeys,\n  //     colSubtotalDisplay,\n  //   } = this.cachedBasePivotSettings;\n  //   const visibleColKeys = colKeys.filter(\n  //     key =>\n  //       // Is the key hidden by one of its parents?\n  //       !key.some((_, j) => this.state.collapsedCols[flatKey(key.slice(0, j))]) &&\n  //       // Leaf key.\n  //       (key.length === colAttrs.length ||\n  //         // Children hidden. Must show total.\n  //         flatKey(key) in this.state.collapsedCols ||\n  //         // Don't hide totals.\n  //         !colSubtotalDisplay.hideOnExpand),\n  //   ).map(v => v[1]);\n  //   // console.log('visibleColKeys', visibleColKeys);\n  //\n  //   try {\n  //     // 각 이미지 URL에 대해 toDataURL 함수를 호출합니다.\n  //     visibleColKeys.forEach(url => {\n  //       // console.log('url', url);\n  //       this.toDataURL(DUDAGI_URL + url, dataUrl => {\n  //         // console.log('dataUrl', dataUrl)\n  //         this.setState(prevState => ({\n  //           base64URLs: [...prevState.base64URLs, dataUrl],\n  //         }));\n  //       });\n  //     });\n  //   } catch (e) {\n  //     console.error('Error: ', e);\n  //   }\n  //   // console.log(1);\n  // }\n  //\n  // toDataURL(src, callback, outputFormat = 'image/png') {\n  //   const img = new Image();\n  //   img.crossOrigin = 'Anonymous';\n  //   img.onload = function() {\n  //     const canvas = document.createElement('canvas');\n  //     const ctx = canvas.getContext('2d');\n  //     let dataURL;\n  //     canvas.height = this.naturalHeight;\n  //     canvas.width = this.naturalWidth;\n  //     ctx.drawImage(this, 0, 0);\n  //     dataURL = canvas.toDataURL(outputFormat);\n  //     callback(dataURL);\n  //   };\n  //   img.src = src;\n  //   if (img.complete || img.complete === undefined) {\n  //     // 로드를 강제로 다시 시도하기 전에 일시적으로 다른 src를 할당합니다.\n  //     img.src = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\";\n  //     img.src = src;\n  //   }\n  // }\n\n  render() {\n    if (this.cachedProps !== this.props) {\n      this.cachedProps = this.props;\n      this.cachedBasePivotSettings = this.getBasePivotSettings();\n    }\n    const {\n      colAttrs,\n      // rowAttrs,\n      // rowKeys,\n      colKeys,\n      // colTotals,\n      // rowSubtotalDisplay,\n      colSubtotalDisplay\n    } = this.cachedBasePivotSettings;\n\n    // Need to account for exclusions to compute the effective row\n    // and column keys.\n    // const visibleRowKeys = this.visibleKeys(\n    //   rowKeys,\n    //   this.state.collapsedRows,\n    //   rowAttrs.length,\n    //   rowSubtotalDisplay,\n    // );\n    const visibleColKeys = this.visibleKeys(\n      colKeys,\n      this.state.collapsedCols,\n      colAttrs.length,\n      colSubtotalDisplay\n    );\n\n    // const pivotSettings = {\n    //   visibleRowKeys,\n    //   maxRowVisible: Math.max(...visibleRowKeys.map(k => k.length)),\n    //   visibleColKeys,\n    //   maxColVisible: Math.max(...visibleColKeys.map(k => k.length)),\n    //   rowAttrSpans: this.calcAttrSpans(visibleRowKeys, rowAttrs.length),\n    //   colAttrSpans: this.calcAttrSpans(visibleColKeys, colAttrs.length),\n    //   ...this.cachedBasePivotSettings,\n    // };\n\n    // const { base64URLs } = this.state;\n    // console.log(\"base64URLs\", base64URLs);\n\n    return (\n      // <Styles isDashboardEditMode={this.isDashboardEditMode()}>\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"screenshot-chart-container\" },\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n      visibleColKeys.map((v, i) =>\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { key: i, className: \"screenshot-image-box\", onClick: (e) => {\n          (0,_plugin_downloadAsImage__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(\n            `div.screenshot-image-box img.screenshot-image[data-imgsrc=\"${\n            DUDAGI_URL + v[1]\n            }\"]`,\n            DUDAGI_URL,\n            true\n          )(e);\n        } },\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"img\", { src: DUDAGI_URL + v[1], alt: DUDAGI_URL + v[1], \"data-imgsrc\": DUDAGI_URL + v[1], className: \"screenshot-image\" })\n      )\n      )\n      )\n      // {/*<table className=\"pvtTable\" role=\"grid\">*/}\n      // {/*  <thead>*/}\n      // {/*  {colAttrs.map((c, j) =>*/}\n      // {/*    this.renderColHeaderRow(c, j, pivotSettings),*/}\n      // {/*  )}*/}\n      // {/*  {rowAttrs.length !== 0 && this.renderRowHeaderRow(pivotSettings)}*/}\n      // {/*  </thead>*/}\n      // {/*  <tbody>*/}\n      // {/*  {visibleRowKeys.map((r, i) =>*/}\n      // {/*    this.renderTableRow(r, i, pivotSettings),*/}\n      // {/*  )}*/}\n      // {/*  {colTotals && this.renderTotalsRow(pivotSettings)}*/}\n      // {/*  </tbody>*/}\n      // {/*</table>*/}\n      // </Styles>\n    );\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nTableRenderer.propTypes = {\n  ..._utilities__WEBPACK_IMPORTED_MODULE_1__.PivotData.propTypes,\n  tableOptions: (prop_types__WEBPACK_IMPORTED_MODULE_4___default().object),\n  onContextMenu: (prop_types__WEBPACK_IMPORTED_MODULE_4___default().func)\n};\nTableRenderer.defaultProps = { ..._utilities__WEBPACK_IMPORTED_MODULE_1__.PivotData.defaultProps, tableOptions: {} };;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(DUDAGI_URL, \"DUDAGI_URL\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\TableRenderers.jsx\");reactHotLoader.register(TableRenderer, \"TableRenderer\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\TableRenderers.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3Qtc2NyZWVuLWFwaS9UYWJsZVJlbmRlcmVycy5qc3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFBQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OztBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vcGx1Z2lucy9wbHVnaW4tY2hhcnQtcGl2b3QtdGFibGUvc3JjL3JlYWN0LXBpdm90LXNjcmVlbi1hcGkvVGFibGVSZW5kZXJlcnMuanN4P2ZjMzkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbm9pbnNwZWN0aW9uIER1cGxpY2F0ZWRDb2RlXHJcblxyXG4vKipcclxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuICogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuLy8gaW1wb3J0IHsgdCB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuaW1wb3J0IHsgUGl2b3REYXRhLCBmbGF0S2V5IH0gZnJvbSAnLi91dGlsaXRpZXMnO1xyXG5pbXBvcnQgZG93bmxvYWRBc0ltYWdlIGZyb20gJy4uL3BsdWdpbi9kb3dubG9hZEFzSW1hZ2UnO1xyXG4vLyBpbXBvcnQgeyBTdHlsZXMgfSBmcm9tICcuL1N0eWxlcyc7XHJcblxyXG4vLyBjb25zdCBEVURBR0lfVVJMID0gJ2h0dHA6Ly9nb2NhcC5rcjozMDY0My9hcGkvdjEvc3RvcmFnZS8nO1xyXG5jb25zdCBEVURBR0lfVVJMID0gJ2h0dHA6Ly8xMjUuMTI5LjIxMC4xMzg6ODAvYXBpL3YxL3N0b3JhZ2UvJztcclxuXHJcbi8vIGNvbnN0IHBhcnNlTGFiZWwgPSB2YWx1ZSA9PiB7XHJcbi8vICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xyXG4vLyAgICAgcmV0dXJuIHZhbHVlO1xyXG4vLyAgIH1cclxuLy8gICByZXR1cm4gU3RyaW5nKHZhbHVlKTtcclxuLy8gfTtcclxuXHJcbi8vIGZ1bmN0aW9uIGRpc3BsYXlIZWFkZXJDZWxsKFxyXG4vLyAgIG5lZWRUb2dnbGUsXHJcbi8vICAgQXJyb3dJY29uLFxyXG4vLyAgIG9uQXJyb3dDbGljayxcclxuLy8gICB2YWx1ZSxcclxuLy8gICBuYW1lc01hcHBpbmcsXHJcbi8vICkge1xyXG4vLyAgIGNvbnN0IG5hbWUgPSBuYW1lc01hcHBpbmdbdmFsdWVdIHx8IHZhbHVlO1xyXG4vLyAgIHJldHVybiBuZWVkVG9nZ2xlID8gKFxyXG4vLyAgICAgPHNwYW4gY2xhc3NOYW1lPVwidG9nZ2xlLXdyYXBwZXJcIj5cclxuLy8gICAgICAgPHNwYW5cclxuLy8gICAgICAgICByb2xlPVwiYnV0dG9uXCJcclxuLy8gICAgICAgICB0YWJJbmRleD1cIjBcIlxyXG4vLyAgICAgICAgIGNsYXNzTmFtZT1cInRvZ2dsZVwiXHJcbi8vICAgICAgICAgb25DbGljaz17b25BcnJvd0NsaWNrfVxyXG4vLyAgICAgICA+XHJcbi8vICAgICAgICAge0Fycm93SWNvbn1cclxuLy8gICAgICAgPC9zcGFuPlxyXG4vLyAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0b2dnbGUtdmFsXCI+e3BhcnNlTGFiZWwobmFtZSl9PC9zcGFuPlxyXG4vLyAgICAgPC9zcGFuPlxyXG4vLyAgICkgOiAoXHJcbi8vICAgICBwYXJzZUxhYmVsKG5hbWUpXHJcbi8vICAgKTtcclxuLy8gfVxyXG5cclxuZXhwb3J0IGNsYXNzIFRhYmxlUmVuZGVyZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcblxyXG4gICAgLy8gV2UgbmVlZCBzdGF0ZSB0byByZWNvcmQgd2hpY2ggZW50cmllcyBhcmUgY29sbGFwc2VkIGFuZCB3aGljaCBhcmVuJ3QuXHJcbiAgICAvLyBUaGlzIGlzIGFuIG9iamVjdCB3aXRoIGZsYXQta2V5cyBpbmRpY2F0aW5nIGlmIHRoZSBjb3JyZXNwb25kaW5nIHJvd3NcclxuICAgIC8vIHNob3VsZCBiZSBjb2xsYXBzZWQuXHJcbiAgICB0aGlzLnN0YXRlID0geyBjb2xsYXBzZWRSb3dzOiB7fSwgY29sbGFwc2VkQ29sczoge30sIC8qYmFzZTY0VVJMczogW10qLyB9O1xyXG5cclxuICAgIHRoaXMuY2xpY2tIZWFkZXJIYW5kbGVyID0gdGhpcy5jbGlja0hlYWRlckhhbmRsZXIuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuY2xpY2tIYW5kbGVyID0gdGhpcy5jbGlja0hhbmRsZXIuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIGdldEJhc2VQaXZvdFNldHRpbmdzKCkge1xyXG4gICAgLy8gT25lLXRpbWUgZXh0cmFjdGlvbiBvZiBwaXZvdCBzZXR0aW5ncyB0aGF0IHdlJ2xsIHVzZSB0aHJvdWdob3V0IHRoZSByZW5kZXIuXHJcblxyXG4gICAgY29uc3QgeyBwcm9wcyB9ID0gdGhpcztcclxuICAgIGNvbnN0IGNvbEF0dHJzID0gcHJvcHMuY29scztcclxuICAgIGNvbnN0IHJvd0F0dHJzID0gcHJvcHMucm93cztcclxuXHJcbiAgICBjb25zdCB0YWJsZU9wdGlvbnMgPSB7XHJcbiAgICAgIHJvd1RvdGFsczogdHJ1ZSxcclxuICAgICAgY29sVG90YWxzOiB0cnVlLFxyXG4gICAgICAuLi5wcm9wcy50YWJsZU9wdGlvbnMsXHJcbiAgICB9O1xyXG4gICAgLy8gY29uc3Qgcm93VG90YWxzID0gdGFibGVPcHRpb25zLnJvd1RvdGFscyB8fCBjb2xBdHRycy5sZW5ndGggPT09IDA7XHJcbiAgICAvLyBjb25zdCBjb2xUb3RhbHMgPSB0YWJsZU9wdGlvbnMuY29sVG90YWxzIHx8IHJvd0F0dHJzLmxlbmd0aCA9PT0gMDtcclxuICAgIGNvbnN0IHJvd1RvdGFscyA9IGZhbHNlO1xyXG4gICAgY29uc3QgY29sVG90YWxzID0gZmFsc2U7XHJcblxyXG4gICAgY29uc3QgbmFtZXNNYXBwaW5nID0gcHJvcHMubmFtZXNNYXBwaW5nIHx8IHt9O1xyXG4gICAgY29uc3Qgc3VidG90YWxPcHRpb25zID0ge1xyXG4gICAgICBhcnJvd0NvbGxhcHNlZDogJ1xcdTI1QjInLFxyXG4gICAgICBhcnJvd0V4cGFuZGVkOiAnXFx1MjVCQycsXHJcbiAgICAgIC4uLnByb3BzLnN1YnRvdGFsT3B0aW9ucyxcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgY29sU3VidG90YWxEaXNwbGF5ID0ge1xyXG4gICAgICBkaXNwbGF5T25Ub3A6IGZhbHNlLFxyXG4gICAgICBlbmFibGVkOiB0YWJsZU9wdGlvbnMuY29sU3ViVG90YWxzLFxyXG4gICAgICBoaWRlT25FeHBhbmQ6IGZhbHNlLFxyXG4gICAgICAuLi5zdWJ0b3RhbE9wdGlvbnMuY29sU3VidG90YWxEaXNwbGF5LFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCByb3dTdWJ0b3RhbERpc3BsYXkgPSB7XHJcbiAgICAgIGRpc3BsYXlPblRvcDogZmFsc2UsXHJcbiAgICAgIGVuYWJsZWQ6IHRhYmxlT3B0aW9ucy5yb3dTdWJUb3RhbHMsXHJcbiAgICAgIGhpZGVPbkV4cGFuZDogZmFsc2UsXHJcbiAgICAgIC4uLnN1YnRvdGFsT3B0aW9ucy5yb3dTdWJ0b3RhbERpc3BsYXksXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHBpdm90RGF0YSA9IG5ldyBQaXZvdERhdGEocHJvcHMsIHtcclxuICAgICAgcm93RW5hYmxlZDogcm93U3VidG90YWxEaXNwbGF5LmVuYWJsZWQsXHJcbiAgICAgIGNvbEVuYWJsZWQ6IGNvbFN1YnRvdGFsRGlzcGxheS5lbmFibGVkLFxyXG4gICAgICByb3dQYXJ0aWFsT25Ub3A6IHJvd1N1YnRvdGFsRGlzcGxheS5kaXNwbGF5T25Ub3AsXHJcbiAgICAgIGNvbFBhcnRpYWxPblRvcDogY29sU3VidG90YWxEaXNwbGF5LmRpc3BsYXlPblRvcCxcclxuICAgIH0pO1xyXG4gICAgY29uc3Qgcm93S2V5cyA9IHBpdm90RGF0YS5nZXRSb3dLZXlzKCk7XHJcbiAgICBjb25zdCBjb2xLZXlzID0gcGl2b3REYXRhLmdldENvbEtleXMoKTtcclxuXHJcbiAgICAvLyBBbHNvIHByZS1jYWxjdWxhdGUgYWxsIHRoZSBjYWxsYmFja3MgZm9yIGNlbGxzLCBldGMuLi4gVGhpcyBpcyBuaWNlIHRvIGhhdmUgdG9cclxuICAgIC8vIGF2b2lkIHJlLWNhbGN1bGF0aW9ucyBvZiB0aGUgY2FsbC1iYWNrcyBvbiBjZWxsIGV4cGFuc2lvbnMsIGV0Yy4uLlxyXG4gICAgY29uc3QgY2VsbENhbGxiYWNrcyA9IHt9O1xyXG4gICAgY29uc3Qgcm93VG90YWxDYWxsYmFja3MgPSB7fTtcclxuICAgIGNvbnN0IGNvbFRvdGFsQ2FsbGJhY2tzID0ge307XHJcbiAgICBsZXQgZ3JhbmRUb3RhbENhbGxiYWNrID0gbnVsbDtcclxuICAgIGlmICh0YWJsZU9wdGlvbnMuY2xpY2tDYWxsYmFjaykge1xyXG4gICAgICByb3dLZXlzLmZvckVhY2gocm93S2V5ID0+IHtcclxuICAgICAgICBjb25zdCBmbGF0Um93S2V5ID0gZmxhdEtleShyb3dLZXkpO1xyXG4gICAgICAgIGlmICghKGZsYXRSb3dLZXkgaW4gY2VsbENhbGxiYWNrcykpIHtcclxuICAgICAgICAgIGNlbGxDYWxsYmFja3NbZmxhdFJvd0tleV0gPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29sS2V5cy5mb3JFYWNoKGNvbEtleSA9PiB7XHJcbiAgICAgICAgICBjZWxsQ2FsbGJhY2tzW2ZsYXRSb3dLZXldW2ZsYXRLZXkoY29sS2V5KV0gPSB0aGlzLmNsaWNrSGFuZGxlcihcclxuICAgICAgICAgICAgcGl2b3REYXRhLFxyXG4gICAgICAgICAgICByb3dLZXksXHJcbiAgICAgICAgICAgIGNvbEtleSxcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gQWRkIGluIHRvdGFscyBhcyB3ZWxsLlxyXG4gICAgICBpZiAocm93VG90YWxzKSB7XHJcbiAgICAgICAgcm93S2V5cy5mb3JFYWNoKHJvd0tleSA9PiB7XHJcbiAgICAgICAgICByb3dUb3RhbENhbGxiYWNrc1tmbGF0S2V5KHJvd0tleSldID0gdGhpcy5jbGlja0hhbmRsZXIoXHJcbiAgICAgICAgICAgIHBpdm90RGF0YSxcclxuICAgICAgICAgICAgcm93S2V5LFxyXG4gICAgICAgICAgICBbXSxcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGNvbFRvdGFscykge1xyXG4gICAgICAgIGNvbEtleXMuZm9yRWFjaChjb2xLZXkgPT4ge1xyXG4gICAgICAgICAgY29sVG90YWxDYWxsYmFja3NbZmxhdEtleShjb2xLZXkpXSA9IHRoaXMuY2xpY2tIYW5kbGVyKFxyXG4gICAgICAgICAgICBwaXZvdERhdGEsXHJcbiAgICAgICAgICAgIFtdLFxyXG4gICAgICAgICAgICBjb2xLZXksXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChyb3dUb3RhbHMgJiYgY29sVG90YWxzKSB7XHJcbiAgICAgICAgZ3JhbmRUb3RhbENhbGxiYWNrID0gdGhpcy5jbGlja0hhbmRsZXIocGl2b3REYXRhLCBbXSwgW10pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcGl2b3REYXRhLFxyXG4gICAgICBjb2xBdHRycyxcclxuICAgICAgcm93QXR0cnMsXHJcbiAgICAgIGNvbEtleXMsXHJcbiAgICAgIHJvd0tleXMsXHJcbiAgICAgIHJvd1RvdGFscyxcclxuICAgICAgY29sVG90YWxzLFxyXG4gICAgICBhcnJvd0NvbGxhcHNlZDogc3VidG90YWxPcHRpb25zLmFycm93Q29sbGFwc2VkLFxyXG4gICAgICBhcnJvd0V4cGFuZGVkOiBzdWJ0b3RhbE9wdGlvbnMuYXJyb3dFeHBhbmRlZCxcclxuICAgICAgY29sU3VidG90YWxEaXNwbGF5LFxyXG4gICAgICByb3dTdWJ0b3RhbERpc3BsYXksXHJcbiAgICAgIGNlbGxDYWxsYmFja3MsXHJcbiAgICAgIHJvd1RvdGFsQ2FsbGJhY2tzLFxyXG4gICAgICBjb2xUb3RhbENhbGxiYWNrcyxcclxuICAgICAgZ3JhbmRUb3RhbENhbGxiYWNrLFxyXG4gICAgICBuYW1lc01hcHBpbmcsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgY2xpY2tIYW5kbGVyKHBpdm90RGF0YSwgcm93VmFsdWVzLCBjb2xWYWx1ZXMpIHtcclxuICAgIGNvbnN0IGNvbEF0dHJzID0gdGhpcy5wcm9wcy5jb2xzO1xyXG4gICAgY29uc3Qgcm93QXR0cnMgPSB0aGlzLnByb3BzLnJvd3M7XHJcbiAgICBjb25zdCB2YWx1ZSA9IHBpdm90RGF0YS5nZXRBZ2dyZWdhdG9yKHJvd1ZhbHVlcywgY29sVmFsdWVzKS52YWx1ZSgpO1xyXG4gICAgY29uc3QgZmlsdGVycyA9IHt9O1xyXG4gICAgY29uc3QgY29sTGltaXQgPSBNYXRoLm1pbihjb2xBdHRycy5sZW5ndGgsIGNvbFZhbHVlcy5sZW5ndGgpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xMaW1pdDsgaSArPSAxKSB7XHJcbiAgICAgIGNvbnN0IGF0dHIgPSBjb2xBdHRyc1tpXTtcclxuICAgICAgaWYgKGNvbFZhbHVlc1tpXSAhPT0gbnVsbCkge1xyXG4gICAgICAgIGZpbHRlcnNbYXR0cl0gPSBjb2xWYWx1ZXNbaV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IHJvd0xpbWl0ID0gTWF0aC5taW4ocm93QXR0cnMubGVuZ3RoLCByb3dWYWx1ZXMubGVuZ3RoKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93TGltaXQ7IGkgKz0gMSkge1xyXG4gICAgICBjb25zdCBhdHRyID0gcm93QXR0cnNbaV07XHJcbiAgICAgIGlmIChyb3dWYWx1ZXNbaV0gIT09IG51bGwpIHtcclxuICAgICAgICBmaWx0ZXJzW2F0dHJdID0gcm93VmFsdWVzW2ldO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZSA9PlxyXG4gICAgICB0aGlzLnByb3BzLnRhYmxlT3B0aW9ucy5jbGlja0NhbGxiYWNrKGUsIHZhbHVlLCBmaWx0ZXJzLCBwaXZvdERhdGEpO1xyXG4gIH1cclxuXHJcbiAgY2xpY2tIZWFkZXJIYW5kbGVyKFxyXG4gICAgcGl2b3REYXRhLFxyXG4gICAgdmFsdWVzLFxyXG4gICAgYXR0cnMsXHJcbiAgICBhdHRySWR4LFxyXG4gICAgY2FsbGJhY2ssXHJcbiAgICBpc1N1YnRvdGFsID0gZmFsc2UsXHJcbiAgICBpc0dyYW5kVG90YWwgPSBmYWxzZSxcclxuICApIHtcclxuICAgIGNvbnN0IGZpbHRlcnMgPSB7fTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IGF0dHJJZHg7IGkgKz0gMSkge1xyXG4gICAgICBjb25zdCBhdHRyID0gYXR0cnNbaV07XHJcbiAgICAgIGZpbHRlcnNbYXR0cl0gPSB2YWx1ZXNbaV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZSA9PlxyXG4gICAgICBjYWxsYmFjayhcclxuICAgICAgICBlLFxyXG4gICAgICAgIHZhbHVlc1thdHRySWR4XSxcclxuICAgICAgICBmaWx0ZXJzLFxyXG4gICAgICAgIHBpdm90RGF0YSxcclxuICAgICAgICBpc1N1YnRvdGFsLFxyXG4gICAgICAgIGlzR3JhbmRUb3RhbCxcclxuICAgICAgKTtcclxuICB9XHJcblxyXG4gIC8vIGNvbGxhcHNlQXR0cihyb3dPckNvbCwgYXR0cklkeCwgYWxsS2V5cykge1xyXG4gIC8vICAgcmV0dXJuIGUgPT4ge1xyXG4gIC8vICAgICAvLyBDb2xsYXBzZSBhbiBlbnRpcmUgYXR0cmlidXRlLlxyXG4gIC8vICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gIC8vICAgICBjb25zdCBrZXlMZW4gPSBhdHRySWR4ICsgMTtcclxuICAvLyAgICAgY29uc3QgY29sbGFwc2VkID0gYWxsS2V5cy5maWx0ZXIoayA9PiBrLmxlbmd0aCA9PT0ga2V5TGVuKS5tYXAoZmxhdEtleSk7XHJcbiAgLy9cclxuICAvLyAgICAgY29uc3QgdXBkYXRlcyA9IHt9O1xyXG4gIC8vICAgICBjb2xsYXBzZWQuZm9yRWFjaChrID0+IHtcclxuICAvLyAgICAgICB1cGRhdGVzW2tdID0gdHJ1ZTtcclxuICAvLyAgICAgfSk7XHJcbiAgLy9cclxuICAvLyAgICAgaWYgKHJvd09yQ29sKSB7XHJcbiAgLy8gICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSA9PiAoe1xyXG4gIC8vICAgICAgICAgY29sbGFwc2VkUm93czogeyAuLi5zdGF0ZS5jb2xsYXBzZWRSb3dzLCAuLi51cGRhdGVzIH0sXHJcbiAgLy8gICAgICAgfSkpO1xyXG4gIC8vICAgICB9IGVsc2Uge1xyXG4gIC8vICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUgPT4gKHtcclxuICAvLyAgICAgICAgIGNvbGxhcHNlZENvbHM6IHsgLi4uc3RhdGUuY29sbGFwc2VkQ29scywgLi4udXBkYXRlcyB9LFxyXG4gIC8vICAgICAgIH0pKTtcclxuICAvLyAgICAgfVxyXG4gIC8vICAgfTtcclxuICAvLyB9XHJcblxyXG4gIC8vIGV4cGFuZEF0dHIocm93T3JDb2wsIGF0dHJJZHgsIGFsbEtleXMpIHtcclxuICAvLyAgIHJldHVybiBlID0+IHtcclxuICAvLyAgICAgLy8gRXhwYW5kIGFuIGVudGlyZSBhdHRyaWJ1dGUuIFRoaXMgaW1wbGljaXRseSBpbXBsaWVzIGV4cGFuZGluZyBhbGwgb2YgdGhlXHJcbiAgLy8gICAgIC8vIHBhcmVudHMgYXMgd2VsbC4gSXQncyBhIGJpdCBpbmVmZmljaWVudCBidXQgYWggd2VsbC4uLlxyXG4gIC8vICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gIC8vICAgICBjb25zdCB1cGRhdGVzID0ge307XHJcbiAgLy8gICAgIGFsbEtleXMuZm9yRWFjaChrID0+IHtcclxuICAvLyAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBhdHRySWR4OyBpICs9IDEpIHtcclxuICAvLyAgICAgICAgIHVwZGF0ZXNbZmxhdEtleShrLnNsaWNlKDAsIGkgKyAxKSldID0gZmFsc2U7XHJcbiAgLy8gICAgICAgfVxyXG4gIC8vICAgICB9KTtcclxuICAvL1xyXG4gIC8vICAgICBpZiAocm93T3JDb2wpIHtcclxuICAvLyAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlID0+ICh7XHJcbiAgLy8gICAgICAgICBjb2xsYXBzZWRSb3dzOiB7IC4uLnN0YXRlLmNvbGxhcHNlZFJvd3MsIC4uLnVwZGF0ZXMgfSxcclxuICAvLyAgICAgICB9KSk7XHJcbiAgLy8gICAgIH0gZWxzZSB7XHJcbiAgLy8gICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSA9PiAoe1xyXG4gIC8vICAgICAgICAgY29sbGFwc2VkQ29sczogeyAuLi5zdGF0ZS5jb2xsYXBzZWRDb2xzLCAuLi51cGRhdGVzIH0sXHJcbiAgLy8gICAgICAgfSkpO1xyXG4gIC8vICAgICB9XHJcbiAgLy8gICB9O1xyXG4gIC8vIH1cclxuXHJcbiAgLy8gdG9nZ2xlUm93S2V5KGZsYXRSb3dLZXkpIHtcclxuICAvLyAgIHJldHVybiBlID0+IHtcclxuICAvLyAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAvLyAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSA9PiAoe1xyXG4gIC8vICAgICAgIGNvbGxhcHNlZFJvd3M6IHtcclxuICAvLyAgICAgICAgIC4uLnN0YXRlLmNvbGxhcHNlZFJvd3MsXHJcbiAgLy8gICAgICAgICBbZmxhdFJvd0tleV06ICFzdGF0ZS5jb2xsYXBzZWRSb3dzW2ZsYXRSb3dLZXldLFxyXG4gIC8vICAgICAgIH0sXHJcbiAgLy8gICAgIH0pKTtcclxuICAvLyAgIH07XHJcbiAgLy8gfVxyXG5cclxuICAvLyB0b2dnbGVDb2xLZXkoZmxhdENvbEtleSkge1xyXG4gIC8vICAgcmV0dXJuIGUgPT4ge1xyXG4gIC8vICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gIC8vICAgICB0aGlzLnNldFN0YXRlKHN0YXRlID0+ICh7XHJcbiAgLy8gICAgICAgY29sbGFwc2VkQ29sczoge1xyXG4gIC8vICAgICAgICAgLi4uc3RhdGUuY29sbGFwc2VkQ29scyxcclxuICAvLyAgICAgICAgIFtmbGF0Q29sS2V5XTogIXN0YXRlLmNvbGxhcHNlZENvbHNbZmxhdENvbEtleV0sXHJcbiAgLy8gICAgICAgfSxcclxuICAvLyAgICAgfSkpO1xyXG4gIC8vICAgfTtcclxuICAvLyB9XHJcblxyXG4gIC8vIGNhbGNBdHRyU3BhbnMoYXR0ckFyciwgbnVtQXR0cnMpIHtcclxuICAvLyAgIC8vIEdpdmVuIGFuIGFycmF5IG9mIGF0dHJpYnV0ZSB2YWx1ZXMgKGkuZS4gZWFjaCBlbGVtZW50IGlzIGFub3RoZXIgYXJyYXkgd2l0aFxyXG4gIC8vICAgLy8gdGhlIHZhbHVlIGF0IGV2ZXJ5IGxldmVsKSwgY29tcHV0ZSB0aGUgc3BhbnMgZm9yIGV2ZXJ5IGF0dHJpYnV0ZSB2YWx1ZSBhdFxyXG4gIC8vICAgLy8gZXZlcnkgbGV2ZWwuIFRoZSByZXR1cm4gdmFsdWUgaXMgYSBuZXN0ZWQgYXJyYXkgb2YgdGhlIHNhbWUgc2hhcGUuIEl0IGhhc1xyXG4gIC8vICAgLy8gLTEncyBmb3IgcmVwZWF0ZWQgdmFsdWVzIGFuZCB0aGUgc3BhbiBudW1iZXIgb3RoZXJ3aXNlLlxyXG4gIC8vXHJcbiAgLy8gICBjb25zdCBzcGFucyA9IFtdO1xyXG4gIC8vICAgLy8gSW5kZXggb2YgdGhlIGxhc3QgbmV3IHZhbHVlXHJcbiAgLy8gICBjb25zdCBsaSA9IEFycmF5KG51bUF0dHJzKS5tYXAoKCkgPT4gMCk7XHJcbiAgLy8gICBsZXQgbHYgPSBBcnJheShudW1BdHRycykubWFwKCgpID0+IG51bGwpO1xyXG4gIC8vICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdHRyQXJyLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgLy8gICAgIC8vIEtlZXAgaW5jcmVhc2luZyBzcGFuIHZhbHVlcyBhcyBsb25nIGFzIHRoZSBsYXN0IGtleXMgYXJlIHRoZSBzYW1lLiBGb3JcclxuICAvLyAgICAgLy8gdGhlIHJlc3QsIHJlY29yZCBzcGFucyBvZiAxLiBVcGRhdGUgdGhlIGluZGljZXMgdG9vLlxyXG4gIC8vICAgICBjb25zdCBjdiA9IGF0dHJBcnJbaV07XHJcbiAgLy8gICAgIGNvbnN0IGVudCA9IFtdO1xyXG4gIC8vICAgICBsZXQgZGVwdGggPSAwO1xyXG4gIC8vICAgICBjb25zdCBsaW1pdCA9IE1hdGgubWluKGx2Lmxlbmd0aCwgY3YubGVuZ3RoKTtcclxuICAvLyAgICAgd2hpbGUgKGRlcHRoIDwgbGltaXQgJiYgbHZbZGVwdGhdID09PSBjdltkZXB0aF0pIHtcclxuICAvLyAgICAgICBlbnQucHVzaCgtMSk7XHJcbiAgLy8gICAgICAgc3BhbnNbbGlbZGVwdGhdXVtkZXB0aF0gKz0gMTtcclxuICAvLyAgICAgICBkZXB0aCArPSAxO1xyXG4gIC8vICAgICB9XHJcbiAgLy8gICAgIHdoaWxlIChkZXB0aCA8IGN2Lmxlbmd0aCkge1xyXG4gIC8vICAgICAgIGxpW2RlcHRoXSA9IGk7XHJcbiAgLy8gICAgICAgZW50LnB1c2goMSk7XHJcbiAgLy8gICAgICAgZGVwdGggKz0gMTtcclxuICAvLyAgICAgfVxyXG4gIC8vICAgICBzcGFucy5wdXNoKGVudCk7XHJcbiAgLy8gICAgIGx2ID0gY3Y7XHJcbiAgLy8gICB9XHJcbiAgLy8gICByZXR1cm4gc3BhbnM7XHJcbiAgLy8gfVxyXG5cclxuICAvLyByZW5kZXJDb2xIZWFkZXJSb3coYXR0ck5hbWUsIGF0dHJJZHgsIHBpdm90U2V0dGluZ3MpIHtcclxuICAvLyAgIC8vIFJlbmRlciBhIHNpbmdsZSByb3cgaW4gdGhlIGNvbHVtbiBoZWFkZXIgYXQgdGhlIHRvcCBvZiB0aGUgcGl2b3QgdGFibGUuXHJcbiAgLy9cclxuICAvLyAgIGNvbnN0IHtcclxuICAvLyAgICAgcm93QXR0cnMsXHJcbiAgLy8gICAgIGNvbEF0dHJzLFxyXG4gIC8vICAgICBjb2xLZXlzLFxyXG4gIC8vICAgICB2aXNpYmxlQ29sS2V5cyxcclxuICAvLyAgICAgY29sQXR0clNwYW5zLFxyXG4gIC8vICAgICByb3dUb3RhbHMsXHJcbiAgLy8gICAgIGFycm93RXhwYW5kZWQsXHJcbiAgLy8gICAgIGFycm93Q29sbGFwc2VkLFxyXG4gIC8vICAgICBjb2xTdWJ0b3RhbERpc3BsYXksXHJcbiAgLy8gICAgIG1heENvbFZpc2libGUsXHJcbiAgLy8gICAgIHBpdm90RGF0YSxcclxuICAvLyAgICAgbmFtZXNNYXBwaW5nLFxyXG4gIC8vICAgfSA9IHBpdm90U2V0dGluZ3M7XHJcbiAgLy8gICBjb25zdCB7XHJcbiAgLy8gICAgIGhpZ2hsaWdodEhlYWRlckNlbGxzT25Ib3ZlcixcclxuICAvLyAgICAgb21pdHRlZEhpZ2hsaWdodEhlYWRlckdyb3VwcyA9IFtdLFxyXG4gIC8vICAgICBoaWdobGlnaHRlZEhlYWRlckNlbGxzLFxyXG4gIC8vICAgICBkYXRlRm9ybWF0dGVycyxcclxuICAvLyAgIH0gPSB0aGlzLnByb3BzLnRhYmxlT3B0aW9ucztcclxuICAvL1xyXG4gIC8vICAgY29uc3Qgc3BhY2VDZWxsID1cclxuICAvLyAgICAgYXR0cklkeCA9PT0gMCAmJiByb3dBdHRycy5sZW5ndGggIT09IDAgPyAoXHJcbiAgLy8gICAgICAgPHRoXHJcbiAgLy8gICAgICAgICBrZXk9XCJwYWRkaW5nXCJcclxuICAvLyAgICAgICAgIGNvbFNwYW49e3Jvd0F0dHJzLmxlbmd0aH1cclxuICAvLyAgICAgICAgIHJvd1NwYW49e2NvbEF0dHJzLmxlbmd0aH1cclxuICAvLyAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXHJcbiAgLy8gICAgICAgLz5cclxuICAvLyAgICAgKSA6IG51bGw7XHJcbiAgLy9cclxuICAvLyAgIGNvbnN0IG5lZWRUb2dnbGUgPVxyXG4gIC8vICAgICBjb2xTdWJ0b3RhbERpc3BsYXkuZW5hYmxlZCAmJiBhdHRySWR4ICE9PSBjb2xBdHRycy5sZW5ndGggLSAxO1xyXG4gIC8vICAgbGV0IGFycm93Q2xpY2tIYW5kbGUgPSBudWxsO1xyXG4gIC8vICAgbGV0IHN1YkFycm93ID0gbnVsbDtcclxuICAvLyAgIGlmIChuZWVkVG9nZ2xlKSB7XHJcbiAgLy8gICAgIGFycm93Q2xpY2tIYW5kbGUgPVxyXG4gIC8vICAgICAgIGF0dHJJZHggKyAxIDwgbWF4Q29sVmlzaWJsZVxyXG4gIC8vICAgICAgICAgPyB0aGlzLmNvbGxhcHNlQXR0cihmYWxzZSwgYXR0cklkeCwgY29sS2V5cylcclxuICAvLyAgICAgICAgIDogdGhpcy5leHBhbmRBdHRyKGZhbHNlLCBhdHRySWR4LCBjb2xLZXlzKTtcclxuICAvLyAgICAgc3ViQXJyb3cgPSBhdHRySWR4ICsgMSA8IG1heENvbFZpc2libGUgPyBhcnJvd0V4cGFuZGVkIDogYXJyb3dDb2xsYXBzZWQ7XHJcbiAgLy8gICB9XHJcbiAgLy8gICBjb25zdCBhdHRyTmFtZUNlbGwgPSAoXHJcbiAgLy8gICAgIDx0aCBrZXk9XCJsYWJlbFwiIGNsYXNzTmFtZT1cInB2dEF4aXNMYWJlbFwiPlxyXG4gIC8vICAgICAgIHtkaXNwbGF5SGVhZGVyQ2VsbChcclxuICAvLyAgICAgICAgIG5lZWRUb2dnbGUsXHJcbiAgLy8gICAgICAgICBzdWJBcnJvdyxcclxuICAvLyAgICAgICAgIGFycm93Q2xpY2tIYW5kbGUsXHJcbiAgLy8gICAgICAgICBhdHRyTmFtZSxcclxuICAvLyAgICAgICAgIG5hbWVzTWFwcGluZyxcclxuICAvLyAgICAgICApfVxyXG4gIC8vICAgICA8L3RoPlxyXG4gIC8vICAgKTtcclxuICAvL1xyXG4gIC8vICAgY29uc3QgYXR0clZhbHVlQ2VsbHMgPSBbXTtcclxuICAvLyAgIGNvbnN0IHJvd0luY3JTcGFuID0gcm93QXR0cnMubGVuZ3RoICE9PSAwID8gMSA6IDA7XHJcbiAgLy8gICAvLyBJdGVyYXRlIHRocm91Z2ggY29sdW1ucy4gSnVtcCBvdmVyIGR1cGxpY2F0ZSB2YWx1ZXMuXHJcbiAgLy8gICBsZXQgaSA9IDA7XHJcbiAgLy8gICB3aGlsZSAoaSA8IHZpc2libGVDb2xLZXlzLmxlbmd0aCkge1xyXG4gIC8vICAgICBsZXQgaGFuZGxlQ29udGV4dE1lbnU7XHJcbiAgLy8gICAgIGNvbnN0IGNvbEtleSA9IHZpc2libGVDb2xLZXlzW2ldO1xyXG4gIC8vICAgICBjb25zdCBjb2xTcGFuID0gYXR0cklkeCA8IGNvbEtleS5sZW5ndGggPyBjb2xBdHRyU3BhbnNbaV1bYXR0cklkeF0gOiAxO1xyXG4gIC8vICAgICBsZXQgY29sTGFiZWxDbGFzcyA9ICdwdnRDb2xMYWJlbCc7XHJcbiAgLy8gICAgIGlmIChhdHRySWR4IDwgY29sS2V5Lmxlbmd0aCkge1xyXG4gIC8vICAgICAgIGlmICghb21pdHRlZEhpZ2hsaWdodEhlYWRlckdyb3Vwcy5pbmNsdWRlcyhjb2xBdHRyc1thdHRySWR4XSkpIHtcclxuICAvLyAgICAgICAgIGlmIChoaWdobGlnaHRIZWFkZXJDZWxsc09uSG92ZXIpIHtcclxuICAvLyAgICAgICAgICAgY29sTGFiZWxDbGFzcyArPSAnIGhvdmVyYWJsZSc7XHJcbiAgLy8gICAgICAgICB9XHJcbiAgLy8gICAgICAgICBoYW5kbGVDb250ZXh0TWVudSA9IGUgPT5cclxuICAvLyAgICAgICAgICAgdGhpcy5wcm9wcy5vbkNvbnRleHRNZW51KGUsIGNvbEtleSwgdW5kZWZpbmVkLCB7XHJcbiAgLy8gICAgICAgICAgICAgW2F0dHJOYW1lXTogY29sS2V5W2F0dHJJZHhdLFxyXG4gIC8vICAgICAgICAgICB9KTtcclxuICAvLyAgICAgICB9XHJcbiAgLy8gICAgICAgaWYgKFxyXG4gIC8vICAgICAgICAgaGlnaGxpZ2h0ZWRIZWFkZXJDZWxscyAmJlxyXG4gIC8vICAgICAgICAgQXJyYXkuaXNBcnJheShoaWdobGlnaHRlZEhlYWRlckNlbGxzW2NvbEF0dHJzW2F0dHJJZHhdXSkgJiZcclxuICAvLyAgICAgICAgIGhpZ2hsaWdodGVkSGVhZGVyQ2VsbHNbY29sQXR0cnNbYXR0cklkeF1dLmluY2x1ZGVzKGNvbEtleVthdHRySWR4XSlcclxuICAvLyAgICAgICApIHtcclxuICAvLyAgICAgICAgIGNvbExhYmVsQ2xhc3MgKz0gJyBhY3RpdmUnO1xyXG4gIC8vICAgICAgIH1cclxuICAvL1xyXG4gIC8vICAgICAgIGNvbnN0IHJvd1NwYW4gPSAxICsgKGF0dHJJZHggPT09IGNvbEF0dHJzLmxlbmd0aCAtIDEgPyByb3dJbmNyU3BhbiA6IDApO1xyXG4gIC8vICAgICAgIGNvbnN0IGZsYXRDb2xLZXkgPSBmbGF0S2V5KGNvbEtleS5zbGljZSgwLCBhdHRySWR4ICsgMSkpO1xyXG4gIC8vICAgICAgIGNvbnN0IG9uQXJyb3dDbGljayA9IG5lZWRUb2dnbGUgPyB0aGlzLnRvZ2dsZUNvbEtleShmbGF0Q29sS2V5KSA6IG51bGw7XHJcbiAgLy9cclxuICAvLyAgICAgICBjb25zdCBoZWFkZXJDZWxsRm9ybWF0dGVkVmFsdWUgPVxyXG4gIC8vICAgICAgICAgZGF0ZUZvcm1hdHRlcnMgJiZcclxuICAvLyAgICAgICAgIGRhdGVGb3JtYXR0ZXJzW2F0dHJOYW1lXSAmJlxyXG4gIC8vICAgICAgICAgdHlwZW9mIGRhdGVGb3JtYXR0ZXJzW2F0dHJOYW1lXSA9PT0gJ2Z1bmN0aW9uJ1xyXG4gIC8vICAgICAgICAgICA/IGRhdGVGb3JtYXR0ZXJzW2F0dHJOYW1lXShjb2xLZXlbYXR0cklkeF0pXHJcbiAgLy8gICAgICAgICAgIDogY29sS2V5W2F0dHJJZHhdO1xyXG4gIC8vICAgICAgIGF0dHJWYWx1ZUNlbGxzLnB1c2goXHJcbiAgLy8gICAgICAgICA8dGhcclxuICAvLyAgICAgICAgICAgY2xhc3NOYW1lPXtjb2xMYWJlbENsYXNzfVxyXG4gIC8vICAgICAgICAgICBrZXk9e2Bjb2xLZXktJHtmbGF0Q29sS2V5fWB9XHJcbiAgLy8gICAgICAgICAgIGNvbFNwYW49e2NvbFNwYW59XHJcbiAgLy8gICAgICAgICAgIHJvd1NwYW49e3Jvd1NwYW59XHJcbiAgLy8gICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuY2xpY2tIZWFkZXJIYW5kbGVyKFxyXG4gIC8vICAgICAgICAgICAgIHBpdm90RGF0YSxcclxuICAvLyAgICAgICAgICAgICBjb2xLZXksXHJcbiAgLy8gICAgICAgICAgICAgdGhpcy5wcm9wcy5jb2xzLFxyXG4gIC8vICAgICAgICAgICAgIGF0dHJJZHgsXHJcbiAgLy8gICAgICAgICAgICAgdGhpcy5wcm9wcy50YWJsZU9wdGlvbnMuY2xpY2tDb2x1bW5IZWFkZXJDYWxsYmFjayxcclxuICAvLyAgICAgICAgICAgKX1cclxuICAvLyAgICAgICAgICAgb25Db250ZXh0TWVudT17aGFuZGxlQ29udGV4dE1lbnV9XHJcbiAgLy8gICAgICAgICA+XHJcbiAgLy8gICAgICAgICAgIHtkaXNwbGF5SGVhZGVyQ2VsbChcclxuICAvLyAgICAgICAgICAgICBuZWVkVG9nZ2xlLFxyXG4gIC8vICAgICAgICAgICAgIHRoaXMuc3RhdGUuY29sbGFwc2VkQ29sc1tmbGF0Q29sS2V5XVxyXG4gIC8vICAgICAgICAgICAgICAgPyBhcnJvd0NvbGxhcHNlZFxyXG4gIC8vICAgICAgICAgICAgICAgOiBhcnJvd0V4cGFuZGVkLFxyXG4gIC8vICAgICAgICAgICAgIG9uQXJyb3dDbGljayxcclxuICAvLyAgICAgICAgICAgICBoZWFkZXJDZWxsRm9ybWF0dGVkVmFsdWUsXHJcbiAgLy8gICAgICAgICAgICAgbmFtZXNNYXBwaW5nLFxyXG4gIC8vICAgICAgICAgICApfVxyXG4gIC8vICAgICAgICAgPC90aD4sXHJcbiAgLy8gICAgICAgKTtcclxuICAvLyAgICAgfSBlbHNlIGlmIChhdHRySWR4ID09PSBjb2xLZXkubGVuZ3RoKSB7XHJcbiAgLy8gICAgICAgY29uc3Qgcm93U3BhbiA9IGNvbEF0dHJzLmxlbmd0aCAtIGNvbEtleS5sZW5ndGggKyByb3dJbmNyU3BhbjtcclxuICAvLyAgICAgICBhdHRyVmFsdWVDZWxscy5wdXNoKFxyXG4gIC8vICAgICAgICAgPHRoXHJcbiAgLy8gICAgICAgICAgIGNsYXNzTmFtZT17YCR7Y29sTGFiZWxDbGFzc30gcHZ0U3VidG90YWxMYWJlbGB9XHJcbiAgLy8gICAgICAgICAgIGtleT17YGNvbEtleUJ1ZmZlci0ke2ZsYXRLZXkoY29sS2V5KX1gfVxyXG4gIC8vICAgICAgICAgICBjb2xTcGFuPXtjb2xTcGFufVxyXG4gIC8vICAgICAgICAgICByb3dTcGFuPXtyb3dTcGFufVxyXG4gIC8vICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmNsaWNrSGVhZGVySGFuZGxlcihcclxuICAvLyAgICAgICAgICAgICBwaXZvdERhdGEsXHJcbiAgLy8gICAgICAgICAgICAgY29sS2V5LFxyXG4gIC8vICAgICAgICAgICAgIHRoaXMucHJvcHMuY29scyxcclxuICAvLyAgICAgICAgICAgICBhdHRySWR4LFxyXG4gIC8vICAgICAgICAgICAgIHRoaXMucHJvcHMudGFibGVPcHRpb25zLmNsaWNrQ29sdW1uSGVhZGVyQ2FsbGJhY2ssXHJcbiAgLy8gICAgICAgICAgICAgdHJ1ZSxcclxuICAvLyAgICAgICAgICAgKX1cclxuICAvLyAgICAgICAgID5cclxuICAvLyAgICAgICAgICAge3QoJ1N1YnRvdGFsJyl9XHJcbiAgLy8gICAgICAgICA8L3RoPixcclxuICAvLyAgICAgICApO1xyXG4gIC8vICAgICB9XHJcbiAgLy8gICAgIC8vIFRoZSBuZXh0IGNvbFNwYW4gY29sdW1ucyB3aWxsIGhhdmUgdGhlIHNhbWUgdmFsdWUgYW55d2F5Li4uXHJcbiAgLy8gICAgIGkgKz0gY29sU3BhbjtcclxuICAvLyAgIH1cclxuICAvL1xyXG4gIC8vICAgY29uc3QgdG90YWxDZWxsID1cclxuICAvLyAgICAgYXR0cklkeCA9PT0gMCAmJiByb3dUb3RhbHMgPyAoXHJcbiAgLy8gICAgICAgPHRoXHJcbiAgLy8gICAgICAgICBrZXk9XCJ0b3RhbFwiXHJcbiAgLy8gICAgICAgICBjbGFzc05hbWU9XCJwdnRUb3RhbExhYmVsXCJcclxuICAvLyAgICAgICAgIHJvd1NwYW49e2NvbEF0dHJzLmxlbmd0aCArIE1hdGgubWluKHJvd0F0dHJzLmxlbmd0aCwgMSl9XHJcbiAgLy8gICAgICAgICBvbkNsaWNrPXt0aGlzLmNsaWNrSGVhZGVySGFuZGxlcihcclxuICAvLyAgICAgICAgICAgcGl2b3REYXRhLFxyXG4gIC8vICAgICAgICAgICBbXSxcclxuICAvLyAgICAgICAgICAgdGhpcy5wcm9wcy5jb2xzLFxyXG4gIC8vICAgICAgICAgICBhdHRySWR4LFxyXG4gIC8vICAgICAgICAgICB0aGlzLnByb3BzLnRhYmxlT3B0aW9ucy5jbGlja0NvbHVtbkhlYWRlckNhbGxiYWNrLFxyXG4gIC8vICAgICAgICAgICBmYWxzZSxcclxuICAvLyAgICAgICAgICAgdHJ1ZSxcclxuICAvLyAgICAgICAgICl9XHJcbiAgLy8gICAgICAgPlxyXG4gIC8vICAgICAgICAge3QoJ1RvdGFsICglKGFnZ3JlZ2F0b3JOYW1lKXMpJywge1xyXG4gIC8vICAgICAgICAgICBhZ2dyZWdhdG9yTmFtZTogdCh0aGlzLnByb3BzLmFnZ3JlZ2F0b3JOYW1lKSxcclxuICAvLyAgICAgICAgIH0pfVxyXG4gIC8vICAgICAgIDwvdGg+XHJcbiAgLy8gICAgICkgOiBudWxsO1xyXG4gIC8vXHJcbiAgLy8gICBjb25zdCBjZWxscyA9IFtzcGFjZUNlbGwsIGF0dHJOYW1lQ2VsbCwgLi4uYXR0clZhbHVlQ2VsbHMsIHRvdGFsQ2VsbF07XHJcbiAgLy8gICByZXR1cm4gPHRyIGtleT17YGNvbEF0dHItJHthdHRySWR4fWB9PntjZWxsc308L3RyPjtcclxuICAvLyB9XHJcblxyXG4gIC8vIHJlbmRlclJvd0hlYWRlclJvdyhwaXZvdFNldHRpbmdzKSB7XHJcbiAgLy8gICAvLyBSZW5kZXIganVzdCB0aGUgYXR0cmlidXRlIG5hbWVzIG9mIHRoZSByb3dzICh0aGUgYWN0dWFsIGF0dHJpYnV0ZSB2YWx1ZXNcclxuICAvLyAgIC8vIHdpbGwgc2hvdyB1cCBpbiB0aGUgaW5kaXZpZHVhbCByb3dzKS5cclxuICAvL1xyXG4gIC8vICAgY29uc3Qge1xyXG4gIC8vICAgICByb3dBdHRycyxcclxuICAvLyAgICAgY29sQXR0cnMsXHJcbiAgLy8gICAgIHJvd0tleXMsXHJcbiAgLy8gICAgIGFycm93Q29sbGFwc2VkLFxyXG4gIC8vICAgICBhcnJvd0V4cGFuZGVkLFxyXG4gIC8vICAgICByb3dTdWJ0b3RhbERpc3BsYXksXHJcbiAgLy8gICAgIG1heFJvd1Zpc2libGUsXHJcbiAgLy8gICAgIHBpdm90RGF0YSxcclxuICAvLyAgICAgbmFtZXNNYXBwaW5nLFxyXG4gIC8vICAgfSA9IHBpdm90U2V0dGluZ3M7XHJcbiAgLy8gICByZXR1cm4gKFxyXG4gIC8vICAgICA8dHIga2V5PVwicm93SGRyXCI+XHJcbiAgLy8gICAgICAge3Jvd0F0dHJzLm1hcCgociwgaSkgPT4ge1xyXG4gIC8vICAgICAgICAgY29uc3QgbmVlZExhYmVsVG9nZ2xlID1cclxuICAvLyAgICAgICAgICAgcm93U3VidG90YWxEaXNwbGF5LmVuYWJsZWQgJiYgaSAhPT0gcm93QXR0cnMubGVuZ3RoIC0gMTtcclxuICAvLyAgICAgICAgIGxldCBhcnJvd0NsaWNrSGFuZGxlID0gbnVsbDtcclxuICAvLyAgICAgICAgIGxldCBzdWJBcnJvdyA9IG51bGw7XHJcbiAgLy8gICAgICAgICBpZiAobmVlZExhYmVsVG9nZ2xlKSB7XHJcbiAgLy8gICAgICAgICAgIGFycm93Q2xpY2tIYW5kbGUgPVxyXG4gIC8vICAgICAgICAgICAgIGkgKyAxIDwgbWF4Um93VmlzaWJsZVxyXG4gIC8vICAgICAgICAgICAgICAgPyB0aGlzLmNvbGxhcHNlQXR0cih0cnVlLCBpLCByb3dLZXlzKVxyXG4gIC8vICAgICAgICAgICAgICAgOiB0aGlzLmV4cGFuZEF0dHIodHJ1ZSwgaSwgcm93S2V5cyk7XHJcbiAgLy8gICAgICAgICAgIHN1YkFycm93ID0gaSArIDEgPCBtYXhSb3dWaXNpYmxlID8gYXJyb3dFeHBhbmRlZCA6IGFycm93Q29sbGFwc2VkO1xyXG4gIC8vICAgICAgICAgfVxyXG4gIC8vICAgICAgICAgcmV0dXJuIChcclxuICAvLyAgICAgICAgICAgPHRoIGNsYXNzTmFtZT1cInB2dEF4aXNMYWJlbFwiIGtleT17YHJvd0F0dHItJHtpfWB9PlxyXG4gIC8vICAgICAgICAgICAgIHtkaXNwbGF5SGVhZGVyQ2VsbChcclxuICAvLyAgICAgICAgICAgICAgIG5lZWRMYWJlbFRvZ2dsZSxcclxuICAvLyAgICAgICAgICAgICAgIHN1YkFycm93LFxyXG4gIC8vICAgICAgICAgICAgICAgYXJyb3dDbGlja0hhbmRsZSxcclxuICAvLyAgICAgICAgICAgICAgIHIsXHJcbiAgLy8gICAgICAgICAgICAgICBuYW1lc01hcHBpbmcsXHJcbiAgLy8gICAgICAgICAgICAgKX1cclxuICAvLyAgICAgICAgICAgPC90aD5cclxuICAvLyAgICAgICAgICk7XHJcbiAgLy8gICAgICAgfSl9XHJcbiAgLy8gICAgICAgPHRoXHJcbiAgLy8gICAgICAgICBjbGFzc05hbWU9XCJwdnRUb3RhbExhYmVsXCJcclxuICAvLyAgICAgICAgIGtleT1cInBhZGRpbmdcIlxyXG4gIC8vICAgICAgICAgb25DbGljaz17dGhpcy5jbGlja0hlYWRlckhhbmRsZXIoXHJcbiAgLy8gICAgICAgICAgIHBpdm90RGF0YSxcclxuICAvLyAgICAgICAgICAgW10sXHJcbiAgLy8gICAgICAgICAgIHRoaXMucHJvcHMucm93cyxcclxuICAvLyAgICAgICAgICAgMCxcclxuICAvLyAgICAgICAgICAgdGhpcy5wcm9wcy50YWJsZU9wdGlvbnMuY2xpY2tSb3dIZWFkZXJDYWxsYmFjayxcclxuICAvLyAgICAgICAgICAgZmFsc2UsXHJcbiAgLy8gICAgICAgICAgIHRydWUsXHJcbiAgLy8gICAgICAgICApfVxyXG4gIC8vICAgICAgID5cclxuICAvLyAgICAgICAgIHtjb2xBdHRycy5sZW5ndGggPT09IDBcclxuICAvLyAgICAgICAgICAgPyB0KCdUb3RhbCAoJShhZ2dyZWdhdG9yTmFtZSlzKScsIHtcclxuICAvLyAgICAgICAgICAgICBhZ2dyZWdhdG9yTmFtZTogdCh0aGlzLnByb3BzLmFnZ3JlZ2F0b3JOYW1lKSxcclxuICAvLyAgICAgICAgICAgfSlcclxuICAvLyAgICAgICAgICAgOiBudWxsfVxyXG4gIC8vICAgICAgIDwvdGg+XHJcbiAgLy8gICAgIDwvdHI+XHJcbiAgLy8gICApO1xyXG4gIC8vIH1cclxuXHJcbiAgLy8gcmVuZGVyVGFibGVSb3cocm93S2V5LCByb3dJZHgsIHBpdm90U2V0dGluZ3MpIHtcclxuICAvLyAgIC8vIFJlbmRlciBhIHNpbmdsZSByb3cgaW4gdGhlIHBpdm90IHRhYmxlLlxyXG4gIC8vXHJcbiAgLy8gICBjb25zdCB7XHJcbiAgLy8gICAgIHJvd0F0dHJzLFxyXG4gIC8vICAgICBjb2xBdHRycyxcclxuICAvLyAgICAgcm93QXR0clNwYW5zLFxyXG4gIC8vICAgICB2aXNpYmxlQ29sS2V5cyxcclxuICAvLyAgICAgcGl2b3REYXRhLFxyXG4gIC8vICAgICByb3dUb3RhbHMsXHJcbiAgLy8gICAgIHJvd1N1YnRvdGFsRGlzcGxheSxcclxuICAvLyAgICAgYXJyb3dFeHBhbmRlZCxcclxuICAvLyAgICAgYXJyb3dDb2xsYXBzZWQsXHJcbiAgLy8gICAgIGNlbGxDYWxsYmFja3MsXHJcbiAgLy8gICAgIHJvd1RvdGFsQ2FsbGJhY2tzLFxyXG4gIC8vICAgICBuYW1lc01hcHBpbmcsXHJcbiAgLy8gICB9ID0gcGl2b3RTZXR0aW5ncztcclxuICAvL1xyXG4gIC8vICAgY29uc3Qge1xyXG4gIC8vICAgICBoaWdobGlnaHRIZWFkZXJDZWxsc09uSG92ZXIsXHJcbiAgLy8gICAgIG9taXR0ZWRIaWdobGlnaHRIZWFkZXJHcm91cHMgPSBbXSxcclxuICAvLyAgICAgaGlnaGxpZ2h0ZWRIZWFkZXJDZWxscyxcclxuICAvLyAgICAgY2VsbENvbG9yRm9ybWF0dGVycyxcclxuICAvLyAgICAgZGF0ZUZvcm1hdHRlcnMsXHJcbiAgLy8gICB9ID0gdGhpcy5wcm9wcy50YWJsZU9wdGlvbnM7XHJcbiAgLy8gICBjb25zdCBmbGF0Um93S2V5ID0gZmxhdEtleShyb3dLZXkpO1xyXG4gIC8vXHJcbiAgLy8gICBjb25zdCBjb2xJbmNyU3BhbiA9IGNvbEF0dHJzLmxlbmd0aCAhPT0gMCA/IDEgOiAwO1xyXG4gIC8vICAgY29uc3QgYXR0clZhbHVlQ2VsbHMgPSByb3dLZXkubWFwKChyLCBpKSA9PiB7XHJcbiAgLy8gICAgIGxldCBoYW5kbGVDb250ZXh0TWVudTtcclxuICAvLyAgICAgbGV0IHZhbHVlQ2VsbENsYXNzTmFtZSA9ICdwdnRSb3dMYWJlbCc7XHJcbiAgLy8gICAgIGlmICghb21pdHRlZEhpZ2hsaWdodEhlYWRlckdyb3Vwcy5pbmNsdWRlcyhyb3dBdHRyc1tpXSkpIHtcclxuICAvLyAgICAgICBpZiAoaGlnaGxpZ2h0SGVhZGVyQ2VsbHNPbkhvdmVyKSB7XHJcbiAgLy8gICAgICAgICB2YWx1ZUNlbGxDbGFzc05hbWUgKz0gJyBob3ZlcmFibGUnO1xyXG4gIC8vICAgICAgIH1cclxuICAvLyAgICAgICBoYW5kbGVDb250ZXh0TWVudSA9IGUgPT5cclxuICAvLyAgICAgICAgIHRoaXMucHJvcHMub25Db250ZXh0TWVudShlLCB1bmRlZmluZWQsIHJvd0tleSwge1xyXG4gIC8vICAgICAgICAgICBbcm93QXR0cnNbaV1dOiByLFxyXG4gIC8vICAgICAgICAgfSk7XHJcbiAgLy8gICAgIH1cclxuICAvLyAgICAgaWYgKFxyXG4gIC8vICAgICAgIGhpZ2hsaWdodGVkSGVhZGVyQ2VsbHMgJiZcclxuICAvLyAgICAgICBBcnJheS5pc0FycmF5KGhpZ2hsaWdodGVkSGVhZGVyQ2VsbHNbcm93QXR0cnNbaV1dKSAmJlxyXG4gIC8vICAgICAgIGhpZ2hsaWdodGVkSGVhZGVyQ2VsbHNbcm93QXR0cnNbaV1dLmluY2x1ZGVzKHIpXHJcbiAgLy8gICAgICkge1xyXG4gIC8vICAgICAgIHZhbHVlQ2VsbENsYXNzTmFtZSArPSAnIGFjdGl2ZSc7XHJcbiAgLy8gICAgIH1cclxuICAvLyAgICAgY29uc3Qgcm93U3BhbiA9IHJvd0F0dHJTcGFuc1tyb3dJZHhdW2ldO1xyXG4gIC8vICAgICBpZiAocm93U3BhbiA+IDApIHtcclxuICAvLyAgICAgICBjb25zdCBmbGF0Um93S2V5ID0gZmxhdEtleShyb3dLZXkuc2xpY2UoMCwgaSArIDEpKTtcclxuICAvLyAgICAgICBjb25zdCBjb2xTcGFuID0gMSArIChpID09PSByb3dBdHRycy5sZW5ndGggLSAxID8gY29sSW5jclNwYW4gOiAwKTtcclxuICAvLyAgICAgICBjb25zdCBuZWVkUm93VG9nZ2xlID1cclxuICAvLyAgICAgICAgIHJvd1N1YnRvdGFsRGlzcGxheS5lbmFibGVkICYmIGkgIT09IHJvd0F0dHJzLmxlbmd0aCAtIDE7XHJcbiAgLy8gICAgICAgY29uc3Qgb25BcnJvd0NsaWNrID0gbmVlZFJvd1RvZ2dsZVxyXG4gIC8vICAgICAgICAgPyB0aGlzLnRvZ2dsZVJvd0tleShmbGF0Um93S2V5KVxyXG4gIC8vICAgICAgICAgOiBudWxsO1xyXG4gIC8vXHJcbiAgLy8gICAgICAgY29uc3QgaGVhZGVyQ2VsbEZvcm1hdHRlZFZhbHVlID1cclxuICAvLyAgICAgICAgIGRhdGVGb3JtYXR0ZXJzICYmIGRhdGVGb3JtYXR0ZXJzW3Jvd0F0dHJzW2ldXVxyXG4gIC8vICAgICAgICAgICA/IGRhdGVGb3JtYXR0ZXJzW3Jvd0F0dHJzW2ldXShyKVxyXG4gIC8vICAgICAgICAgICA6IHI7XHJcbiAgLy8gICAgICAgcmV0dXJuIChcclxuICAvLyAgICAgICAgIDx0aFxyXG4gIC8vICAgICAgICAgICBrZXk9e2Byb3dLZXlMYWJlbC0ke2l9YH1cclxuICAvLyAgICAgICAgICAgY2xhc3NOYW1lPXt2YWx1ZUNlbGxDbGFzc05hbWV9XHJcbiAgLy8gICAgICAgICAgIHJvd1NwYW49e3Jvd1NwYW59XHJcbiAgLy8gICAgICAgICAgIGNvbFNwYW49e2NvbFNwYW59XHJcbiAgLy8gICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuY2xpY2tIZWFkZXJIYW5kbGVyKFxyXG4gIC8vICAgICAgICAgICAgIHBpdm90RGF0YSxcclxuICAvLyAgICAgICAgICAgICByb3dLZXksXHJcbiAgLy8gICAgICAgICAgICAgdGhpcy5wcm9wcy5yb3dzLFxyXG4gIC8vICAgICAgICAgICAgIGksXHJcbiAgLy8gICAgICAgICAgICAgdGhpcy5wcm9wcy50YWJsZU9wdGlvbnMuY2xpY2tSb3dIZWFkZXJDYWxsYmFjayxcclxuICAvLyAgICAgICAgICAgKX1cclxuICAvLyAgICAgICAgICAgb25Db250ZXh0TWVudT17aGFuZGxlQ29udGV4dE1lbnV9XHJcbiAgLy8gICAgICAgICA+XHJcbiAgLy8gICAgICAgICAgIHtkaXNwbGF5SGVhZGVyQ2VsbChcclxuICAvLyAgICAgICAgICAgICBuZWVkUm93VG9nZ2xlLFxyXG4gIC8vICAgICAgICAgICAgIHRoaXMuc3RhdGUuY29sbGFwc2VkUm93c1tmbGF0Um93S2V5XVxyXG4gIC8vICAgICAgICAgICAgICAgPyBhcnJvd0NvbGxhcHNlZFxyXG4gIC8vICAgICAgICAgICAgICAgOiBhcnJvd0V4cGFuZGVkLFxyXG4gIC8vICAgICAgICAgICAgIG9uQXJyb3dDbGljayxcclxuICAvLyAgICAgICAgICAgICBoZWFkZXJDZWxsRm9ybWF0dGVkVmFsdWUsXHJcbiAgLy8gICAgICAgICAgICAgbmFtZXNNYXBwaW5nLFxyXG4gIC8vICAgICAgICAgICApfVxyXG4gIC8vICAgICAgICAgPC90aD5cclxuICAvLyAgICAgICApO1xyXG4gIC8vICAgICB9XHJcbiAgLy8gICAgIHJldHVybiBudWxsO1xyXG4gIC8vICAgfSk7XHJcbiAgLy9cclxuICAvLyAgIGNvbnN0IGF0dHJWYWx1ZVBhZGRpbmdDZWxsID1cclxuICAvLyAgICAgcm93S2V5Lmxlbmd0aCA8IHJvd0F0dHJzLmxlbmd0aCA/IChcclxuICAvLyAgICAgICA8dGhcclxuICAvLyAgICAgICAgIGNsYXNzTmFtZT1cInB2dFJvd0xhYmVsIHB2dFN1YnRvdGFsTGFiZWxcIlxyXG4gIC8vICAgICAgICAga2V5PVwicm93S2V5QnVmZmVyXCJcclxuICAvLyAgICAgICAgIGNvbFNwYW49e3Jvd0F0dHJzLmxlbmd0aCAtIHJvd0tleS5sZW5ndGggKyBjb2xJbmNyU3Bhbn1cclxuICAvLyAgICAgICAgIHJvd1NwYW49ezF9XHJcbiAgLy8gICAgICAgICBvbkNsaWNrPXt0aGlzLmNsaWNrSGVhZGVySGFuZGxlcihcclxuICAvLyAgICAgICAgICAgcGl2b3REYXRhLFxyXG4gIC8vICAgICAgICAgICByb3dLZXksXHJcbiAgLy8gICAgICAgICAgIHRoaXMucHJvcHMucm93cyxcclxuICAvLyAgICAgICAgICAgcm93S2V5Lmxlbmd0aCxcclxuICAvLyAgICAgICAgICAgdGhpcy5wcm9wcy50YWJsZU9wdGlvbnMuY2xpY2tSb3dIZWFkZXJDYWxsYmFjayxcclxuICAvLyAgICAgICAgICAgdHJ1ZSxcclxuICAvLyAgICAgICAgICl9XHJcbiAgLy8gICAgICAgPlxyXG4gIC8vICAgICAgICAge3QoJ1N1YnRvdGFsJyl9XHJcbiAgLy8gICAgICAgPC90aD5cclxuICAvLyAgICAgKSA6IG51bGw7XHJcbiAgLy9cclxuICAvLyAgIGNvbnN0IHJvd0NsaWNrSGFuZGxlcnMgPSBjZWxsQ2FsbGJhY2tzW2ZsYXRSb3dLZXldIHx8IHt9O1xyXG4gIC8vICAgY29uc3QgdmFsdWVDZWxscyA9IHZpc2libGVDb2xLZXlzLm1hcChjb2xLZXkgPT4ge1xyXG4gIC8vICAgICBjb25zdCBmbGF0Q29sS2V5ID0gZmxhdEtleShjb2xLZXkpO1xyXG4gIC8vICAgICBjb25zdCBhZ2cgPSBwaXZvdERhdGEuZ2V0QWdncmVnYXRvcihyb3dLZXksIGNvbEtleSk7XHJcbiAgLy8gICAgIGNvbnN0IGFnZ1ZhbHVlID0gYWdnLnZhbHVlKCk7XHJcbiAgLy9cclxuICAvLyAgICAgY29uc3Qga2V5cyA9IFsuLi5yb3dLZXksIC4uLmNvbEtleV07XHJcbiAgLy8gICAgIGxldCBiYWNrZ3JvdW5kQ29sb3I7XHJcbiAgLy8gICAgIGlmIChjZWxsQ29sb3JGb3JtYXR0ZXJzKSB7XHJcbiAgLy8gICAgICAgT2JqZWN0LnZhbHVlcyhjZWxsQ29sb3JGb3JtYXR0ZXJzKS5mb3JFYWNoKGNlbGxDb2xvckZvcm1hdHRlciA9PiB7XHJcbiAgLy8gICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjZWxsQ29sb3JGb3JtYXR0ZXIpKSB7XHJcbiAgLy8gICAgICAgICAgIGtleXMuZm9yRWFjaChrZXkgPT4ge1xyXG4gIC8vICAgICAgICAgICAgIGlmIChiYWNrZ3JvdW5kQ29sb3IpIHtcclxuICAvLyAgICAgICAgICAgICAgIHJldHVybjtcclxuICAvLyAgICAgICAgICAgICB9XHJcbiAgLy8gICAgICAgICAgICAgY2VsbENvbG9yRm9ybWF0dGVyXHJcbiAgLy8gICAgICAgICAgICAgICAuZmlsdGVyKGZvcm1hdHRlciA9PiBmb3JtYXR0ZXIuY29sdW1uID09PSBrZXkpXHJcbiAgLy8gICAgICAgICAgICAgICAuZm9yRWFjaChmb3JtYXR0ZXIgPT4ge1xyXG4gIC8vICAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXR0ZXJSZXN1bHQgPSBmb3JtYXR0ZXIuZ2V0Q29sb3JGcm9tVmFsdWUoYWdnVmFsdWUpO1xyXG4gIC8vICAgICAgICAgICAgICAgICBpZiAoZm9ybWF0dGVyUmVzdWx0KSB7XHJcbiAgLy8gICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gZm9ybWF0dGVyUmVzdWx0O1xyXG4gIC8vICAgICAgICAgICAgICAgICB9XHJcbiAgLy8gICAgICAgICAgICAgICB9KTtcclxuICAvLyAgICAgICAgICAgfSk7XHJcbiAgLy8gICAgICAgICB9XHJcbiAgLy8gICAgICAgfSk7XHJcbiAgLy8gICAgIH1cclxuICAvL1xyXG4gIC8vICAgICBjb25zdCBzdHlsZSA9IGFnZy5pc1N1YnRvdGFsXHJcbiAgLy8gICAgICAgPyB7IGZvbnRXZWlnaHQ6ICdib2xkJyB9XHJcbiAgLy8gICAgICAgOiB7IGJhY2tncm91bmRDb2xvciB9O1xyXG4gIC8vXHJcbiAgLy8gICAgIHJldHVybiAoXHJcbiAgLy8gICAgICAgPHRkXHJcbiAgLy8gICAgICAgICByb2xlPVwiZ3JpZGNlbGxcIlxyXG4gIC8vICAgICAgICAgY2xhc3NOYW1lPVwicHZ0VmFsXCJcclxuICAvLyAgICAgICAgIGtleT17YHB2dFZhbC0ke2ZsYXRDb2xLZXl9YH1cclxuICAvLyAgICAgICAgIG9uQ2xpY2s9e3Jvd0NsaWNrSGFuZGxlcnNbZmxhdENvbEtleV19XHJcbiAgLy8gICAgICAgICBvbkNvbnRleHRNZW51PXtlID0+IHRoaXMucHJvcHMub25Db250ZXh0TWVudShlLCBjb2xLZXksIHJvd0tleSl9XHJcbiAgLy8gICAgICAgICBzdHlsZT17c3R5bGV9XHJcbiAgLy8gICAgICAgPlxyXG4gIC8vICAgICAgICAge2FnZy5mb3JtYXQoYWdnVmFsdWUpfVxyXG4gIC8vICAgICAgIDwvdGQ+XHJcbiAgLy8gICAgICk7XHJcbiAgLy8gICB9KTtcclxuICAvL1xyXG4gIC8vICAgbGV0IHRvdGFsQ2VsbCA9IG51bGw7XHJcbiAgLy8gICBpZiAocm93VG90YWxzKSB7XHJcbiAgLy8gICAgIGNvbnN0IGFnZyA9IHBpdm90RGF0YS5nZXRBZ2dyZWdhdG9yKHJvd0tleSwgW10pO1xyXG4gIC8vICAgICBjb25zdCBhZ2dWYWx1ZSA9IGFnZy52YWx1ZSgpO1xyXG4gIC8vICAgICB0b3RhbENlbGwgPSAoXHJcbiAgLy8gICAgICAgPHRkXHJcbiAgLy8gICAgICAgICByb2xlPVwiZ3JpZGNlbGxcIlxyXG4gIC8vICAgICAgICAga2V5PVwidG90YWxcIlxyXG4gIC8vICAgICAgICAgY2xhc3NOYW1lPVwicHZ0VG90YWxcIlxyXG4gIC8vICAgICAgICAgb25DbGljaz17cm93VG90YWxDYWxsYmFja3NbZmxhdFJvd0tleV19XHJcbiAgLy8gICAgICAgICBvbkNvbnRleHRNZW51PXtlID0+IHRoaXMucHJvcHMub25Db250ZXh0TWVudShlLCB1bmRlZmluZWQsIHJvd0tleSl9XHJcbiAgLy8gICAgICAgPlxyXG4gIC8vICAgICAgICAge2FnZy5mb3JtYXQoYWdnVmFsdWUpfVxyXG4gIC8vICAgICAgIDwvdGQ+XHJcbiAgLy8gICAgICk7XHJcbiAgLy8gICB9XHJcbiAgLy9cclxuICAvLyAgIGNvbnN0IHJvd0NlbGxzID0gW1xyXG4gIC8vICAgICAuLi5hdHRyVmFsdWVDZWxscyxcclxuICAvLyAgICAgYXR0clZhbHVlUGFkZGluZ0NlbGwsXHJcbiAgLy8gICAgIC4uLnZhbHVlQ2VsbHMsXHJcbiAgLy8gICAgIHRvdGFsQ2VsbCxcclxuICAvLyAgIF07XHJcbiAgLy9cclxuICAvLyAgIHJldHVybiA8dHIga2V5PXtga2V5Um93LSR7ZmxhdFJvd0tleX1gfT57cm93Q2VsbHN9PC90cj47XHJcbiAgLy8gfVxyXG5cclxuICAvLyByZW5kZXJUb3RhbHNSb3cocGl2b3RTZXR0aW5ncykge1xyXG4gIC8vICAgLy8gUmVuZGVyIHRoZSBmaW5hbCB0b3RhbHMgcm93cyB0aGF0IGhhcyB0aGUgdG90YWxzIGZvciBhbGwgdGhlIGNvbHVtbnMuXHJcbiAgLy9cclxuICAvLyAgIGNvbnN0IHtcclxuICAvLyAgICAgcm93QXR0cnMsXHJcbiAgLy8gICAgIGNvbEF0dHJzLFxyXG4gIC8vICAgICB2aXNpYmxlQ29sS2V5cyxcclxuICAvLyAgICAgcm93VG90YWxzLFxyXG4gIC8vICAgICBwaXZvdERhdGEsXHJcbiAgLy8gICAgIGNvbFRvdGFsQ2FsbGJhY2tzLFxyXG4gIC8vICAgICBncmFuZFRvdGFsQ2FsbGJhY2ssXHJcbiAgLy8gICB9ID0gcGl2b3RTZXR0aW5ncztcclxuICAvL1xyXG4gIC8vICAgY29uc3QgdG90YWxMYWJlbENlbGwgPSAoXHJcbiAgLy8gICAgIDx0aFxyXG4gIC8vICAgICAgIGtleT1cImxhYmVsXCJcclxuICAvLyAgICAgICBjbGFzc05hbWU9XCJwdnRUb3RhbExhYmVsIHB2dFJvd1RvdGFsTGFiZWxcIlxyXG4gIC8vICAgICAgIGNvbFNwYW49e3Jvd0F0dHJzLmxlbmd0aCArIE1hdGgubWluKGNvbEF0dHJzLmxlbmd0aCwgMSl9XHJcbiAgLy8gICAgICAgb25DbGljaz17dGhpcy5jbGlja0hlYWRlckhhbmRsZXIoXHJcbiAgLy8gICAgICAgICBwaXZvdERhdGEsXHJcbiAgLy8gICAgICAgICBbXSxcclxuICAvLyAgICAgICAgIHRoaXMucHJvcHMucm93cyxcclxuICAvLyAgICAgICAgIDAsXHJcbiAgLy8gICAgICAgICB0aGlzLnByb3BzLnRhYmxlT3B0aW9ucy5jbGlja1Jvd0hlYWRlckNhbGxiYWNrLFxyXG4gIC8vICAgICAgICAgZmFsc2UsXHJcbiAgLy8gICAgICAgICB0cnVlLFxyXG4gIC8vICAgICAgICl9XHJcbiAgLy8gICAgID5cclxuICAvLyAgICAgICB7dCgnVG90YWwgKCUoYWdncmVnYXRvck5hbWUpcyknLCB7XHJcbiAgLy8gICAgICAgICBhZ2dyZWdhdG9yTmFtZTogdCh0aGlzLnByb3BzLmFnZ3JlZ2F0b3JOYW1lKSxcclxuICAvLyAgICAgICB9KX1cclxuICAvLyAgICAgPC90aD5cclxuICAvLyAgICk7XHJcbiAgLy9cclxuICAvLyAgIGNvbnN0IHRvdGFsVmFsdWVDZWxscyA9IHZpc2libGVDb2xLZXlzLm1hcChjb2xLZXkgPT4ge1xyXG4gIC8vICAgICBjb25zdCBmbGF0Q29sS2V5ID0gZmxhdEtleShjb2xLZXkpO1xyXG4gIC8vICAgICBjb25zdCBhZ2cgPSBwaXZvdERhdGEuZ2V0QWdncmVnYXRvcihbXSwgY29sS2V5KTtcclxuICAvLyAgICAgY29uc3QgYWdnVmFsdWUgPSBhZ2cudmFsdWUoKTtcclxuICAvL1xyXG4gIC8vICAgICByZXR1cm4gKFxyXG4gIC8vICAgICAgIDx0ZFxyXG4gIC8vICAgICAgICAgcm9sZT1cImdyaWRjZWxsXCJcclxuICAvLyAgICAgICAgIGNsYXNzTmFtZT1cInB2dFRvdGFsIHB2dFJvd1RvdGFsXCJcclxuICAvLyAgICAgICAgIGtleT17YHRvdGFsLSR7ZmxhdENvbEtleX1gfVxyXG4gIC8vICAgICAgICAgb25DbGljaz17Y29sVG90YWxDYWxsYmFja3NbZmxhdENvbEtleV19XHJcbiAgLy8gICAgICAgICBvbkNvbnRleHRNZW51PXtlID0+IHRoaXMucHJvcHMub25Db250ZXh0TWVudShlLCBjb2xLZXksIHVuZGVmaW5lZCl9XHJcbiAgLy8gICAgICAgICBzdHlsZT17eyBwYWRkaW5nOiAnNXB4JyB9fVxyXG4gIC8vICAgICAgID5cclxuICAvLyAgICAgICAgIHthZ2cuZm9ybWF0KGFnZ1ZhbHVlKX1cclxuICAvLyAgICAgICA8L3RkPlxyXG4gIC8vICAgICApO1xyXG4gIC8vICAgfSk7XHJcbiAgLy9cclxuICAvLyAgIGxldCBncmFuZFRvdGFsQ2VsbCA9IG51bGw7XHJcbiAgLy8gICBpZiAocm93VG90YWxzKSB7XHJcbiAgLy8gICAgIGNvbnN0IGFnZyA9IHBpdm90RGF0YS5nZXRBZ2dyZWdhdG9yKFtdLCBbXSk7XHJcbiAgLy8gICAgIGNvbnN0IGFnZ1ZhbHVlID0gYWdnLnZhbHVlKCk7XHJcbiAgLy8gICAgIGdyYW5kVG90YWxDZWxsID0gKFxyXG4gIC8vICAgICAgIDx0ZFxyXG4gIC8vICAgICAgICAgcm9sZT1cImdyaWRjZWxsXCJcclxuICAvLyAgICAgICAgIGtleT1cInRvdGFsXCJcclxuICAvLyAgICAgICAgIGNsYXNzTmFtZT1cInB2dEdyYW5kVG90YWwgcHZ0Um93VG90YWxcIlxyXG4gIC8vICAgICAgICAgb25DbGljaz17Z3JhbmRUb3RhbENhbGxiYWNrfVxyXG4gIC8vICAgICAgICAgb25Db250ZXh0TWVudT17ZSA9PiB0aGlzLnByb3BzLm9uQ29udGV4dE1lbnUoZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQpfVxyXG4gIC8vICAgICAgID5cclxuICAvLyAgICAgICAgIHthZ2cuZm9ybWF0KGFnZ1ZhbHVlKX1cclxuICAvLyAgICAgICA8L3RkPlxyXG4gIC8vICAgICApO1xyXG4gIC8vICAgfVxyXG4gIC8vXHJcbiAgLy8gICBjb25zdCB0b3RhbENlbGxzID0gW3RvdGFsTGFiZWxDZWxsLCAuLi50b3RhbFZhbHVlQ2VsbHMsIGdyYW5kVG90YWxDZWxsXTtcclxuICAvL1xyXG4gIC8vICAgcmV0dXJuIChcclxuICAvLyAgICAgPHRyIGtleT1cInRvdGFsXCIgY2xhc3NOYW1lPVwicHZ0Um93VG90YWxzXCI+XHJcbiAgLy8gICAgICAge3RvdGFsQ2VsbHN9XHJcbiAgLy8gICAgIDwvdHI+XHJcbiAgLy8gICApO1xyXG4gIC8vIH1cclxuXHJcbiAgdmlzaWJsZUtleXMoa2V5cywgY29sbGFwc2VkLCBudW1BdHRycywgc3VidG90YWxEaXNwbGF5KSB7XHJcbiAgICByZXR1cm4ga2V5cy5maWx0ZXIoXHJcbiAgICAgIGtleSA9PlxyXG4gICAgICAgIC8vIElzIHRoZSBrZXkgaGlkZGVuIGJ5IG9uZSBvZiBpdHMgcGFyZW50cz9cclxuICAgICAgICAha2V5LnNvbWUoKF8sIGopID0+IGNvbGxhcHNlZFtmbGF0S2V5KGtleS5zbGljZSgwLCBqKSldKSAmJlxyXG4gICAgICAgIC8vIExlYWYga2V5LlxyXG4gICAgICAgIChrZXkubGVuZ3RoID09PSBudW1BdHRycyB8fFxyXG4gICAgICAgICAgLy8gQ2hpbGRyZW4gaGlkZGVuLiBNdXN0IHNob3cgdG90YWwuXHJcbiAgICAgICAgICBmbGF0S2V5KGtleSkgaW4gY29sbGFwc2VkIHx8XHJcbiAgICAgICAgICAvLyBEb24ndCBoaWRlIHRvdGFscy5cclxuICAgICAgICAgICFzdWJ0b3RhbERpc3BsYXkuaGlkZU9uRXhwYW5kKSxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBpc0Rhc2hib2FyZEVkaXRNb2RlKCkge1xyXG4gIC8vICAgcmV0dXJuIGRvY3VtZW50LmNvbnRhaW5zKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXNoYm9hcmQtLWVkaXRpbmcnKSk7XHJcbiAgLy8gfVxyXG5cclxuICAvLyBnZXREYXRhKCkge1xyXG4gIC8vICAgaWYgKHRoaXMuY2FjaGVkUHJvcHMgIT09IHRoaXMucHJvcHMpIHtcclxuICAvLyAgICAgdGhpcy5jYWNoZWRQcm9wcyA9IHRoaXMucHJvcHM7XHJcbiAgLy8gICAgIHRoaXMuY2FjaGVkQmFzZVBpdm90U2V0dGluZ3MgPSB0aGlzLmdldEJhc2VQaXZvdFNldHRpbmdzKCk7XHJcbiAgLy8gICB9XHJcbiAgLy8gICBjb25zdCB7XHJcbiAgLy8gICAgIGNvbEF0dHJzLFxyXG4gIC8vICAgICBjb2xLZXlzLFxyXG4gIC8vICAgICBjb2xTdWJ0b3RhbERpc3BsYXksXHJcbiAgLy8gICB9ID0gdGhpcy5jYWNoZWRCYXNlUGl2b3RTZXR0aW5ncztcclxuICAvL1xyXG4gIC8vICAgY29uc3QgdmlzaWJsZUNvbEtleXMgPSBjb2xLZXlzLmZpbHRlcihcclxuICAvLyAgICAga2V5ID0+XHJcbiAgLy8gICAgICAgLy8gSXMgdGhlIGtleSBoaWRkZW4gYnkgb25lIG9mIGl0cyBwYXJlbnRzP1xyXG4gIC8vICAgICAgICFrZXkuc29tZSgoaywgaikgPT4gdGhpcy5zdGF0ZS5jb2xsYXBzZWRDb2xzW2ZsYXRLZXkoa2V5LnNsaWNlKDAsIGopKV0pICYmXHJcbiAgLy8gICAgICAgLy8gTGVhZiBrZXkuXHJcbiAgLy8gICAgICAgKGtleS5sZW5ndGggPT09IGNvbEF0dHJzLmxlbmd0aCB8fFxyXG4gIC8vICAgICAgICAgLy8gQ2hpbGRyZW4gaGlkZGVuLiBNdXN0IHNob3cgdG90YWwuXHJcbiAgLy8gICAgICAgICBmbGF0S2V5KGtleSkgaW4gdGhpcy5zdGF0ZS5jb2xsYXBzZWRDb2xzIHx8XHJcbiAgLy8gICAgICAgICAvLyBEb24ndCBoaWRlIHRvdGFscy5cclxuICAvLyAgICAgICAgICFjb2xTdWJ0b3RhbERpc3BsYXkuaGlkZU9uRXhwYW5kKSxcclxuICAvLyAgIClcclxuICAvLyAgIC8vIGNvbnNvbGUubG9nKHZpc2libGVDb2xLZXlzKTtcclxuICAvL1xyXG4gIC8vICAgKGFzeW5jICgpID0+IHtcclxuICAvLyAgICAgY29uc3QgbGlzdCA9IFtdO1xyXG4gIC8vXHJcbiAgLy8gICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmlzaWJsZUNvbEtleXMubGVuZ3RoOyBpKyspIHtcclxuICAvLyAgICAgICBjb25zdCB2ID0gdmlzaWJsZUNvbEtleXNbaV07XHJcbiAgLy9cclxuICAvLyAgICAgICB0cnkge1xyXG4gIC8vICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChEVURBR0lfVVJMICsgdlsxXSk7XHJcbiAgLy8gICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xyXG4gIC8vICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAvLyAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpO1xyXG4gIC8vICAgICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9ICgpID0+IHtcclxuICAvLyAgICAgICAgICAgY29uc3QgYmFzZTY0ZGF0YSA9IHJlYWRlci5yZXN1bHQ7XHJcbiAgLy8gICAgICAgICAgIGxpc3QucHVzaChiYXNlNjRkYXRhKTtcclxuICAvLyAgICAgICAgIH07XHJcbiAgLy8gICAgICAgfSBjYXRjaCAoZSkge1xyXG4gIC8vICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOiBcIiwgZSk7XHJcbiAgLy8gICAgICAgfVxyXG4gIC8vICAgICB9XHJcbiAgLy9cclxuICAvLyAgICAgY29uc3QgbGlzdGpvaW4gPSBsaXN0LmpvaW4oJywnKTtcclxuICAvLyAgICAgY29uc3Qgam9pbiA9IHRoaXMuc3RhdGUuaW1hZ2VMaXN0LmpvaW4oJywnKTtcclxuICAvL1xyXG4gIC8vICAgICBpZihsaXN0am9pbiAhPT0gam9pbikge1xyXG4gIC8vICAgICAgIHRoaXMuc2V0U3RhdGUoKCkgPT4gKHtcclxuICAvLyAgICAgICAgIGltYWdlTGlzdDogWy4uLmxpc3RdLFxyXG4gIC8vICAgICAgIH0pKTtcclxuICAvLyAgICAgfVxyXG4gIC8vICAgICAvLyBjb25zb2xlLmxvZygndGhpcy5zdGF0ZS5pbWFnZUxpc3QnLCBsaXN0am9pbiA9PT0gam9pbiwgdGhpcy5zdGF0ZS5pbWFnZUxpc3QpO1xyXG4gIC8vICAgfSkoKTtcclxuICAvLyB9XHJcblxyXG4gIC8vIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gIC8vICAgaWYgKHRoaXMuY2FjaGVkUHJvcHMgIT09IHRoaXMucHJvcHMpIHtcclxuICAvLyAgICAgdGhpcy5jYWNoZWRQcm9wcyA9IHRoaXMucHJvcHM7XHJcbiAgLy8gICAgIHRoaXMuY2FjaGVkQmFzZVBpdm90U2V0dGluZ3MgPSB0aGlzLmdldEJhc2VQaXZvdFNldHRpbmdzKCk7XHJcbiAgLy8gICB9XHJcbiAgLy8gICBjb25zdCB7XHJcbiAgLy8gICAgIGNvbEF0dHJzLFxyXG4gIC8vICAgICBjb2xLZXlzLFxyXG4gIC8vICAgICBjb2xTdWJ0b3RhbERpc3BsYXksXHJcbiAgLy8gICB9ID0gdGhpcy5jYWNoZWRCYXNlUGl2b3RTZXR0aW5ncztcclxuICAvLyAgIGNvbnN0IHZpc2libGVDb2xLZXlzID0gY29sS2V5cy5maWx0ZXIoXHJcbiAgLy8gICAgIGtleSA9PlxyXG4gIC8vICAgICAgIC8vIElzIHRoZSBrZXkgaGlkZGVuIGJ5IG9uZSBvZiBpdHMgcGFyZW50cz9cclxuICAvLyAgICAgICAha2V5LnNvbWUoKF8sIGopID0+IHRoaXMuc3RhdGUuY29sbGFwc2VkQ29sc1tmbGF0S2V5KGtleS5zbGljZSgwLCBqKSldKSAmJlxyXG4gIC8vICAgICAgIC8vIExlYWYga2V5LlxyXG4gIC8vICAgICAgIChrZXkubGVuZ3RoID09PSBjb2xBdHRycy5sZW5ndGggfHxcclxuICAvLyAgICAgICAgIC8vIENoaWxkcmVuIGhpZGRlbi4gTXVzdCBzaG93IHRvdGFsLlxyXG4gIC8vICAgICAgICAgZmxhdEtleShrZXkpIGluIHRoaXMuc3RhdGUuY29sbGFwc2VkQ29scyB8fFxyXG4gIC8vICAgICAgICAgLy8gRG9uJ3QgaGlkZSB0b3RhbHMuXHJcbiAgLy8gICAgICAgICAhY29sU3VidG90YWxEaXNwbGF5LmhpZGVPbkV4cGFuZCksXHJcbiAgLy8gICApLm1hcCh2ID0+IHZbMV0pO1xyXG4gIC8vICAgLy8gY29uc29sZS5sb2coJ3Zpc2libGVDb2xLZXlzJywgdmlzaWJsZUNvbEtleXMpO1xyXG4gIC8vXHJcbiAgLy8gICB0cnkge1xyXG4gIC8vICAgICAvLyDqsIEg7J2066+47KeAIFVSTOyXkCDrjIDtlbQgdG9EYXRhVVJMIO2VqOyImOulvCDtmLjstpztlanri4jri6QuXHJcbiAgLy8gICAgIHZpc2libGVDb2xLZXlzLmZvckVhY2godXJsID0+IHtcclxuICAvLyAgICAgICAvLyBjb25zb2xlLmxvZygndXJsJywgdXJsKTtcclxuICAvLyAgICAgICB0aGlzLnRvRGF0YVVSTChEVURBR0lfVVJMICsgdXJsLCBkYXRhVXJsID0+IHtcclxuICAvLyAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdkYXRhVXJsJywgZGF0YVVybClcclxuICAvLyAgICAgICAgIHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XHJcbiAgLy8gICAgICAgICAgIGJhc2U2NFVSTHM6IFsuLi5wcmV2U3RhdGUuYmFzZTY0VVJMcywgZGF0YVVybF0sXHJcbiAgLy8gICAgICAgICB9KSk7XHJcbiAgLy8gICAgICAgfSk7XHJcbiAgLy8gICAgIH0pO1xyXG4gIC8vICAgfSBjYXRjaCAoZSkge1xyXG4gIC8vICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjogJywgZSk7XHJcbiAgLy8gICB9XHJcbiAgLy8gICAvLyBjb25zb2xlLmxvZygxKTtcclxuICAvLyB9XHJcbiAgLy9cclxuICAvLyB0b0RhdGFVUkwoc3JjLCBjYWxsYmFjaywgb3V0cHV0Rm9ybWF0ID0gJ2ltYWdlL3BuZycpIHtcclxuICAvLyAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xyXG4gIC8vICAgaW1nLmNyb3NzT3JpZ2luID0gJ0Fub255bW91cyc7XHJcbiAgLy8gICBpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgLy8gICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gIC8vICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAvLyAgICAgbGV0IGRhdGFVUkw7XHJcbiAgLy8gICAgIGNhbnZhcy5oZWlnaHQgPSB0aGlzLm5hdHVyYWxIZWlnaHQ7XHJcbiAgLy8gICAgIGNhbnZhcy53aWR0aCA9IHRoaXMubmF0dXJhbFdpZHRoO1xyXG4gIC8vICAgICBjdHguZHJhd0ltYWdlKHRoaXMsIDAsIDApO1xyXG4gIC8vICAgICBkYXRhVVJMID0gY2FudmFzLnRvRGF0YVVSTChvdXRwdXRGb3JtYXQpO1xyXG4gIC8vICAgICBjYWxsYmFjayhkYXRhVVJMKTtcclxuICAvLyAgIH07XHJcbiAgLy8gICBpbWcuc3JjID0gc3JjO1xyXG4gIC8vICAgaWYgKGltZy5jb21wbGV0ZSB8fCBpbWcuY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gIC8vICAgICAvLyDroZzrk5zrpbwg6rCV7KCc66GcIOuLpOyLnCDsi5zrj4TtlZjquLAg7KCE7JeQIOydvOyLnOyggeycvOuhnCDri6Trpbggc3Jj66W8IO2VoOuLue2VqeuLiOuLpC5cclxuICAvLyAgICAgaW1nLnNyYyA9IFwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95d0FBQUFBQVFBQkFBQUNBVXdBT3c9PVwiO1xyXG4gIC8vICAgICBpbWcuc3JjID0gc3JjO1xyXG4gIC8vICAgfVxyXG4gIC8vIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgaWYgKHRoaXMuY2FjaGVkUHJvcHMgIT09IHRoaXMucHJvcHMpIHtcclxuICAgICAgdGhpcy5jYWNoZWRQcm9wcyA9IHRoaXMucHJvcHM7XHJcbiAgICAgIHRoaXMuY2FjaGVkQmFzZVBpdm90U2V0dGluZ3MgPSB0aGlzLmdldEJhc2VQaXZvdFNldHRpbmdzKCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIGNvbEF0dHJzLFxyXG4gICAgICAvLyByb3dBdHRycyxcclxuICAgICAgLy8gcm93S2V5cyxcclxuICAgICAgY29sS2V5cyxcclxuICAgICAgLy8gY29sVG90YWxzLFxyXG4gICAgICAvLyByb3dTdWJ0b3RhbERpc3BsYXksXHJcbiAgICAgIGNvbFN1YnRvdGFsRGlzcGxheSxcclxuICAgIH0gPSB0aGlzLmNhY2hlZEJhc2VQaXZvdFNldHRpbmdzO1xyXG5cclxuICAgIC8vIE5lZWQgdG8gYWNjb3VudCBmb3IgZXhjbHVzaW9ucyB0byBjb21wdXRlIHRoZSBlZmZlY3RpdmUgcm93XHJcbiAgICAvLyBhbmQgY29sdW1uIGtleXMuXHJcbiAgICAvLyBjb25zdCB2aXNpYmxlUm93S2V5cyA9IHRoaXMudmlzaWJsZUtleXMoXHJcbiAgICAvLyAgIHJvd0tleXMsXHJcbiAgICAvLyAgIHRoaXMuc3RhdGUuY29sbGFwc2VkUm93cyxcclxuICAgIC8vICAgcm93QXR0cnMubGVuZ3RoLFxyXG4gICAgLy8gICByb3dTdWJ0b3RhbERpc3BsYXksXHJcbiAgICAvLyApO1xyXG4gICAgY29uc3QgdmlzaWJsZUNvbEtleXMgPSB0aGlzLnZpc2libGVLZXlzKFxyXG4gICAgICBjb2xLZXlzLFxyXG4gICAgICB0aGlzLnN0YXRlLmNvbGxhcHNlZENvbHMsXHJcbiAgICAgIGNvbEF0dHJzLmxlbmd0aCxcclxuICAgICAgY29sU3VidG90YWxEaXNwbGF5LFxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBjb25zdCBwaXZvdFNldHRpbmdzID0ge1xyXG4gICAgLy8gICB2aXNpYmxlUm93S2V5cyxcclxuICAgIC8vICAgbWF4Um93VmlzaWJsZTogTWF0aC5tYXgoLi4udmlzaWJsZVJvd0tleXMubWFwKGsgPT4gay5sZW5ndGgpKSxcclxuICAgIC8vICAgdmlzaWJsZUNvbEtleXMsXHJcbiAgICAvLyAgIG1heENvbFZpc2libGU6IE1hdGgubWF4KC4uLnZpc2libGVDb2xLZXlzLm1hcChrID0+IGsubGVuZ3RoKSksXHJcbiAgICAvLyAgIHJvd0F0dHJTcGFuczogdGhpcy5jYWxjQXR0clNwYW5zKHZpc2libGVSb3dLZXlzLCByb3dBdHRycy5sZW5ndGgpLFxyXG4gICAgLy8gICBjb2xBdHRyU3BhbnM6IHRoaXMuY2FsY0F0dHJTcGFucyh2aXNpYmxlQ29sS2V5cywgY29sQXR0cnMubGVuZ3RoKSxcclxuICAgIC8vICAgLi4udGhpcy5jYWNoZWRCYXNlUGl2b3RTZXR0aW5ncyxcclxuICAgIC8vIH07XHJcblxyXG4gICAgLy8gY29uc3QgeyBiYXNlNjRVUkxzIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgLy8gY29uc29sZS5sb2coXCJiYXNlNjRVUkxzXCIsIGJhc2U2NFVSTHMpO1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIC8vIDxTdHlsZXMgaXNEYXNoYm9hcmRFZGl0TW9kZT17dGhpcy5pc0Rhc2hib2FyZEVkaXRNb2RlKCl9PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzY3JlZW5zaG90LWNoYXJ0LWNvbnRhaW5lcic+XHJcbiAgICAgICAgICB7Lyp7Ki99XHJcbiAgICAgICAgICB7LyogIGJhc2U2NFVSTHMubGVuZ3RoID4gMCA/ICgqL31cclxuICAgICAgICAgIHsvKiAgICBiYXNlNjRVUkxzLm1hcCgoYmFzZTY0VVJMLCBpbmRleCkgPT4gKCovfVxyXG4gICAgICAgICAgey8qICAgICAgPGltZyBrZXk9e2luZGV4fSBzcmM9e2Jhc2U2NFVSTH0gYWx0PXtgQ29udmVydGVkICR7aW5kZXh9YH0gLz4qL31cclxuICAgICAgICAgIHsvKiAgICApKSovfVxyXG4gICAgICAgICAgey8qICApIDogKCovfVxyXG4gICAgICAgICAgey8qICAgIHZpc2libGVDb2xLZXlzLm1hcCgodiwgaSkgPT4gKCovfVxyXG4gICAgICAgICAgey8qICAgICAgPGRpdiBrZXk9e2l9IGNsYXNzTmFtZT0nc2NyZWVuc2hvdC1pbWFnZS1ib3gnPiovfVxyXG4gICAgICAgICAgey8qICAgICAgICA8aW1nIHNyYz17RFVEQUdJX1VSTCArIHZbMV19IGFsdD17RFVEQUdJX1VSTCArIHZbMV19IGNsYXNzTmFtZT1cInNjcmVlbnNob3QtaW1hZ2VcIi8+Ki99XHJcbiAgICAgICAgICB7LyogICAgICA8L2Rpdj4qL31cclxuICAgICAgICAgIHsvKiAgICApKSovfVxyXG4gICAgICAgICAgey8qICApKi99XHJcbiAgICAgICAgICB7Lyp9Ki99XHJcblxyXG4gICAgICAgICAge3Zpc2libGVDb2xLZXlzLm1hcCgodiwgaSkgPT4gKFxyXG4gICAgICAgICAgICA8ZGl2IGtleT17aX0gY2xhc3NOYW1lPSdzY3JlZW5zaG90LWltYWdlLWJveCcgb25DbGljaz17ZSA9PiB7XHJcbiAgICAgICAgICAgICAgZG93bmxvYWRBc0ltYWdlKFxyXG4gICAgICAgICAgICAgICAgYGRpdi5zY3JlZW5zaG90LWltYWdlLWJveCBpbWcuc2NyZWVuc2hvdC1pbWFnZVtkYXRhLWltZ3NyYz1cIiR7XHJcbiAgICAgICAgICAgICAgICAgIERVREFHSV9VUkwgKyB2WzFdXHJcbiAgICAgICAgICAgICAgICB9XCJdYCxcclxuICAgICAgICAgICAgICAgIERVREFHSV9VUkwsXHJcbiAgICAgICAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgICAgICkoZSk7XHJcbiAgICAgICAgICAgIH19PlxyXG4gICAgICAgICAgICAgIDxpbWcgc3JjPXtEVURBR0lfVVJMICsgdlsxXX0gYWx0PXtEVURBR0lfVVJMICsgdlsxXX0gZGF0YS1pbWdzcmM9e0RVREFHSV9VUkwgKyB2WzFdfSBjbGFzc05hbWU9XCJzY3JlZW5zaG90LWltYWdlXCIvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICkpfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIC8vIHsvKjx0YWJsZSBjbGFzc05hbWU9XCJwdnRUYWJsZVwiIHJvbGU9XCJncmlkXCI+Ki99XHJcbiAgICAgICAgLy8gey8qICA8dGhlYWQ+Ki99XHJcbiAgICAgICAgLy8gey8qICB7Y29sQXR0cnMubWFwKChjLCBqKSA9PiovfVxyXG4gICAgICAgIC8vIHsvKiAgICB0aGlzLnJlbmRlckNvbEhlYWRlclJvdyhjLCBqLCBwaXZvdFNldHRpbmdzKSwqL31cclxuICAgICAgICAvLyB7LyogICl9Ki99XHJcbiAgICAgICAgLy8gey8qICB7cm93QXR0cnMubGVuZ3RoICE9PSAwICYmIHRoaXMucmVuZGVyUm93SGVhZGVyUm93KHBpdm90U2V0dGluZ3MpfSovfVxyXG4gICAgICAgIC8vIHsvKiAgPC90aGVhZD4qL31cclxuICAgICAgICAvLyB7LyogIDx0Ym9keT4qL31cclxuICAgICAgICAvLyB7LyogIHt2aXNpYmxlUm93S2V5cy5tYXAoKHIsIGkpID0+Ki99XHJcbiAgICAgICAgLy8gey8qICAgIHRoaXMucmVuZGVyVGFibGVSb3cociwgaSwgcGl2b3RTZXR0aW5ncyksKi99XHJcbiAgICAgICAgLy8gey8qICApfSovfVxyXG4gICAgICAgIC8vIHsvKiAge2NvbFRvdGFscyAmJiB0aGlzLnJlbmRlclRvdGFsc1JvdyhwaXZvdFNldHRpbmdzKX0qL31cclxuICAgICAgICAvLyB7LyogIDwvdGJvZHk+Ki99XHJcbiAgICAgICAgLy8gey8qPC90YWJsZT4qL31cclxuICAgICAgLy8gPC9TdHlsZXM+XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuVGFibGVSZW5kZXJlci5wcm9wVHlwZXMgPSB7XHJcbiAgLi4uUGl2b3REYXRhLnByb3BUeXBlcyxcclxuICB0YWJsZU9wdGlvbnM6IFByb3BUeXBlcy5vYmplY3QsXHJcbiAgb25Db250ZXh0TWVudTogUHJvcFR5cGVzLmZ1bmMsXHJcbn07XHJcblRhYmxlUmVuZGVyZXIuZGVmYXVsdFByb3BzID0geyAuLi5QaXZvdERhdGEuZGVmYXVsdFByb3BzLCB0YWJsZU9wdGlvbnM6IHt9IH07XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/react-pivot-screen-api/TableRenderers.jsx\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/react-pivot-screen-api/utilities.js":
/*!**********************************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/react-pivot-screen-api/utilities.js ***!
  \**********************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PivotData: () => (/* binding */ PivotData),\n/* harmony export */   aggregatorTemplates: () => (/* binding */ aggregatorTemplates),\n/* harmony export */   flatKey: () => (/* binding */ flatKey),\n/* harmony export */   sortAs: () => (/* binding */ sortAs)\n/* harmony export */ });\n/* unused harmony exports aggregators, derivers, locales, naturalSort, numberFormat, getSort */\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! prop-types */ \"./node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/translation/TranslatorSingleton.ts\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\n\n\n\n\nconst addSeparators = function (nStr, thousandsSep, decimalSep) {\n  const x = String(nStr).split('.');\n  let x1 = x[0];\n  const x2 = x.length > 1 ? decimalSep + x[1] : '';\n  const rgx = /(\\d+)(\\d{3})/;\n  while (rgx.test(x1)) {\n    x1 = x1.replace(rgx, `$1${thousandsSep}$2`);\n  }\n  return x1 + x2;\n};\n\nconst numberFormat = function (optsIn) {\n  const defaults = {\n    digitsAfterDecimal: 2,\n    scaler: 1,\n    thousandsSep: ',',\n    decimalSep: '.',\n    prefix: '',\n    suffix: ''\n  };\n  const opts = { ...defaults, ...optsIn };\n  return function (x) {\n    if (Number.isNaN(x) || !Number.isFinite(x)) {\n      return '';\n    }\n    const result = addSeparators(\n      (opts.scaler * x).toFixed(opts.digitsAfterDecimal),\n      opts.thousandsSep,\n      opts.decimalSep\n    );\n    return `${opts.prefix}${result}${opts.suffix}`;\n  };\n};\n\nconst rx = /(\\d+)|(\\D+)/g;\nconst rd = /\\d/;\nconst rz = /^0/;\nconst naturalSort = (as, bs) => {\n  // nulls first\n  if (bs !== null && as === null) {\n    return -1;\n  }\n  if (as !== null && bs === null) {\n    return 1;\n  }\n\n  // then raw NaNs\n  if (typeof as === 'number' && Number.isNaN(as)) {\n    return -1;\n  }\n  if (typeof bs === 'number' && Number.isNaN(bs)) {\n    return 1;\n  }\n\n  // numbers and numbery strings group together\n  const nas = Number(as);\n  const nbs = Number(bs);\n  if (nas < nbs) {\n    return -1;\n  }\n  if (nas > nbs) {\n    return 1;\n  }\n\n  // within that, true numbers before numbery strings\n  if (typeof as === 'number' && typeof bs !== 'number') {\n    return -1;\n  }\n  if (typeof bs === 'number' && typeof as !== 'number') {\n    return 1;\n  }\n  if (typeof as === 'number' && typeof bs === 'number') {\n    return 0;\n  }\n\n  // 'Infinity' is a textual number, so less than 'A'\n  if (Number.isNaN(nbs) && !Number.isNaN(nas)) {\n    return -1;\n  }\n  if (Number.isNaN(nas) && !Number.isNaN(nbs)) {\n    return 1;\n  }\n\n  // finally, \"smart\" string sorting per http://stackoverflow.com/a/4373421/112871\n  let a = String(as);\n  let b = String(bs);\n  if (a === b) {\n    return 0;\n  }\n  if (!rd.test(a) || !rd.test(b)) {\n    return a > b ? 1 : -1;\n  }\n\n  // special treatment for strings containing digits\n  a = a.match(rx);\n  b = b.match(rx);\n  while (a.length && b.length) {\n    const a1 = a.shift();\n    const b1 = b.shift();\n    if (a1 !== b1) {\n      if (rd.test(a1) && rd.test(b1)) {\n        return a1.replace(rz, '.0') - b1.replace(rz, '.0');\n      }\n      return a1 > b1 ? 1 : -1;\n    }\n  }\n  return a.length - b.length;\n};\n\nconst sortAs = function (order) {\n  const mapping = {};\n\n  // sort lowercased keys similarly\n  const lMapping = {};\n  order.forEach((element, i) => {\n    mapping[element] = i;\n    if (typeof element === 'string') {\n      lMapping[element.toLowerCase()] = i;\n    }\n  });\n  return function (a, b) {\n    if (a in mapping && b in mapping) {\n      return mapping[a] - mapping[b];\n    }\n    if (a in mapping) {\n      return -1;\n    }\n    if (b in mapping) {\n      return 1;\n    }\n    if (a in lMapping && b in lMapping) {\n      return lMapping[a] - lMapping[b];\n    }\n    if (a in lMapping) {\n      return -1;\n    }\n    if (b in lMapping) {\n      return 1;\n    }\n    return naturalSort(a, b);\n  };\n};\n\nconst getSort = function (sorters, attr) {\n  if (sorters) {\n    if (typeof sorters === 'function') {\n      const sort = sorters(attr);\n      if (typeof sort === 'function') {\n        return sort;\n      }\n    } else if (attr in sorters) {\n      return sorters[attr];\n    }\n  }\n  return naturalSort;\n};\n\n// aggregator templates default to US number formatting but this is overridable\nconst usFmt = numberFormat();\nconst usFmtInt = numberFormat({ digitsAfterDecimal: 0 });\nconst usFmtPct = numberFormat({\n  digitsAfterDecimal: 1,\n  scaler: 100,\n  suffix: '%'\n});\n\nconst fmtNonString = (formatter) => (x) => typeof x === 'string' ? x : formatter(x);\n\nconst baseAggregatorTemplates = {\n  count(formatter) {if (formatter === void 0) {formatter = usFmtInt;}\n    return () =>\n    function () {\n      return {\n        count: 0,\n        push() {\n          this.count += 1;\n        },\n        value() {\n          return this.count;\n        },\n        format: formatter\n      };\n    };\n  },\n\n  uniques(fn, formatter) {if (formatter === void 0) {formatter = usFmtInt;}\n    return function (_ref) {let [attr] = _ref;\n      return function () {\n        return {\n          uniq: [],\n          push(record) {\n            if (!Array.from(this.uniq).includes(record[attr])) {\n              this.uniq.push(record[attr]);\n            }\n          },\n          value() {\n            return fn(this.uniq);\n          },\n          format: fmtNonString(formatter),\n          numInputs: typeof attr !== 'undefined' ? 0 : 1\n        };\n      };\n    };\n  },\n\n  sum(formatter) {if (formatter === void 0) {formatter = usFmt;}\n    return function (_ref2) {let [attr] = _ref2;\n      return function () {\n        return {\n          sum: 0,\n          push(record) {\n            if (Number.isNaN(Number(record[attr]))) {\n              this.sum = record[attr];\n            } else {\n              this.sum += parseFloat(record[attr]);\n            }\n          },\n          value() {\n            return this.sum;\n          },\n          format: fmtNonString(formatter),\n          numInputs: typeof attr !== 'undefined' ? 0 : 1\n        };\n      };\n    };\n  },\n\n  extremes(mode, formatter) {if (formatter === void 0) {formatter = usFmt;}\n    return function (_ref3) {let [attr] = _ref3;\n      return function (data) {\n        return {\n          val: null,\n          sorter: getSort(\n            typeof data !== 'undefined' ? data.sorters : null,\n            attr\n          ),\n          push(record) {\n            const x = record[attr];\n            if (['min', 'max'].includes(mode)) {\n              const coercedValue = Number(x);\n              if (Number.isNaN(coercedValue)) {\n                this.val =\n                !this.val ||\n                mode === 'min' && x < this.val ||\n                mode === 'max' && x > this.val ?\n                x :\n                this.val;\n              } else {\n                this.val = Math[mode](\n                  coercedValue,\n                  this.val !== null ? this.val : coercedValue\n                );\n              }\n            } else if (\n            mode === 'first' &&\n            this.sorter(x, this.val !== null ? this.val : x) <= 0)\n            {\n              this.val = x;\n            } else if (\n            mode === 'last' &&\n            this.sorter(x, this.val !== null ? this.val : x) >= 0)\n            {\n              this.val = x;\n            }\n          },\n          value() {\n            return this.val;\n          },\n          format(x) {\n            if (typeof x === 'number') {\n              return formatter(x);\n            }\n            return x;\n          },\n          numInputs: typeof attr !== 'undefined' ? 0 : 1\n        };\n      };\n    };\n  },\n\n  quantile(q, formatter) {if (formatter === void 0) {formatter = usFmt;}\n    return function (_ref4) {let [attr] = _ref4;\n      return function () {\n        return {\n          vals: [],\n          strMap: {},\n          push(record) {\n            const val = record[attr];\n            const x = Number(val);\n\n            if (Number.isNaN(x)) {\n              this.strMap[val] = (this.strMap[val] || 0) + 1;\n            } else {\n              this.vals.push(x);\n            }\n          },\n          value() {\n            if (\n            this.vals.length === 0 &&\n            Object.keys(this.strMap).length === 0)\n            {\n              return null;\n            }\n\n            if (Object.keys(this.strMap).length) {\n              const values = Object.values(this.strMap).sort((a, b) => a - b);\n              const middle = Math.floor(values.length / 2);\n\n              const keys = Object.keys(this.strMap);\n              return keys.length % 2 !== 0 ?\n              keys[middle] :\n              (keys[middle - 1] + keys[middle]) / 2;\n            }\n\n            this.vals.sort((a, b) => a - b);\n            const i = (this.vals.length - 1) * q;\n            return (this.vals[Math.floor(i)] + this.vals[Math.ceil(i)]) / 2.0;\n          },\n          format: fmtNonString(formatter),\n          numInputs: typeof attr !== 'undefined' ? 0 : 1\n        };\n      };\n    };\n  },\n\n  runningStat(mode, ddof, formatter) {if (mode === void 0) {mode = 'mean';}if (ddof === void 0) {ddof = 1;}if (formatter === void 0) {formatter = usFmt;}\n    return function (_ref5) {let [attr] = _ref5;\n      return function () {\n        return {\n          n: 0.0,\n          m: 0.0,\n          s: 0.0,\n          strValue: null,\n          push(record) {\n            const x = Number(record[attr]);\n            if (Number.isNaN(x)) {\n              this.strValue =\n              typeof record[attr] === 'string' ? record[attr] : this.strValue;\n              return;\n            }\n            this.n += 1.0;\n            if (this.n === 1.0) {\n              this.m = x;\n            }\n            const mNew = this.m + (x - this.m) / this.n;\n            this.s += (x - this.m) * (x - mNew);\n            this.m = mNew;\n          },\n          value() {\n            if (this.strValue) {\n              return this.strValue;\n            }\n\n            if (mode === 'mean') {\n              if (this.n === 0) {\n                return 0 / 0;\n              }\n              return this.m;\n            }\n            if (this.n <= ddof) {\n              return 0;\n            }\n            switch (mode) {\n              case 'var':\n                return this.s / (this.n - ddof);\n              case 'stdev':\n                return Math.sqrt(this.s / (this.n - ddof));\n              default:\n                throw new Error('unknown mode for runningStat');\n            }\n          },\n          format: fmtNonString(formatter),\n          numInputs: typeof attr !== 'undefined' ? 0 : 1\n        };\n      };\n    };\n  },\n\n  sumOverSum(formatter) {if (formatter === void 0) {formatter = usFmt;}\n    return function (_ref6) {let [num, denom] = _ref6;\n      return function () {\n        return {\n          sumNum: 0,\n          sumDenom: 0,\n          push(record) {\n            if (!Number.isNaN(Number(record[num]))) {\n              this.sumNum += parseFloat(record[num]);\n            }\n            if (!Number.isNaN(Number(record[denom]))) {\n              this.sumDenom += parseFloat(record[denom]);\n            }\n          },\n          value() {\n            return this.sumNum / this.sumDenom;\n          },\n          format: formatter,\n          numInputs:\n          typeof num !== 'undefined' && typeof denom !== 'undefined' ? 0 : 2\n        };\n      };\n    };\n  },\n\n  fractionOf(wrapped, type, formatter) {if (type === void 0) {type = 'total';}if (formatter === void 0) {formatter = usFmtPct;}\n    return function () {for (var _len = arguments.length, x = new Array(_len), _key = 0; _key < _len; _key++) {x[_key] = arguments[_key];}return (\n        function (data, rowKey, colKey) {\n          return {\n            selector: { total: [[], []], row: [rowKey, []], col: [[], colKey] }[\n            type],\n\n            inner: wrapped(...Array.from(x || []))(data, rowKey, colKey),\n            push(record) {\n              this.inner.push(record);\n            },\n            format: fmtNonString(formatter),\n            value() {\n              const acc = data.\n              getAggregator(...Array.from(this.selector || [])).\n              inner.value();\n\n              if (typeof acc === 'string') {\n                return acc;\n              }\n\n              return this.inner.value() / acc;\n            },\n            numInputs: wrapped(...Array.from(x || []))().numInputs\n          };\n        });};\n  }\n};\n\nconst extendedAggregatorTemplates = {\n  countUnique(f) {\n    return baseAggregatorTemplates.uniques((x) => x.length, f);\n  },\n  listUnique(s, f) {\n    return baseAggregatorTemplates.uniques((x) => x.join(s), f || ((x) => x));\n  },\n  max(f) {\n    return baseAggregatorTemplates.extremes('max', f);\n  },\n  min(f) {\n    return baseAggregatorTemplates.extremes('min', f);\n  },\n  first(f) {\n    return baseAggregatorTemplates.extremes('first', f);\n  },\n  last(f) {\n    return baseAggregatorTemplates.extremes('last', f);\n  },\n  median(f) {\n    return baseAggregatorTemplates.quantile(0.5, f);\n  },\n  average(f) {\n    return baseAggregatorTemplates.runningStat('mean', 1, f);\n  },\n  var(ddof, f) {\n    return baseAggregatorTemplates.runningStat('var', ddof, f);\n  },\n  stdev(ddof, f) {\n    return baseAggregatorTemplates.runningStat('stdev', ddof, f);\n  }\n};\n\nconst aggregatorTemplates = {\n  ...baseAggregatorTemplates,\n  ...extendedAggregatorTemplates\n};\n\n// default aggregators & renderers use US naming and number formatting\nconst aggregators = ((tpl) => ({\n  Count: tpl.count(usFmtInt),\n  'Count Unique Values': tpl.countUnique(usFmtInt),\n  'List Unique Values': tpl.listUnique(', '),\n  Sum: tpl.sum(usFmt),\n  'Integer Sum': tpl.sum(usFmtInt),\n  Average: tpl.average(usFmt),\n  Median: tpl.median(usFmt),\n  'Sample Variance': tpl.var(1, usFmt),\n  'Sample Standard Deviation': tpl.stdev(1, usFmt),\n  Minimum: tpl.min(usFmt),\n  Maximum: tpl.max(usFmt),\n  First: tpl.first(usFmt),\n  Last: tpl.last(usFmt),\n  'Sum over Sum': tpl.sumOverSum(usFmt),\n  'Sum as Fraction of Total': tpl.fractionOf(tpl.sum(), 'total', usFmtPct),\n  'Sum as Fraction of Rows': tpl.fractionOf(tpl.sum(), 'row', usFmtPct),\n  'Sum as Fraction of Columns': tpl.fractionOf(tpl.sum(), 'col', usFmtPct),\n  'Count as Fraction of Total': tpl.fractionOf(tpl.count(), 'total', usFmtPct),\n  'Count as Fraction of Rows': tpl.fractionOf(tpl.count(), 'row', usFmtPct),\n  'Count as Fraction of Columns': tpl.fractionOf(tpl.count(), 'col', usFmtPct)\n}))(aggregatorTemplates);\n\nconst locales = {\n  en: {\n    aggregators,\n    localeStrings: {\n      renderError: 'An error occurred rendering the PivotTable results.',\n      computeError: 'An error occurred computing the PivotTable results.',\n      uiRenderError: 'An error occurred rendering the PivotTable UI.',\n      selectAll: 'Select All',\n      selectNone: 'Select None',\n      tooMany: '(too many to list)',\n      filterResults: 'Filter values',\n      apply: 'Apply',\n      cancel: 'Cancel',\n      totals: 'Totals',\n      vs: 'vs',\n      by: 'by'\n    }\n  }\n};\n\n// dateFormat deriver l10n requires month and day names to be passed in directly\nconst mthNamesEn = [\n'Jan',\n'Feb',\n'Mar',\n'Apr',\n'May',\n'Jun',\n'Jul',\n'Aug',\n'Sep',\n'Oct',\n'Nov',\n'Dec'];\n\nconst dayNamesEn = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\nconst zeroPad = (number) => `0${number}`.substr(-2, 2); // eslint-disable-line no-magic-numbers\n\nconst derivers = {\n  bin(col, binWidth) {\n    return (record) => record[col] - record[col] % binWidth;\n  },\n  dateFormat(\n  col,\n  formatString,\n  utcOutput,\n  mthNames,\n  dayNames)\n  {if (utcOutput === void 0) {utcOutput = false;}if (mthNames === void 0) {mthNames = mthNamesEn;}if (dayNames === void 0) {dayNames = dayNamesEn;}\n    const utc = utcOutput ? 'UTC' : '';\n    return function (record) {\n      const date = new Date(Date.parse(record[col]));\n      if (Number.isNaN(date)) {\n        return '';\n      }\n      return formatString.replace(/%(.)/g, function (m, p) {\n        switch (p) {\n          case 'y':\n            return date[`get${utc}FullYear`]();\n          case 'm':\n            return zeroPad(date[`get${utc}Month`]() + 1);\n          case 'n':\n            return mthNames[date[`get${utc}Month`]()];\n          case 'd':\n            return zeroPad(date[`get${utc}Date`]());\n          case 'w':\n            return dayNames[date[`get${utc}Day`]()];\n          case 'x':\n            return date[`get${utc}Day`]();\n          case 'H':\n            return zeroPad(date[`get${utc}Hours`]());\n          case 'M':\n            return zeroPad(date[`get${utc}Minutes`]());\n          case 'S':\n            return zeroPad(date[`get${utc}Seconds`]());\n          default:\n            return `%${p}`;\n        }\n      });\n    };\n  }\n};\n\n// Given an array of attribute values, convert to a key that\n// can be used in objects.\nconst flatKey = (attrVals) => attrVals.join(String.fromCharCode(0));\n\n/*\r\nData Model class\r\n*/\n\nclass PivotData {\n  constructor(inputProps, subtotals) {if (inputProps === void 0) {inputProps = {};}if (subtotals === void 0) {subtotals = {};}\n    this.props = { ...PivotData.defaultProps, ...inputProps };\n    this.processRecord = this.processRecord.bind(this);\n    prop_types__WEBPACK_IMPORTED_MODULE_0___default().checkPropTypes(\n      PivotData.propTypes,\n      this.props,\n      'prop',\n      'PivotData'\n    );\n\n    this.aggregator = this.props.\n    aggregatorsFactory(this.props.defaultFormatter)[\n    this.props.aggregatorName](this.props.vals);\n    this.formattedAggregators =\n    this.props.customFormatters &&\n    Object.entries(this.props.customFormatters).reduce(\n      (acc, _ref7) => {let [key, columnFormatter] = _ref7;\n        acc[key] = {};\n        Object.entries(columnFormatter).forEach((_ref8) => {let [column, formatter] = _ref8;\n          acc[key][column] = this.props.\n          aggregatorsFactory(formatter)[\n          this.props.aggregatorName](this.props.vals);\n        });\n        return acc;\n      },\n      {}\n    );\n    this.tree = {};\n    this.rowKeys = [];\n    this.colKeys = [];\n    this.rowTotals = {};\n    this.colTotals = {};\n    this.allTotal = this.aggregator(this, [], []);\n    this.subtotals = subtotals;\n    this.sorted = false;\n\n    // iterate through input, accumulating data for cells\n    PivotData.forEachRecord(this.props.data, this.processRecord);\n  }\n\n  getFormattedAggregator(record, totalsKeys) {\n    if (!this.formattedAggregators) {\n      return this.aggregator;\n    }\n    const [groupName, groupValue] =\n    Object.entries(record).find(\n      (_ref9) => {let [name, value] = _ref9;return (\n          this.formattedAggregators[name] &&\n          this.formattedAggregators[name][value]);}\n    ) || [];\n    if (\n    !groupName ||\n    !groupValue ||\n    totalsKeys && !totalsKeys.includes(groupValue))\n    {\n      return this.aggregator;\n    }\n    return this.formattedAggregators[groupName][groupValue] || this.aggregator;\n  }\n\n  arrSort(attrs, partialOnTop, reverse) {if (reverse === void 0) {reverse = false;}\n    const sortersArr = attrs.map((a) => getSort(this.props.sorters, a));\n    return function (a, b) {\n      const limit = Math.min(a.length, b.length);\n      for (let i = 0; i < limit; i += 1) {\n        const sorter = sortersArr[i];\n        const comparison = reverse ? sorter(b[i], a[i]) : sorter(a[i], b[i]);\n        if (comparison !== 0) {\n          return comparison;\n        }\n      }\n      return partialOnTop ? a.length - b.length : b.length - a.length;\n    };\n  }\n\n  sortKeys() {\n    if (!this.sorted) {\n      this.sorted = true;\n      const v = (r, c) => this.getAggregator(r, c).value();\n      switch (this.props.rowOrder) {\n        case 'key_z_to_a':\n          this.rowKeys.sort(\n            this.arrSort(this.props.rows, this.subtotals.rowPartialOnTop, true)\n          );\n          break;\n        case 'value_a_to_z':\n          this.rowKeys.sort((a, b) => naturalSort(v(a, []), v(b, [])));\n          break;\n        case 'value_z_to_a':\n          this.rowKeys.sort((a, b) => -naturalSort(v(a, []), v(b, [])));\n          break;\n        default:\n          this.rowKeys.sort(\n            this.arrSort(this.props.rows, this.subtotals.rowPartialOnTop)\n          );\n      }\n      switch (this.props.colOrder) {\n        case 'key_z_to_a':\n          this.colKeys.sort(\n            this.arrSort(this.props.cols, this.subtotals.colPartialOnTop, true)\n          );\n          break;\n        case 'value_a_to_z':\n          this.colKeys.sort((a, b) => naturalSort(v([], a), v([], b)));\n          break;\n        case 'value_z_to_a':\n          this.colKeys.sort((a, b) => -naturalSort(v([], a), v([], b)));\n          break;\n        default:\n          this.colKeys.sort(\n            this.arrSort(this.props.cols, this.subtotals.colPartialOnTop)\n          );\n      }\n    }\n  }\n\n  getColKeys() {\n    this.sortKeys();\n    return this.colKeys;\n  }\n\n  getRowKeys() {\n    this.sortKeys();\n    return this.rowKeys;\n  }\n\n  processRecord(record) {\n    // this code is called in a tight loop\n    const colKey = [];\n    const rowKey = [];\n    this.props.cols.forEach((col) => {\n      colKey.push(col in record ? record[col] : 'null');\n    });\n    this.props.rows.forEach((row) => {\n      rowKey.push(row in record ? record[row] : 'null');\n    });\n\n    this.allTotal.push(record);\n\n    const rowStart = this.subtotals.rowEnabled ? 1 : Math.max(1, rowKey.length);\n    const colStart = this.subtotals.colEnabled ? 1 : Math.max(1, colKey.length);\n\n    let isRowSubtotal;\n    let isColSubtotal;\n    for (let ri = rowStart; ri <= rowKey.length; ri += 1) {\n      isRowSubtotal = ri < rowKey.length;\n      const fRowKey = rowKey.slice(0, ri);\n      const flatRowKey = flatKey(fRowKey);\n      if (!this.rowTotals[flatRowKey]) {\n        this.rowKeys.push(fRowKey);\n        this.rowTotals[flatRowKey] = this.getFormattedAggregator(\n          record,\n          rowKey\n        )(this, fRowKey, []);\n      }\n      this.rowTotals[flatRowKey].push(record);\n      this.rowTotals[flatRowKey].isSubtotal = isRowSubtotal;\n    }\n\n    for (let ci = colStart; ci <= colKey.length; ci += 1) {\n      isColSubtotal = ci < colKey.length;\n      const fColKey = colKey.slice(0, ci);\n      const flatColKey = flatKey(fColKey);\n      if (!this.colTotals[flatColKey]) {\n        this.colKeys.push(fColKey);\n        this.colTotals[flatColKey] = this.getFormattedAggregator(\n          record,\n          colKey\n        )(this, [], fColKey);\n      }\n      this.colTotals[flatColKey].push(record);\n      this.colTotals[flatColKey].isSubtotal = isColSubtotal;\n    }\n\n    // And now fill in for all the sub-cells.\n    for (let ri = rowStart; ri <= rowKey.length; ri += 1) {\n      isRowSubtotal = ri < rowKey.length;\n      const fRowKey = rowKey.slice(0, ri);\n      const flatRowKey = flatKey(fRowKey);\n      if (!this.tree[flatRowKey]) {\n        this.tree[flatRowKey] = {};\n      }\n      for (let ci = colStart; ci <= colKey.length; ci += 1) {\n        isColSubtotal = ci < colKey.length;\n        const fColKey = colKey.slice(0, ci);\n        const flatColKey = flatKey(fColKey);\n        if (!this.tree[flatRowKey][flatColKey]) {\n          this.tree[flatRowKey][flatColKey] = this.getFormattedAggregator(\n            record\n          )(this, fRowKey, fColKey);\n        }\n        this.tree[flatRowKey][flatColKey].push(record);\n\n        this.tree[flatRowKey][flatColKey].isRowSubtotal = isRowSubtotal;\n        this.tree[flatRowKey][flatColKey].isColSubtotal = isColSubtotal;\n        this.tree[flatRowKey][flatColKey].isSubtotal =\n        isRowSubtotal || isColSubtotal;\n      }\n    }\n  }\n\n  getAggregator(rowKey, colKey) {\n    let agg;\n    const flatRowKey = flatKey(rowKey);\n    const flatColKey = flatKey(colKey);\n    if (rowKey.length === 0 && colKey.length === 0) {\n      agg = this.allTotal;\n    } else if (rowKey.length === 0) {\n      agg = this.colTotals[flatColKey];\n    } else if (colKey.length === 0) {\n      agg = this.rowTotals[flatRowKey];\n    } else {\n      agg = this.tree[flatRowKey][flatColKey];\n    }\n    return (\n      agg || {\n        value() {\n          return null;\n        },\n        format() {\n          return '';\n        }\n      });\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\n// can handle arrays or jQuery selections of tables\nPivotData.forEachRecord = function (input, processRecord) {\n  if (Array.isArray(input)) {\n    // array of objects\n    return input.map((record) => processRecord(record));\n  }\n  throw new Error((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)('Unknown input format'));\n};\n\nPivotData.defaultProps = {\n  aggregators,\n  cols: [],\n  rows: [],\n  vals: [],\n  aggregatorName: 'Count',\n  sorters: {},\n  rowOrder: 'key_a_to_z',\n  colOrder: 'key_a_to_z'\n};\n\nPivotData.propTypes = {\n  data: prop_types__WEBPACK_IMPORTED_MODULE_0___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_0___default().array), (prop_types__WEBPACK_IMPORTED_MODULE_0___default().object), (prop_types__WEBPACK_IMPORTED_MODULE_0___default().func)]).\n  isRequired,\n  aggregatorName: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().string),\n  cols: prop_types__WEBPACK_IMPORTED_MODULE_0___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().string)),\n  rows: prop_types__WEBPACK_IMPORTED_MODULE_0___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().string)),\n  vals: prop_types__WEBPACK_IMPORTED_MODULE_0___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().string)),\n  valueFilter: prop_types__WEBPACK_IMPORTED_MODULE_0___default().objectOf(prop_types__WEBPACK_IMPORTED_MODULE_0___default().objectOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().bool))),\n  sorters: prop_types__WEBPACK_IMPORTED_MODULE_0___default().oneOfType([\n  (prop_types__WEBPACK_IMPORTED_MODULE_0___default().func),\n  prop_types__WEBPACK_IMPORTED_MODULE_0___default().objectOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().func))]\n  ),\n  derivedAttributes: prop_types__WEBPACK_IMPORTED_MODULE_0___default().objectOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().func)),\n  rowOrder: prop_types__WEBPACK_IMPORTED_MODULE_0___default().oneOf([\n  'key_a_to_z',\n  'key_z_to_a',\n  'value_a_to_z',\n  'value_z_to_a']\n  ),\n  colOrder: prop_types__WEBPACK_IMPORTED_MODULE_0___default().oneOf([\n  'key_a_to_z',\n  'key_z_to_a',\n  'value_a_to_z',\n  'value_z_to_a']\n  )\n};\n\n;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(addSeparators, \"addSeparators\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(numberFormat, \"numberFormat\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(rx, \"rx\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(rd, \"rd\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(rz, \"rz\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(naturalSort, \"naturalSort\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(sortAs, \"sortAs\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(getSort, \"getSort\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(usFmt, \"usFmt\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(usFmtInt, \"usFmtInt\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(usFmtPct, \"usFmtPct\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(fmtNonString, \"fmtNonString\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(baseAggregatorTemplates, \"baseAggregatorTemplates\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(extendedAggregatorTemplates, \"extendedAggregatorTemplates\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(aggregatorTemplates, \"aggregatorTemplates\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(aggregators, \"aggregators\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(locales, \"locales\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(mthNamesEn, \"mthNamesEn\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(dayNamesEn, \"dayNamesEn\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(zeroPad, \"zeroPad\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(derivers, \"derivers\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(flatKey, \"flatKey\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");reactHotLoader.register(PivotData, \"PivotData\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivot-screen-api\\\\utilities.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3Qtc2NyZWVuLWFwaS91dGlsaXRpZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFZQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vcGx1Z2lucy9wbHVnaW4tY2hhcnQtcGl2b3QtdGFibGUvc3JjL3JlYWN0LXBpdm90LXNjcmVlbi1hcGkvdXRpbGl0aWVzLmpzPzY1ZGQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XHJcbmltcG9ydCB7IHQgfSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XHJcblxyXG5jb25zdCBhZGRTZXBhcmF0b3JzID0gZnVuY3Rpb24gKG5TdHIsIHRob3VzYW5kc1NlcCwgZGVjaW1hbFNlcCkge1xyXG4gIGNvbnN0IHggPSBTdHJpbmcoblN0cikuc3BsaXQoJy4nKTtcclxuICBsZXQgeDEgPSB4WzBdO1xyXG4gIGNvbnN0IHgyID0geC5sZW5ndGggPiAxID8gZGVjaW1hbFNlcCArIHhbMV0gOiAnJztcclxuICBjb25zdCByZ3ggPSAvKFxcZCspKFxcZHszfSkvO1xyXG4gIHdoaWxlIChyZ3gudGVzdCh4MSkpIHtcclxuICAgIHgxID0geDEucmVwbGFjZShyZ3gsIGAkMSR7dGhvdXNhbmRzU2VwfSQyYCk7XHJcbiAgfVxyXG4gIHJldHVybiB4MSArIHgyO1xyXG59O1xyXG5cclxuY29uc3QgbnVtYmVyRm9ybWF0ID0gZnVuY3Rpb24gKG9wdHNJbikge1xyXG4gIGNvbnN0IGRlZmF1bHRzID0ge1xyXG4gICAgZGlnaXRzQWZ0ZXJEZWNpbWFsOiAyLFxyXG4gICAgc2NhbGVyOiAxLFxyXG4gICAgdGhvdXNhbmRzU2VwOiAnLCcsXHJcbiAgICBkZWNpbWFsU2VwOiAnLicsXHJcbiAgICBwcmVmaXg6ICcnLFxyXG4gICAgc3VmZml4OiAnJyxcclxuICB9O1xyXG4gIGNvbnN0IG9wdHMgPSB7IC4uLmRlZmF1bHRzLCAuLi5vcHRzSW4gfTtcclxuICByZXR1cm4gZnVuY3Rpb24gKHgpIHtcclxuICAgIGlmIChOdW1iZXIuaXNOYU4oeCkgfHwgIU51bWJlci5pc0Zpbml0ZSh4KSkge1xyXG4gICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXN1bHQgPSBhZGRTZXBhcmF0b3JzKFxyXG4gICAgICAob3B0cy5zY2FsZXIgKiB4KS50b0ZpeGVkKG9wdHMuZGlnaXRzQWZ0ZXJEZWNpbWFsKSxcclxuICAgICAgb3B0cy50aG91c2FuZHNTZXAsXHJcbiAgICAgIG9wdHMuZGVjaW1hbFNlcCxcclxuICAgICk7XHJcbiAgICByZXR1cm4gYCR7b3B0cy5wcmVmaXh9JHtyZXN1bHR9JHtvcHRzLnN1ZmZpeH1gO1xyXG4gIH07XHJcbn07XHJcblxyXG5jb25zdCByeCA9IC8oXFxkKyl8KFxcRCspL2c7XHJcbmNvbnN0IHJkID0gL1xcZC87XHJcbmNvbnN0IHJ6ID0gL14wLztcclxuY29uc3QgbmF0dXJhbFNvcnQgPSAoYXMsIGJzKSA9PiB7XHJcbiAgLy8gbnVsbHMgZmlyc3RcclxuICBpZiAoYnMgIT09IG51bGwgJiYgYXMgPT09IG51bGwpIHtcclxuICAgIHJldHVybiAtMTtcclxuICB9XHJcbiAgaWYgKGFzICE9PSBudWxsICYmIGJzID09PSBudWxsKSB7XHJcbiAgICByZXR1cm4gMTtcclxuICB9XHJcblxyXG4gIC8vIHRoZW4gcmF3IE5hTnNcclxuICBpZiAodHlwZW9mIGFzID09PSAnbnVtYmVyJyAmJiBOdW1iZXIuaXNOYU4oYXMpKSB7XHJcbiAgICByZXR1cm4gLTE7XHJcbiAgfVxyXG4gIGlmICh0eXBlb2YgYnMgPT09ICdudW1iZXInICYmIE51bWJlci5pc05hTihicykpIHtcclxuICAgIHJldHVybiAxO1xyXG4gIH1cclxuXHJcbiAgLy8gbnVtYmVycyBhbmQgbnVtYmVyeSBzdHJpbmdzIGdyb3VwIHRvZ2V0aGVyXHJcbiAgY29uc3QgbmFzID0gTnVtYmVyKGFzKTtcclxuICBjb25zdCBuYnMgPSBOdW1iZXIoYnMpO1xyXG4gIGlmIChuYXMgPCBuYnMpIHtcclxuICAgIHJldHVybiAtMTtcclxuICB9XHJcbiAgaWYgKG5hcyA+IG5icykge1xyXG4gICAgcmV0dXJuIDE7XHJcbiAgfVxyXG5cclxuICAvLyB3aXRoaW4gdGhhdCwgdHJ1ZSBudW1iZXJzIGJlZm9yZSBudW1iZXJ5IHN0cmluZ3NcclxuICBpZiAodHlwZW9mIGFzID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgYnMgIT09ICdudW1iZXInKSB7XHJcbiAgICByZXR1cm4gLTE7XHJcbiAgfVxyXG4gIGlmICh0eXBlb2YgYnMgPT09ICdudW1iZXInICYmIHR5cGVvZiBhcyAhPT0gJ251bWJlcicpIHtcclxuICAgIHJldHVybiAxO1xyXG4gIH1cclxuICBpZiAodHlwZW9mIGFzID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgYnMgPT09ICdudW1iZXInKSB7XHJcbiAgICByZXR1cm4gMDtcclxuICB9XHJcblxyXG4gIC8vICdJbmZpbml0eScgaXMgYSB0ZXh0dWFsIG51bWJlciwgc28gbGVzcyB0aGFuICdBJ1xyXG4gIGlmIChOdW1iZXIuaXNOYU4obmJzKSAmJiAhTnVtYmVyLmlzTmFOKG5hcykpIHtcclxuICAgIHJldHVybiAtMTtcclxuICB9XHJcbiAgaWYgKE51bWJlci5pc05hTihuYXMpICYmICFOdW1iZXIuaXNOYU4obmJzKSkge1xyXG4gICAgcmV0dXJuIDE7XHJcbiAgfVxyXG5cclxuICAvLyBmaW5hbGx5LCBcInNtYXJ0XCIgc3RyaW5nIHNvcnRpbmcgcGVyIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQzNzM0MjEvMTEyODcxXHJcbiAgbGV0IGEgPSBTdHJpbmcoYXMpO1xyXG4gIGxldCBiID0gU3RyaW5nKGJzKTtcclxuICBpZiAoYSA9PT0gYikge1xyXG4gICAgcmV0dXJuIDA7XHJcbiAgfVxyXG4gIGlmICghcmQudGVzdChhKSB8fCAhcmQudGVzdChiKSkge1xyXG4gICAgcmV0dXJuIGEgPiBiID8gMSA6IC0xO1xyXG4gIH1cclxuXHJcbiAgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIHN0cmluZ3MgY29udGFpbmluZyBkaWdpdHNcclxuICBhID0gYS5tYXRjaChyeCk7XHJcbiAgYiA9IGIubWF0Y2gocngpO1xyXG4gIHdoaWxlIChhLmxlbmd0aCAmJiBiLmxlbmd0aCkge1xyXG4gICAgY29uc3QgYTEgPSBhLnNoaWZ0KCk7XHJcbiAgICBjb25zdCBiMSA9IGIuc2hpZnQoKTtcclxuICAgIGlmIChhMSAhPT0gYjEpIHtcclxuICAgICAgaWYgKHJkLnRlc3QoYTEpICYmIHJkLnRlc3QoYjEpKSB7XHJcbiAgICAgICAgcmV0dXJuIGExLnJlcGxhY2UocnosICcuMCcpIC0gYjEucmVwbGFjZShyeiwgJy4wJyk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGExID4gYjEgPyAxIDogLTE7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBhLmxlbmd0aCAtIGIubGVuZ3RoO1xyXG59O1xyXG5cclxuY29uc3Qgc29ydEFzID0gZnVuY3Rpb24gKG9yZGVyKSB7XHJcbiAgY29uc3QgbWFwcGluZyA9IHt9O1xyXG5cclxuICAvLyBzb3J0IGxvd2VyY2FzZWQga2V5cyBzaW1pbGFybHlcclxuICBjb25zdCBsTWFwcGluZyA9IHt9O1xyXG4gIG9yZGVyLmZvckVhY2goKGVsZW1lbnQsIGkpID0+IHtcclxuICAgIG1hcHBpbmdbZWxlbWVudF0gPSBpO1xyXG4gICAgaWYgKHR5cGVvZiBlbGVtZW50ID09PSAnc3RyaW5nJykge1xyXG4gICAgICBsTWFwcGluZ1tlbGVtZW50LnRvTG93ZXJDYXNlKCldID0gaTtcclxuICAgIH1cclxuICB9KTtcclxuICByZXR1cm4gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgIGlmIChhIGluIG1hcHBpbmcgJiYgYiBpbiBtYXBwaW5nKSB7XHJcbiAgICAgIHJldHVybiBtYXBwaW5nW2FdIC0gbWFwcGluZ1tiXTtcclxuICAgIH1cclxuICAgIGlmIChhIGluIG1hcHBpbmcpIHtcclxuICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfVxyXG4gICAgaWYgKGIgaW4gbWFwcGluZykge1xyXG4gICAgICByZXR1cm4gMTtcclxuICAgIH1cclxuICAgIGlmIChhIGluIGxNYXBwaW5nICYmIGIgaW4gbE1hcHBpbmcpIHtcclxuICAgICAgcmV0dXJuIGxNYXBwaW5nW2FdIC0gbE1hcHBpbmdbYl07XHJcbiAgICB9XHJcbiAgICBpZiAoYSBpbiBsTWFwcGluZykge1xyXG4gICAgICByZXR1cm4gLTE7XHJcbiAgICB9XHJcbiAgICBpZiAoYiBpbiBsTWFwcGluZykge1xyXG4gICAgICByZXR1cm4gMTtcclxuICAgIH1cclxuICAgIHJldHVybiBuYXR1cmFsU29ydChhLCBiKTtcclxuICB9O1xyXG59O1xyXG5cclxuY29uc3QgZ2V0U29ydCA9IGZ1bmN0aW9uIChzb3J0ZXJzLCBhdHRyKSB7XHJcbiAgaWYgKHNvcnRlcnMpIHtcclxuICAgIGlmICh0eXBlb2Ygc29ydGVycyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICBjb25zdCBzb3J0ID0gc29ydGVycyhhdHRyKTtcclxuICAgICAgaWYgKHR5cGVvZiBzb3J0ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgcmV0dXJuIHNvcnQ7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoYXR0ciBpbiBzb3J0ZXJzKSB7XHJcbiAgICAgIHJldHVybiBzb3J0ZXJzW2F0dHJdO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gbmF0dXJhbFNvcnQ7XHJcbn07XHJcblxyXG4vLyBhZ2dyZWdhdG9yIHRlbXBsYXRlcyBkZWZhdWx0IHRvIFVTIG51bWJlciBmb3JtYXR0aW5nIGJ1dCB0aGlzIGlzIG92ZXJyaWRhYmxlXHJcbmNvbnN0IHVzRm10ID0gbnVtYmVyRm9ybWF0KCk7XHJcbmNvbnN0IHVzRm10SW50ID0gbnVtYmVyRm9ybWF0KHsgZGlnaXRzQWZ0ZXJEZWNpbWFsOiAwIH0pO1xyXG5jb25zdCB1c0ZtdFBjdCA9IG51bWJlckZvcm1hdCh7XHJcbiAgZGlnaXRzQWZ0ZXJEZWNpbWFsOiAxLFxyXG4gIHNjYWxlcjogMTAwLFxyXG4gIHN1ZmZpeDogJyUnLFxyXG59KTtcclxuXHJcbmNvbnN0IGZtdE5vblN0cmluZyA9IGZvcm1hdHRlciA9PiB4ID0+IHR5cGVvZiB4ID09PSAnc3RyaW5nJyA/IHggOiBmb3JtYXR0ZXIoeCk7XHJcblxyXG5jb25zdCBiYXNlQWdncmVnYXRvclRlbXBsYXRlcyA9IHtcclxuICBjb3VudChmb3JtYXR0ZXIgPSB1c0ZtdEludCkge1xyXG4gICAgcmV0dXJuICgpID0+XHJcbiAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgY291bnQ6IDAsXHJcbiAgICAgICAgICBwdXNoKCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvdW50ICs9IDE7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdmFsdWUoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvdW50O1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGZvcm1hdDogZm9ybWF0dGVyLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH07XHJcbiAgfSxcclxuXHJcbiAgdW5pcXVlcyhmbiwgZm9ybWF0dGVyID0gdXNGbXRJbnQpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoW2F0dHJdKSB7XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHVuaXE6IFtdLFxyXG4gICAgICAgICAgcHVzaChyZWNvcmQpIHtcclxuICAgICAgICAgICAgaWYgKCFBcnJheS5mcm9tKHRoaXMudW5pcSkuaW5jbHVkZXMocmVjb3JkW2F0dHJdKSkge1xyXG4gICAgICAgICAgICAgIHRoaXMudW5pcS5wdXNoKHJlY29yZFthdHRyXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB2YWx1ZSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZuKHRoaXMudW5pcSk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZm9ybWF0OiBmbXROb25TdHJpbmcoZm9ybWF0dGVyKSxcclxuICAgICAgICAgIG51bUlucHV0czogdHlwZW9mIGF0dHIgIT09ICd1bmRlZmluZWQnID8gMCA6IDEsXHJcbiAgICAgICAgfTtcclxuICAgICAgfTtcclxuICAgIH07XHJcbiAgfSxcclxuXHJcbiAgc3VtKGZvcm1hdHRlciA9IHVzRm10KSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKFthdHRyXSkge1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzdW06IDAsXHJcbiAgICAgICAgICBwdXNoKHJlY29yZCkge1xyXG4gICAgICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKE51bWJlcihyZWNvcmRbYXR0cl0pKSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuc3VtID0gcmVjb3JkW2F0dHJdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRoaXMuc3VtICs9IHBhcnNlRmxvYXQocmVjb3JkW2F0dHJdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHZhbHVlKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdW07XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZm9ybWF0OiBmbXROb25TdHJpbmcoZm9ybWF0dGVyKSxcclxuICAgICAgICAgIG51bUlucHV0czogdHlwZW9mIGF0dHIgIT09ICd1bmRlZmluZWQnID8gMCA6IDEsXHJcbiAgICAgICAgfTtcclxuICAgICAgfTtcclxuICAgIH07XHJcbiAgfSxcclxuXHJcbiAgZXh0cmVtZXMobW9kZSwgZm9ybWF0dGVyID0gdXNGbXQpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoW2F0dHJdKSB7XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICB2YWw6IG51bGwsXHJcbiAgICAgICAgICBzb3J0ZXI6IGdldFNvcnQoXHJcbiAgICAgICAgICAgIHR5cGVvZiBkYXRhICE9PSAndW5kZWZpbmVkJyA/IGRhdGEuc29ydGVycyA6IG51bGwsXHJcbiAgICAgICAgICAgIGF0dHIsXHJcbiAgICAgICAgICApLFxyXG4gICAgICAgICAgcHVzaChyZWNvcmQpIHtcclxuICAgICAgICAgICAgY29uc3QgeCA9IHJlY29yZFthdHRyXTtcclxuICAgICAgICAgICAgaWYgKFsnbWluJywgJ21heCddLmluY2x1ZGVzKG1vZGUpKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgY29lcmNlZFZhbHVlID0gTnVtYmVyKHgpO1xyXG4gICAgICAgICAgICAgIGlmIChOdW1iZXIuaXNOYU4oY29lcmNlZFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWwgPVxyXG4gICAgICAgICAgICAgICAgICAhdGhpcy52YWwgfHxcclxuICAgICAgICAgICAgICAgICAgKG1vZGUgPT09ICdtaW4nICYmIHggPCB0aGlzLnZhbCkgfHxcclxuICAgICAgICAgICAgICAgICAgKG1vZGUgPT09ICdtYXgnICYmIHggPiB0aGlzLnZhbClcclxuICAgICAgICAgICAgICAgICAgICA/IHhcclxuICAgICAgICAgICAgICAgICAgICA6IHRoaXMudmFsO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbCA9IE1hdGhbbW9kZV0oXHJcbiAgICAgICAgICAgICAgICAgIGNvZXJjZWRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgdGhpcy52YWwgIT09IG51bGwgPyB0aGlzLnZhbCA6IGNvZXJjZWRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAgIG1vZGUgPT09ICdmaXJzdCcgJiZcclxuICAgICAgICAgICAgICB0aGlzLnNvcnRlcih4LCB0aGlzLnZhbCAhPT0gbnVsbCA/IHRoaXMudmFsIDogeCkgPD0gMFxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICB0aGlzLnZhbCA9IHg7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgICAgbW9kZSA9PT0gJ2xhc3QnICYmXHJcbiAgICAgICAgICAgICAgdGhpcy5zb3J0ZXIoeCwgdGhpcy52YWwgIT09IG51bGwgPyB0aGlzLnZhbCA6IHgpID49IDBcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy52YWwgPSB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdmFsdWUoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbDtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBmb3JtYXQoeCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdHRlcih4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBudW1JbnB1dHM6IHR5cGVvZiBhdHRyICE9PSAndW5kZWZpbmVkJyA/IDAgOiAxLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH07XHJcbiAgICB9O1xyXG4gIH0sXHJcblxyXG4gIHF1YW50aWxlKHEsIGZvcm1hdHRlciA9IHVzRm10KSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKFthdHRyXSkge1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICB2YWxzOiBbXSxcclxuICAgICAgICAgIHN0ck1hcDoge30sXHJcbiAgICAgICAgICBwdXNoKHJlY29yZCkge1xyXG4gICAgICAgICAgICBjb25zdCB2YWwgPSByZWNvcmRbYXR0cl07XHJcbiAgICAgICAgICAgIGNvbnN0IHggPSBOdW1iZXIodmFsKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChOdW1iZXIuaXNOYU4oeCkpIHtcclxuICAgICAgICAgICAgICB0aGlzLnN0ck1hcFt2YWxdID0gKHRoaXMuc3RyTWFwW3ZhbF0gfHwgMCkgKyAxO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRoaXMudmFscy5wdXNoKHgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdmFsdWUoKSB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICB0aGlzLnZhbHMubGVuZ3RoID09PSAwICYmXHJcbiAgICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5zdHJNYXApLmxlbmd0aCA9PT0gMFxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuc3RyTWFwKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBPYmplY3QudmFsdWVzKHRoaXMuc3RyTWFwKS5zb3J0KChhLCBiKSA9PiBhIC0gYik7XHJcbiAgICAgICAgICAgICAgY29uc3QgbWlkZGxlID0gTWF0aC5mbG9vcih2YWx1ZXMubGVuZ3RoIC8gMik7XHJcblxyXG4gICAgICAgICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLnN0ck1hcCk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGtleXMubGVuZ3RoICUgMiAhPT0gMFxyXG4gICAgICAgICAgICAgICAgPyBrZXlzW21pZGRsZV1cclxuICAgICAgICAgICAgICAgIDogKGtleXNbbWlkZGxlIC0gMV0gKyBrZXlzW21pZGRsZV0pIC8gMjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy52YWxzLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcclxuICAgICAgICAgICAgY29uc3QgaSA9ICh0aGlzLnZhbHMubGVuZ3RoIC0gMSkgKiBxO1xyXG4gICAgICAgICAgICByZXR1cm4gKHRoaXMudmFsc1tNYXRoLmZsb29yKGkpXSArIHRoaXMudmFsc1tNYXRoLmNlaWwoaSldKSAvIDIuMDtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBmb3JtYXQ6IGZtdE5vblN0cmluZyhmb3JtYXR0ZXIpLFxyXG4gICAgICAgICAgbnVtSW5wdXRzOiB0eXBlb2YgYXR0ciAhPT0gJ3VuZGVmaW5lZCcgPyAwIDogMSxcclxuICAgICAgICB9O1xyXG4gICAgICB9O1xyXG4gICAgfTtcclxuICB9LFxyXG5cclxuICBydW5uaW5nU3RhdChtb2RlID0gJ21lYW4nLCBkZG9mID0gMSwgZm9ybWF0dGVyID0gdXNGbXQpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoW2F0dHJdKSB7XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIG46IDAuMCxcclxuICAgICAgICAgIG06IDAuMCxcclxuICAgICAgICAgIHM6IDAuMCxcclxuICAgICAgICAgIHN0clZhbHVlOiBudWxsLFxyXG4gICAgICAgICAgcHVzaChyZWNvcmQpIHtcclxuICAgICAgICAgICAgY29uc3QgeCA9IE51bWJlcihyZWNvcmRbYXR0cl0pO1xyXG4gICAgICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKHgpKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5zdHJWYWx1ZSA9XHJcbiAgICAgICAgICAgICAgICB0eXBlb2YgcmVjb3JkW2F0dHJdID09PSAnc3RyaW5nJyA/IHJlY29yZFthdHRyXSA6IHRoaXMuc3RyVmFsdWU7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubiArPSAxLjA7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm4gPT09IDEuMCkge1xyXG4gICAgICAgICAgICAgIHRoaXMubSA9IHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgbU5ldyA9IHRoaXMubSArICh4IC0gdGhpcy5tKSAvIHRoaXMubjtcclxuICAgICAgICAgICAgdGhpcy5zICs9ICh4IC0gdGhpcy5tKSAqICh4IC0gbU5ldyk7XHJcbiAgICAgICAgICAgIHRoaXMubSA9IG1OZXc7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdmFsdWUoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0clZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RyVmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChtb2RlID09PSAnbWVhbicpIHtcclxuICAgICAgICAgICAgICBpZiAodGhpcy5uID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMCAvIDA7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLm07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMubiA8PSBkZG9mKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7XHJcbiAgICAgICAgICAgICAgY2FzZSAndmFyJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnMgLyAodGhpcy5uIC0gZGRvZik7XHJcbiAgICAgICAgICAgICAgY2FzZSAnc3RkZXYnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLnMgLyAodGhpcy5uIC0gZGRvZikpO1xyXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24gbW9kZSBmb3IgcnVubmluZ1N0YXQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGZvcm1hdDogZm10Tm9uU3RyaW5nKGZvcm1hdHRlciksXHJcbiAgICAgICAgICBudW1JbnB1dHM6IHR5cGVvZiBhdHRyICE9PSAndW5kZWZpbmVkJyA/IDAgOiAxLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH07XHJcbiAgICB9O1xyXG4gIH0sXHJcblxyXG4gIHN1bU92ZXJTdW0oZm9ybWF0dGVyID0gdXNGbXQpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoW251bSwgZGVub21dKSB7XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHN1bU51bTogMCxcclxuICAgICAgICAgIHN1bURlbm9tOiAwLFxyXG4gICAgICAgICAgcHVzaChyZWNvcmQpIHtcclxuICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4oTnVtYmVyKHJlY29yZFtudW1dKSkpIHtcclxuICAgICAgICAgICAgICB0aGlzLnN1bU51bSArPSBwYXJzZUZsb2F0KHJlY29yZFtudW1dKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIU51bWJlci5pc05hTihOdW1iZXIocmVjb3JkW2Rlbm9tXSkpKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5zdW1EZW5vbSArPSBwYXJzZUZsb2F0KHJlY29yZFtkZW5vbV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdmFsdWUoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN1bU51bSAvIHRoaXMuc3VtRGVub207XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZm9ybWF0OiBmb3JtYXR0ZXIsXHJcbiAgICAgICAgICBudW1JbnB1dHM6XHJcbiAgICAgICAgICAgIHR5cGVvZiBudW0gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkZW5vbSAhPT0gJ3VuZGVmaW5lZCcgPyAwIDogMixcclxuICAgICAgICB9O1xyXG4gICAgICB9O1xyXG4gICAgfTtcclxuICB9LFxyXG5cclxuICBmcmFjdGlvbk9mKHdyYXBwZWQsIHR5cGUgPSAndG90YWwnLCBmb3JtYXR0ZXIgPSB1c0ZtdFBjdCkge1xyXG4gICAgcmV0dXJuICguLi54KSA9PlxyXG4gICAgICBmdW5jdGlvbiAoZGF0YSwgcm93S2V5LCBjb2xLZXkpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc2VsZWN0b3I6IHsgdG90YWw6IFtbXSwgW11dLCByb3c6IFtyb3dLZXksIFtdXSwgY29sOiBbW10sIGNvbEtleV0gfVtcclxuICAgICAgICAgICAgdHlwZVxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgIGlubmVyOiB3cmFwcGVkKC4uLkFycmF5LmZyb20oeCB8fCBbXSkpKGRhdGEsIHJvd0tleSwgY29sS2V5KSxcclxuICAgICAgICAgIHB1c2gocmVjb3JkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5uZXIucHVzaChyZWNvcmQpO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGZvcm1hdDogZm10Tm9uU3RyaW5nKGZvcm1hdHRlciksXHJcbiAgICAgICAgICB2YWx1ZSgpIHtcclxuICAgICAgICAgICAgY29uc3QgYWNjID0gZGF0YVxyXG4gICAgICAgICAgICAgIC5nZXRBZ2dyZWdhdG9yKC4uLkFycmF5LmZyb20odGhpcy5zZWxlY3RvciB8fCBbXSkpXHJcbiAgICAgICAgICAgICAgLmlubmVyLnZhbHVlKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGFjYyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbm5lci52YWx1ZSgpIC8gYWNjO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIG51bUlucHV0czogd3JhcHBlZCguLi5BcnJheS5mcm9tKHggfHwgW10pKSgpLm51bUlucHV0cyxcclxuICAgICAgICB9O1xyXG4gICAgICB9O1xyXG4gIH0sXHJcbn07XHJcblxyXG5jb25zdCBleHRlbmRlZEFnZ3JlZ2F0b3JUZW1wbGF0ZXMgPSB7XHJcbiAgY291bnRVbmlxdWUoZikge1xyXG4gICAgcmV0dXJuIGJhc2VBZ2dyZWdhdG9yVGVtcGxhdGVzLnVuaXF1ZXMoeCA9PiB4Lmxlbmd0aCwgZik7XHJcbiAgfSxcclxuICBsaXN0VW5pcXVlKHMsIGYpIHtcclxuICAgIHJldHVybiBiYXNlQWdncmVnYXRvclRlbXBsYXRlcy51bmlxdWVzKHggPT4geC5qb2luKHMpLCBmIHx8ICh4ID0+IHgpKTtcclxuICB9LFxyXG4gIG1heChmKSB7XHJcbiAgICByZXR1cm4gYmFzZUFnZ3JlZ2F0b3JUZW1wbGF0ZXMuZXh0cmVtZXMoJ21heCcsIGYpO1xyXG4gIH0sXHJcbiAgbWluKGYpIHtcclxuICAgIHJldHVybiBiYXNlQWdncmVnYXRvclRlbXBsYXRlcy5leHRyZW1lcygnbWluJywgZik7XHJcbiAgfSxcclxuICBmaXJzdChmKSB7XHJcbiAgICByZXR1cm4gYmFzZUFnZ3JlZ2F0b3JUZW1wbGF0ZXMuZXh0cmVtZXMoJ2ZpcnN0JywgZik7XHJcbiAgfSxcclxuICBsYXN0KGYpIHtcclxuICAgIHJldHVybiBiYXNlQWdncmVnYXRvclRlbXBsYXRlcy5leHRyZW1lcygnbGFzdCcsIGYpO1xyXG4gIH0sXHJcbiAgbWVkaWFuKGYpIHtcclxuICAgIHJldHVybiBiYXNlQWdncmVnYXRvclRlbXBsYXRlcy5xdWFudGlsZSgwLjUsIGYpO1xyXG4gIH0sXHJcbiAgYXZlcmFnZShmKSB7XHJcbiAgICByZXR1cm4gYmFzZUFnZ3JlZ2F0b3JUZW1wbGF0ZXMucnVubmluZ1N0YXQoJ21lYW4nLCAxLCBmKTtcclxuICB9LFxyXG4gIHZhcihkZG9mLCBmKSB7XHJcbiAgICByZXR1cm4gYmFzZUFnZ3JlZ2F0b3JUZW1wbGF0ZXMucnVubmluZ1N0YXQoJ3ZhcicsIGRkb2YsIGYpO1xyXG4gIH0sXHJcbiAgc3RkZXYoZGRvZiwgZikge1xyXG4gICAgcmV0dXJuIGJhc2VBZ2dyZWdhdG9yVGVtcGxhdGVzLnJ1bm5pbmdTdGF0KCdzdGRldicsIGRkb2YsIGYpO1xyXG4gIH0sXHJcbn07XHJcblxyXG5jb25zdCBhZ2dyZWdhdG9yVGVtcGxhdGVzID0ge1xyXG4gIC4uLmJhc2VBZ2dyZWdhdG9yVGVtcGxhdGVzLFxyXG4gIC4uLmV4dGVuZGVkQWdncmVnYXRvclRlbXBsYXRlcyxcclxufTtcclxuXHJcbi8vIGRlZmF1bHQgYWdncmVnYXRvcnMgJiByZW5kZXJlcnMgdXNlIFVTIG5hbWluZyBhbmQgbnVtYmVyIGZvcm1hdHRpbmdcclxuY29uc3QgYWdncmVnYXRvcnMgPSAodHBsID0+ICh7XHJcbiAgQ291bnQ6IHRwbC5jb3VudCh1c0ZtdEludCksXHJcbiAgJ0NvdW50IFVuaXF1ZSBWYWx1ZXMnOiB0cGwuY291bnRVbmlxdWUodXNGbXRJbnQpLFxyXG4gICdMaXN0IFVuaXF1ZSBWYWx1ZXMnOiB0cGwubGlzdFVuaXF1ZSgnLCAnKSxcclxuICBTdW06IHRwbC5zdW0odXNGbXQpLFxyXG4gICdJbnRlZ2VyIFN1bSc6IHRwbC5zdW0odXNGbXRJbnQpLFxyXG4gIEF2ZXJhZ2U6IHRwbC5hdmVyYWdlKHVzRm10KSxcclxuICBNZWRpYW46IHRwbC5tZWRpYW4odXNGbXQpLFxyXG4gICdTYW1wbGUgVmFyaWFuY2UnOiB0cGwudmFyKDEsIHVzRm10KSxcclxuICAnU2FtcGxlIFN0YW5kYXJkIERldmlhdGlvbic6IHRwbC5zdGRldigxLCB1c0ZtdCksXHJcbiAgTWluaW11bTogdHBsLm1pbih1c0ZtdCksXHJcbiAgTWF4aW11bTogdHBsLm1heCh1c0ZtdCksXHJcbiAgRmlyc3Q6IHRwbC5maXJzdCh1c0ZtdCksXHJcbiAgTGFzdDogdHBsLmxhc3QodXNGbXQpLFxyXG4gICdTdW0gb3ZlciBTdW0nOiB0cGwuc3VtT3ZlclN1bSh1c0ZtdCksXHJcbiAgJ1N1bSBhcyBGcmFjdGlvbiBvZiBUb3RhbCc6IHRwbC5mcmFjdGlvbk9mKHRwbC5zdW0oKSwgJ3RvdGFsJywgdXNGbXRQY3QpLFxyXG4gICdTdW0gYXMgRnJhY3Rpb24gb2YgUm93cyc6IHRwbC5mcmFjdGlvbk9mKHRwbC5zdW0oKSwgJ3JvdycsIHVzRm10UGN0KSxcclxuICAnU3VtIGFzIEZyYWN0aW9uIG9mIENvbHVtbnMnOiB0cGwuZnJhY3Rpb25PZih0cGwuc3VtKCksICdjb2wnLCB1c0ZtdFBjdCksXHJcbiAgJ0NvdW50IGFzIEZyYWN0aW9uIG9mIFRvdGFsJzogdHBsLmZyYWN0aW9uT2YodHBsLmNvdW50KCksICd0b3RhbCcsIHVzRm10UGN0KSxcclxuICAnQ291bnQgYXMgRnJhY3Rpb24gb2YgUm93cyc6IHRwbC5mcmFjdGlvbk9mKHRwbC5jb3VudCgpLCAncm93JywgdXNGbXRQY3QpLFxyXG4gICdDb3VudCBhcyBGcmFjdGlvbiBvZiBDb2x1bW5zJzogdHBsLmZyYWN0aW9uT2YodHBsLmNvdW50KCksICdjb2wnLCB1c0ZtdFBjdCksXHJcbn0pKShhZ2dyZWdhdG9yVGVtcGxhdGVzKTtcclxuXHJcbmNvbnN0IGxvY2FsZXMgPSB7XHJcbiAgZW46IHtcclxuICAgIGFnZ3JlZ2F0b3JzLFxyXG4gICAgbG9jYWxlU3RyaW5nczoge1xyXG4gICAgICByZW5kZXJFcnJvcjogJ0FuIGVycm9yIG9jY3VycmVkIHJlbmRlcmluZyB0aGUgUGl2b3RUYWJsZSByZXN1bHRzLicsXHJcbiAgICAgIGNvbXB1dGVFcnJvcjogJ0FuIGVycm9yIG9jY3VycmVkIGNvbXB1dGluZyB0aGUgUGl2b3RUYWJsZSByZXN1bHRzLicsXHJcbiAgICAgIHVpUmVuZGVyRXJyb3I6ICdBbiBlcnJvciBvY2N1cnJlZCByZW5kZXJpbmcgdGhlIFBpdm90VGFibGUgVUkuJyxcclxuICAgICAgc2VsZWN0QWxsOiAnU2VsZWN0IEFsbCcsXHJcbiAgICAgIHNlbGVjdE5vbmU6ICdTZWxlY3QgTm9uZScsXHJcbiAgICAgIHRvb01hbnk6ICcodG9vIG1hbnkgdG8gbGlzdCknLFxyXG4gICAgICBmaWx0ZXJSZXN1bHRzOiAnRmlsdGVyIHZhbHVlcycsXHJcbiAgICAgIGFwcGx5OiAnQXBwbHknLFxyXG4gICAgICBjYW5jZWw6ICdDYW5jZWwnLFxyXG4gICAgICB0b3RhbHM6ICdUb3RhbHMnLFxyXG4gICAgICB2czogJ3ZzJyxcclxuICAgICAgYnk6ICdieScsXHJcbiAgICB9LFxyXG4gIH0sXHJcbn07XHJcblxyXG4vLyBkYXRlRm9ybWF0IGRlcml2ZXIgbDEwbiByZXF1aXJlcyBtb250aCBhbmQgZGF5IG5hbWVzIHRvIGJlIHBhc3NlZCBpbiBkaXJlY3RseVxyXG5jb25zdCBtdGhOYW1lc0VuID0gW1xyXG4gICdKYW4nLFxyXG4gICdGZWInLFxyXG4gICdNYXInLFxyXG4gICdBcHInLFxyXG4gICdNYXknLFxyXG4gICdKdW4nLFxyXG4gICdKdWwnLFxyXG4gICdBdWcnLFxyXG4gICdTZXAnLFxyXG4gICdPY3QnLFxyXG4gICdOb3YnLFxyXG4gICdEZWMnLFxyXG5dO1xyXG5jb25zdCBkYXlOYW1lc0VuID0gWydTdW4nLCAnTW9uJywgJ1R1ZScsICdXZWQnLCAnVGh1JywgJ0ZyaScsICdTYXQnXTtcclxuY29uc3QgemVyb1BhZCA9IG51bWJlciA9PiBgMCR7bnVtYmVyfWAuc3Vic3RyKC0yLCAyKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1tYWdpYy1udW1iZXJzXHJcblxyXG5jb25zdCBkZXJpdmVycyA9IHtcclxuICBiaW4oY29sLCBiaW5XaWR0aCkge1xyXG4gICAgcmV0dXJuIHJlY29yZCA9PiByZWNvcmRbY29sXSAtIChyZWNvcmRbY29sXSAlIGJpbldpZHRoKTtcclxuICB9LFxyXG4gIGRhdGVGb3JtYXQoXHJcbiAgICBjb2wsXHJcbiAgICBmb3JtYXRTdHJpbmcsXHJcbiAgICB1dGNPdXRwdXQgPSBmYWxzZSxcclxuICAgIG10aE5hbWVzID0gbXRoTmFtZXNFbixcclxuICAgIGRheU5hbWVzID0gZGF5TmFtZXNFbixcclxuICApIHtcclxuICAgIGNvbnN0IHV0YyA9IHV0Y091dHB1dCA/ICdVVEMnIDogJyc7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJlY29yZCkge1xyXG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoRGF0ZS5wYXJzZShyZWNvcmRbY29sXSkpO1xyXG4gICAgICBpZiAoTnVtYmVyLmlzTmFOKGRhdGUpKSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmb3JtYXRTdHJpbmcucmVwbGFjZSgvJSguKS9nLCBmdW5jdGlvbiAobSwgcCkge1xyXG4gICAgICAgIHN3aXRjaCAocCkge1xyXG4gICAgICAgICAgY2FzZSAneSc6XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlW2BnZXQke3V0Y31GdWxsWWVhcmBdKCk7XHJcbiAgICAgICAgICBjYXNlICdtJzpcclxuICAgICAgICAgICAgcmV0dXJuIHplcm9QYWQoZGF0ZVtgZ2V0JHt1dGN9TW9udGhgXSgpICsgMSk7XHJcbiAgICAgICAgICBjYXNlICduJzpcclxuICAgICAgICAgICAgcmV0dXJuIG10aE5hbWVzW2RhdGVbYGdldCR7dXRjfU1vbnRoYF0oKV07XHJcbiAgICAgICAgICBjYXNlICdkJzpcclxuICAgICAgICAgICAgcmV0dXJuIHplcm9QYWQoZGF0ZVtgZ2V0JHt1dGN9RGF0ZWBdKCkpO1xyXG4gICAgICAgICAgY2FzZSAndyc6XHJcbiAgICAgICAgICAgIHJldHVybiBkYXlOYW1lc1tkYXRlW2BnZXQke3V0Y31EYXlgXSgpXTtcclxuICAgICAgICAgIGNhc2UgJ3gnOlxyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZVtgZ2V0JHt1dGN9RGF5YF0oKTtcclxuICAgICAgICAgIGNhc2UgJ0gnOlxyXG4gICAgICAgICAgICByZXR1cm4gemVyb1BhZChkYXRlW2BnZXQke3V0Y31Ib3Vyc2BdKCkpO1xyXG4gICAgICAgICAgY2FzZSAnTSc6XHJcbiAgICAgICAgICAgIHJldHVybiB6ZXJvUGFkKGRhdGVbYGdldCR7dXRjfU1pbnV0ZXNgXSgpKTtcclxuICAgICAgICAgIGNhc2UgJ1MnOlxyXG4gICAgICAgICAgICByZXR1cm4gemVyb1BhZChkYXRlW2BnZXQke3V0Y31TZWNvbmRzYF0oKSk7XHJcbiAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gYCUke3B9YDtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuICB9LFxyXG59O1xyXG5cclxuLy8gR2l2ZW4gYW4gYXJyYXkgb2YgYXR0cmlidXRlIHZhbHVlcywgY29udmVydCB0byBhIGtleSB0aGF0XHJcbi8vIGNhbiBiZSB1c2VkIGluIG9iamVjdHMuXHJcbmNvbnN0IGZsYXRLZXkgPSBhdHRyVmFscyA9PiBhdHRyVmFscy5qb2luKFN0cmluZy5mcm9tQ2hhckNvZGUoMCkpO1xyXG5cclxuLypcclxuRGF0YSBNb2RlbCBjbGFzc1xyXG4qL1xyXG5cclxuY2xhc3MgUGl2b3REYXRhIHtcclxuICBjb25zdHJ1Y3RvcihpbnB1dFByb3BzID0ge30sIHN1YnRvdGFscyA9IHt9KSB7XHJcbiAgICB0aGlzLnByb3BzID0geyAuLi5QaXZvdERhdGEuZGVmYXVsdFByb3BzLCAuLi5pbnB1dFByb3BzIH07XHJcbiAgICB0aGlzLnByb2Nlc3NSZWNvcmQgPSB0aGlzLnByb2Nlc3NSZWNvcmQuYmluZCh0aGlzKTtcclxuICAgIFByb3BUeXBlcy5jaGVja1Byb3BUeXBlcyhcclxuICAgICAgUGl2b3REYXRhLnByb3BUeXBlcyxcclxuICAgICAgdGhpcy5wcm9wcyxcclxuICAgICAgJ3Byb3AnLFxyXG4gICAgICAnUGl2b3REYXRhJyxcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5hZ2dyZWdhdG9yID0gdGhpcy5wcm9wc1xyXG4gICAgICAuYWdncmVnYXRvcnNGYWN0b3J5KHRoaXMucHJvcHMuZGVmYXVsdEZvcm1hdHRlcilcclxuICAgICAgW3RoaXMucHJvcHMuYWdncmVnYXRvck5hbWVdKHRoaXMucHJvcHMudmFscyk7XHJcbiAgICB0aGlzLmZvcm1hdHRlZEFnZ3JlZ2F0b3JzID1cclxuICAgICAgdGhpcy5wcm9wcy5jdXN0b21Gb3JtYXR0ZXJzICYmXHJcbiAgICAgIE9iamVjdC5lbnRyaWVzKHRoaXMucHJvcHMuY3VzdG9tRm9ybWF0dGVycykucmVkdWNlKFxyXG4gICAgICAgIChhY2MsIFtrZXksIGNvbHVtbkZvcm1hdHRlcl0pID0+IHtcclxuICAgICAgICAgIGFjY1trZXldID0ge307XHJcbiAgICAgICAgICBPYmplY3QuZW50cmllcyhjb2x1bW5Gb3JtYXR0ZXIpLmZvckVhY2goKFtjb2x1bW4sIGZvcm1hdHRlcl0pID0+IHtcclxuICAgICAgICAgICAgYWNjW2tleV1bY29sdW1uXSA9IHRoaXMucHJvcHNcclxuICAgICAgICAgICAgICAuYWdncmVnYXRvcnNGYWN0b3J5KGZvcm1hdHRlcilcclxuICAgICAgICAgICAgICBbdGhpcy5wcm9wcy5hZ2dyZWdhdG9yTmFtZV0odGhpcy5wcm9wcy52YWxzKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgICB9LFxyXG4gICAgICAgIHt9LFxyXG4gICAgICApO1xyXG4gICAgdGhpcy50cmVlID0ge307XHJcbiAgICB0aGlzLnJvd0tleXMgPSBbXTtcclxuICAgIHRoaXMuY29sS2V5cyA9IFtdO1xyXG4gICAgdGhpcy5yb3dUb3RhbHMgPSB7fTtcclxuICAgIHRoaXMuY29sVG90YWxzID0ge307XHJcbiAgICB0aGlzLmFsbFRvdGFsID0gdGhpcy5hZ2dyZWdhdG9yKHRoaXMsIFtdLCBbXSk7XHJcbiAgICB0aGlzLnN1YnRvdGFscyA9IHN1YnRvdGFscztcclxuICAgIHRoaXMuc29ydGVkID0gZmFsc2U7XHJcblxyXG4gICAgLy8gaXRlcmF0ZSB0aHJvdWdoIGlucHV0LCBhY2N1bXVsYXRpbmcgZGF0YSBmb3IgY2VsbHNcclxuICAgIFBpdm90RGF0YS5mb3JFYWNoUmVjb3JkKHRoaXMucHJvcHMuZGF0YSwgdGhpcy5wcm9jZXNzUmVjb3JkKTtcclxuICB9XHJcblxyXG4gIGdldEZvcm1hdHRlZEFnZ3JlZ2F0b3IocmVjb3JkLCB0b3RhbHNLZXlzKSB7XHJcbiAgICBpZiAoIXRoaXMuZm9ybWF0dGVkQWdncmVnYXRvcnMpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuYWdncmVnYXRvcjtcclxuICAgIH1cclxuICAgIGNvbnN0IFtncm91cE5hbWUsIGdyb3VwVmFsdWVdID1cclxuICAgICAgT2JqZWN0LmVudHJpZXMocmVjb3JkKS5maW5kKFxyXG4gICAgICAgIChbbmFtZSwgdmFsdWVdKSA9PlxyXG4gICAgICAgICAgdGhpcy5mb3JtYXR0ZWRBZ2dyZWdhdG9yc1tuYW1lXSAmJlxyXG4gICAgICAgICAgdGhpcy5mb3JtYXR0ZWRBZ2dyZWdhdG9yc1tuYW1lXVt2YWx1ZV0sXHJcbiAgICAgICkgfHwgW107XHJcbiAgICBpZiAoXHJcbiAgICAgICFncm91cE5hbWUgfHxcclxuICAgICAgIWdyb3VwVmFsdWUgfHxcclxuICAgICAgKHRvdGFsc0tleXMgJiYgIXRvdGFsc0tleXMuaW5jbHVkZXMoZ3JvdXBWYWx1ZSkpXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuIHRoaXMuYWdncmVnYXRvcjtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmZvcm1hdHRlZEFnZ3JlZ2F0b3JzW2dyb3VwTmFtZV1bZ3JvdXBWYWx1ZV0gfHwgdGhpcy5hZ2dyZWdhdG9yO1xyXG4gIH1cclxuXHJcbiAgYXJyU29ydChhdHRycywgcGFydGlhbE9uVG9wLCByZXZlcnNlID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHNvcnRlcnNBcnIgPSBhdHRycy5tYXAoYSA9PiBnZXRTb3J0KHRoaXMucHJvcHMuc29ydGVycywgYSkpO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgIGNvbnN0IGxpbWl0ID0gTWF0aC5taW4oYS5sZW5ndGgsIGIubGVuZ3RoKTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW1pdDsgaSArPSAxKSB7XHJcbiAgICAgICAgY29uc3Qgc29ydGVyID0gc29ydGVyc0FycltpXTtcclxuICAgICAgICBjb25zdCBjb21wYXJpc29uID0gcmV2ZXJzZSA/IHNvcnRlcihiW2ldLCBhW2ldKSA6IHNvcnRlcihhW2ldLCBiW2ldKTtcclxuICAgICAgICBpZiAoY29tcGFyaXNvbiAhPT0gMCkge1xyXG4gICAgICAgICAgcmV0dXJuIGNvbXBhcmlzb247XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBwYXJ0aWFsT25Ub3AgPyBhLmxlbmd0aCAtIGIubGVuZ3RoIDogYi5sZW5ndGggLSBhLmxlbmd0aDtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzb3J0S2V5cygpIHtcclxuICAgIGlmICghdGhpcy5zb3J0ZWQpIHtcclxuICAgICAgdGhpcy5zb3J0ZWQgPSB0cnVlO1xyXG4gICAgICBjb25zdCB2ID0gKHIsIGMpID0+IHRoaXMuZ2V0QWdncmVnYXRvcihyLCBjKS52YWx1ZSgpO1xyXG4gICAgICBzd2l0Y2ggKHRoaXMucHJvcHMucm93T3JkZXIpIHtcclxuICAgICAgICBjYXNlICdrZXlfel90b19hJzpcclxuICAgICAgICAgIHRoaXMucm93S2V5cy5zb3J0KFxyXG4gICAgICAgICAgICB0aGlzLmFyclNvcnQodGhpcy5wcm9wcy5yb3dzLCB0aGlzLnN1YnRvdGFscy5yb3dQYXJ0aWFsT25Ub3AsIHRydWUpLFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3ZhbHVlX2FfdG9feic6XHJcbiAgICAgICAgICB0aGlzLnJvd0tleXMuc29ydCgoYSwgYikgPT4gbmF0dXJhbFNvcnQodihhLCBbXSksIHYoYiwgW10pKSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd2YWx1ZV96X3RvX2EnOlxyXG4gICAgICAgICAgdGhpcy5yb3dLZXlzLnNvcnQoKGEsIGIpID0+IC1uYXR1cmFsU29ydCh2KGEsIFtdKSwgdihiLCBbXSkpKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICB0aGlzLnJvd0tleXMuc29ydChcclxuICAgICAgICAgICAgdGhpcy5hcnJTb3J0KHRoaXMucHJvcHMucm93cywgdGhpcy5zdWJ0b3RhbHMucm93UGFydGlhbE9uVG9wKSxcclxuICAgICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgc3dpdGNoICh0aGlzLnByb3BzLmNvbE9yZGVyKSB7XHJcbiAgICAgICAgY2FzZSAna2V5X3pfdG9fYSc6XHJcbiAgICAgICAgICB0aGlzLmNvbEtleXMuc29ydChcclxuICAgICAgICAgICAgdGhpcy5hcnJTb3J0KHRoaXMucHJvcHMuY29scywgdGhpcy5zdWJ0b3RhbHMuY29sUGFydGlhbE9uVG9wLCB0cnVlKSxcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd2YWx1ZV9hX3RvX3onOlxyXG4gICAgICAgICAgdGhpcy5jb2xLZXlzLnNvcnQoKGEsIGIpID0+IG5hdHVyYWxTb3J0KHYoW10sIGEpLCB2KFtdLCBiKSkpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAndmFsdWVfel90b19hJzpcclxuICAgICAgICAgIHRoaXMuY29sS2V5cy5zb3J0KChhLCBiKSA9PiAtbmF0dXJhbFNvcnQodihbXSwgYSksIHYoW10sIGIpKSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgdGhpcy5jb2xLZXlzLnNvcnQoXHJcbiAgICAgICAgICAgIHRoaXMuYXJyU29ydCh0aGlzLnByb3BzLmNvbHMsIHRoaXMuc3VidG90YWxzLmNvbFBhcnRpYWxPblRvcCksXHJcbiAgICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRDb2xLZXlzKCkge1xyXG4gICAgdGhpcy5zb3J0S2V5cygpO1xyXG4gICAgcmV0dXJuIHRoaXMuY29sS2V5cztcclxuICB9XHJcblxyXG4gIGdldFJvd0tleXMoKSB7XHJcbiAgICB0aGlzLnNvcnRLZXlzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5yb3dLZXlzO1xyXG4gIH1cclxuXHJcbiAgcHJvY2Vzc1JlY29yZChyZWNvcmQpIHtcclxuICAgIC8vIHRoaXMgY29kZSBpcyBjYWxsZWQgaW4gYSB0aWdodCBsb29wXHJcbiAgICBjb25zdCBjb2xLZXkgPSBbXTtcclxuICAgIGNvbnN0IHJvd0tleSA9IFtdO1xyXG4gICAgdGhpcy5wcm9wcy5jb2xzLmZvckVhY2goY29sID0+IHtcclxuICAgICAgY29sS2V5LnB1c2goY29sIGluIHJlY29yZCA/IHJlY29yZFtjb2xdIDogJ251bGwnKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5wcm9wcy5yb3dzLmZvckVhY2gocm93ID0+IHtcclxuICAgICAgcm93S2V5LnB1c2gocm93IGluIHJlY29yZCA/IHJlY29yZFtyb3ddIDogJ251bGwnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuYWxsVG90YWwucHVzaChyZWNvcmQpO1xyXG5cclxuICAgIGNvbnN0IHJvd1N0YXJ0ID0gdGhpcy5zdWJ0b3RhbHMucm93RW5hYmxlZCA/IDEgOiBNYXRoLm1heCgxLCByb3dLZXkubGVuZ3RoKTtcclxuICAgIGNvbnN0IGNvbFN0YXJ0ID0gdGhpcy5zdWJ0b3RhbHMuY29sRW5hYmxlZCA/IDEgOiBNYXRoLm1heCgxLCBjb2xLZXkubGVuZ3RoKTtcclxuXHJcbiAgICBsZXQgaXNSb3dTdWJ0b3RhbDtcclxuICAgIGxldCBpc0NvbFN1YnRvdGFsO1xyXG4gICAgZm9yIChsZXQgcmkgPSByb3dTdGFydDsgcmkgPD0gcm93S2V5Lmxlbmd0aDsgcmkgKz0gMSkge1xyXG4gICAgICBpc1Jvd1N1YnRvdGFsID0gcmkgPCByb3dLZXkubGVuZ3RoO1xyXG4gICAgICBjb25zdCBmUm93S2V5ID0gcm93S2V5LnNsaWNlKDAsIHJpKTtcclxuICAgICAgY29uc3QgZmxhdFJvd0tleSA9IGZsYXRLZXkoZlJvd0tleSk7XHJcbiAgICAgIGlmICghdGhpcy5yb3dUb3RhbHNbZmxhdFJvd0tleV0pIHtcclxuICAgICAgICB0aGlzLnJvd0tleXMucHVzaChmUm93S2V5KTtcclxuICAgICAgICB0aGlzLnJvd1RvdGFsc1tmbGF0Um93S2V5XSA9IHRoaXMuZ2V0Rm9ybWF0dGVkQWdncmVnYXRvcihcclxuICAgICAgICAgIHJlY29yZCxcclxuICAgICAgICAgIHJvd0tleSxcclxuICAgICAgICApKHRoaXMsIGZSb3dLZXksIFtdKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnJvd1RvdGFsc1tmbGF0Um93S2V5XS5wdXNoKHJlY29yZCk7XHJcbiAgICAgIHRoaXMucm93VG90YWxzW2ZsYXRSb3dLZXldLmlzU3VidG90YWwgPSBpc1Jvd1N1YnRvdGFsO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAobGV0IGNpID0gY29sU3RhcnQ7IGNpIDw9IGNvbEtleS5sZW5ndGg7IGNpICs9IDEpIHtcclxuICAgICAgaXNDb2xTdWJ0b3RhbCA9IGNpIDwgY29sS2V5Lmxlbmd0aDtcclxuICAgICAgY29uc3QgZkNvbEtleSA9IGNvbEtleS5zbGljZSgwLCBjaSk7XHJcbiAgICAgIGNvbnN0IGZsYXRDb2xLZXkgPSBmbGF0S2V5KGZDb2xLZXkpO1xyXG4gICAgICBpZiAoIXRoaXMuY29sVG90YWxzW2ZsYXRDb2xLZXldKSB7XHJcbiAgICAgICAgdGhpcy5jb2xLZXlzLnB1c2goZkNvbEtleSk7XHJcbiAgICAgICAgdGhpcy5jb2xUb3RhbHNbZmxhdENvbEtleV0gPSB0aGlzLmdldEZvcm1hdHRlZEFnZ3JlZ2F0b3IoXHJcbiAgICAgICAgICByZWNvcmQsXHJcbiAgICAgICAgICBjb2xLZXksXHJcbiAgICAgICAgKSh0aGlzLCBbXSwgZkNvbEtleSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5jb2xUb3RhbHNbZmxhdENvbEtleV0ucHVzaChyZWNvcmQpO1xyXG4gICAgICB0aGlzLmNvbFRvdGFsc1tmbGF0Q29sS2V5XS5pc1N1YnRvdGFsID0gaXNDb2xTdWJ0b3RhbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBbmQgbm93IGZpbGwgaW4gZm9yIGFsbCB0aGUgc3ViLWNlbGxzLlxyXG4gICAgZm9yIChsZXQgcmkgPSByb3dTdGFydDsgcmkgPD0gcm93S2V5Lmxlbmd0aDsgcmkgKz0gMSkge1xyXG4gICAgICBpc1Jvd1N1YnRvdGFsID0gcmkgPCByb3dLZXkubGVuZ3RoO1xyXG4gICAgICBjb25zdCBmUm93S2V5ID0gcm93S2V5LnNsaWNlKDAsIHJpKTtcclxuICAgICAgY29uc3QgZmxhdFJvd0tleSA9IGZsYXRLZXkoZlJvd0tleSk7XHJcbiAgICAgIGlmICghdGhpcy50cmVlW2ZsYXRSb3dLZXldKSB7XHJcbiAgICAgICAgdGhpcy50cmVlW2ZsYXRSb3dLZXldID0ge307XHJcbiAgICAgIH1cclxuICAgICAgZm9yIChsZXQgY2kgPSBjb2xTdGFydDsgY2kgPD0gY29sS2V5Lmxlbmd0aDsgY2kgKz0gMSkge1xyXG4gICAgICAgIGlzQ29sU3VidG90YWwgPSBjaSA8IGNvbEtleS5sZW5ndGg7XHJcbiAgICAgICAgY29uc3QgZkNvbEtleSA9IGNvbEtleS5zbGljZSgwLCBjaSk7XHJcbiAgICAgICAgY29uc3QgZmxhdENvbEtleSA9IGZsYXRLZXkoZkNvbEtleSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnRyZWVbZmxhdFJvd0tleV1bZmxhdENvbEtleV0pIHtcclxuICAgICAgICAgIHRoaXMudHJlZVtmbGF0Um93S2V5XVtmbGF0Q29sS2V5XSA9IHRoaXMuZ2V0Rm9ybWF0dGVkQWdncmVnYXRvcihcclxuICAgICAgICAgICAgcmVjb3JkLFxyXG4gICAgICAgICAgKSh0aGlzLCBmUm93S2V5LCBmQ29sS2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50cmVlW2ZsYXRSb3dLZXldW2ZsYXRDb2xLZXldLnB1c2gocmVjb3JkKTtcclxuXHJcbiAgICAgICAgdGhpcy50cmVlW2ZsYXRSb3dLZXldW2ZsYXRDb2xLZXldLmlzUm93U3VidG90YWwgPSBpc1Jvd1N1YnRvdGFsO1xyXG4gICAgICAgIHRoaXMudHJlZVtmbGF0Um93S2V5XVtmbGF0Q29sS2V5XS5pc0NvbFN1YnRvdGFsID0gaXNDb2xTdWJ0b3RhbDtcclxuICAgICAgICB0aGlzLnRyZWVbZmxhdFJvd0tleV1bZmxhdENvbEtleV0uaXNTdWJ0b3RhbCA9XHJcbiAgICAgICAgICBpc1Jvd1N1YnRvdGFsIHx8IGlzQ29sU3VidG90YWw7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEFnZ3JlZ2F0b3Iocm93S2V5LCBjb2xLZXkpIHtcclxuICAgIGxldCBhZ2c7XHJcbiAgICBjb25zdCBmbGF0Um93S2V5ID0gZmxhdEtleShyb3dLZXkpO1xyXG4gICAgY29uc3QgZmxhdENvbEtleSA9IGZsYXRLZXkoY29sS2V5KTtcclxuICAgIGlmIChyb3dLZXkubGVuZ3RoID09PSAwICYmIGNvbEtleS5sZW5ndGggPT09IDApIHtcclxuICAgICAgYWdnID0gdGhpcy5hbGxUb3RhbDtcclxuICAgIH0gZWxzZSBpZiAocm93S2V5Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBhZ2cgPSB0aGlzLmNvbFRvdGFsc1tmbGF0Q29sS2V5XTtcclxuICAgIH0gZWxzZSBpZiAoY29sS2V5Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBhZ2cgPSB0aGlzLnJvd1RvdGFsc1tmbGF0Um93S2V5XTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFnZyA9IHRoaXMudHJlZVtmbGF0Um93S2V5XVtmbGF0Q29sS2V5XTtcclxuICAgIH1cclxuICAgIHJldHVybiAoXHJcbiAgICAgIGFnZyB8fCB7XHJcbiAgICAgICAgdmFsdWUoKSB7XHJcbiAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGZvcm1hdCgpIHtcclxuICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9LFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLy8gY2FuIGhhbmRsZSBhcnJheXMgb3IgalF1ZXJ5IHNlbGVjdGlvbnMgb2YgdGFibGVzXHJcblBpdm90RGF0YS5mb3JFYWNoUmVjb3JkID0gZnVuY3Rpb24gKGlucHV0LCBwcm9jZXNzUmVjb3JkKSB7XHJcbiAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XHJcbiAgICAvLyBhcnJheSBvZiBvYmplY3RzXHJcbiAgICByZXR1cm4gaW5wdXQubWFwKHJlY29yZCA9PiBwcm9jZXNzUmVjb3JkKHJlY29yZCkpO1xyXG4gIH1cclxuICB0aHJvdyBuZXcgRXJyb3IodCgnVW5rbm93biBpbnB1dCBmb3JtYXQnKSk7XHJcbn07XHJcblxyXG5QaXZvdERhdGEuZGVmYXVsdFByb3BzID0ge1xyXG4gIGFnZ3JlZ2F0b3JzLFxyXG4gIGNvbHM6IFtdLFxyXG4gIHJvd3M6IFtdLFxyXG4gIHZhbHM6IFtdLFxyXG4gIGFnZ3JlZ2F0b3JOYW1lOiAnQ291bnQnLFxyXG4gIHNvcnRlcnM6IHt9LFxyXG4gIHJvd09yZGVyOiAna2V5X2FfdG9feicsXHJcbiAgY29sT3JkZXI6ICdrZXlfYV90b196JyxcclxufTtcclxuXHJcblBpdm90RGF0YS5wcm9wVHlwZXMgPSB7XHJcbiAgZGF0YTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmFycmF5LCBQcm9wVHlwZXMub2JqZWN0LCBQcm9wVHlwZXMuZnVuY10pXHJcbiAgICAuaXNSZXF1aXJlZCxcclxuICBhZ2dyZWdhdG9yTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcclxuICBjb2xzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc3RyaW5nKSxcclxuICByb3dzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc3RyaW5nKSxcclxuICB2YWxzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc3RyaW5nKSxcclxuICB2YWx1ZUZpbHRlcjogUHJvcFR5cGVzLm9iamVjdE9mKFByb3BUeXBlcy5vYmplY3RPZihQcm9wVHlwZXMuYm9vbCkpLFxyXG4gIHNvcnRlcnM6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xyXG4gICAgUHJvcFR5cGVzLmZ1bmMsXHJcbiAgICBQcm9wVHlwZXMub2JqZWN0T2YoUHJvcFR5cGVzLmZ1bmMpLFxyXG4gIF0pLFxyXG4gIGRlcml2ZWRBdHRyaWJ1dGVzOiBQcm9wVHlwZXMub2JqZWN0T2YoUHJvcFR5cGVzLmZ1bmMpLFxyXG4gIHJvd09yZGVyOiBQcm9wVHlwZXMub25lT2YoW1xyXG4gICAgJ2tleV9hX3RvX3onLFxyXG4gICAgJ2tleV96X3RvX2EnLFxyXG4gICAgJ3ZhbHVlX2FfdG9feicsXHJcbiAgICAndmFsdWVfel90b19hJyxcclxuICBdKSxcclxuICBjb2xPcmRlcjogUHJvcFR5cGVzLm9uZU9mKFtcclxuICAgICdrZXlfYV90b196JyxcclxuICAgICdrZXlfel90b19hJyxcclxuICAgICd2YWx1ZV9hX3RvX3onLFxyXG4gICAgJ3ZhbHVlX3pfdG9fYScsXHJcbiAgXSksXHJcbn07XHJcblxyXG5leHBvcnQge1xyXG4gIGFnZ3JlZ2F0b3JUZW1wbGF0ZXMsXHJcbiAgYWdncmVnYXRvcnMsXHJcbiAgZGVyaXZlcnMsXHJcbiAgbG9jYWxlcyxcclxuICBuYXR1cmFsU29ydCxcclxuICBudW1iZXJGb3JtYXQsXHJcbiAgZ2V0U29ydCxcclxuICBzb3J0QXMsXHJcbiAgZmxhdEtleSxcclxuICBQaXZvdERhdGEsXHJcbn07XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/react-pivot-screen-api/utilities.js\n");

/***/ }),

/***/ "./node_modules/dom-to-image-more/dist/dom-to-image-more.min.js":
/*!**********************************************************************!*\
  !*** ./node_modules/dom-to-image-more/dist/dom-to-image-more.min.js ***!
  \**********************************************************************/
/***/ (function(module) {

eval("/*! dom-to-image-more 12-05-2022 */\n\n!function(e){\"use strict\";var s={escape:function(e){return e.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g,\"\\\\$1\")},parseExtension:t,mimeType:function(e){e=t(e).toLowerCase();return function(){var e=\"application/font-woff\",t=\"image/jpeg\";return{woff:e,woff2:e,ttf:\"application/font-truetype\",eot:\"application/vnd.ms-fontobject\",png:\"image/png\",jpg:t,jpeg:t,gif:\"image/gif\",tiff:\"image/tiff\",svg:\"image/svg+xml\"}}()[e]||\"\"},dataAsUrl:function(e,t){return\"data:\"+t+\";base64,\"+e},isDataUrl:function(e){return-1!==e.search(/^(data:)/)},canvasToBlob:function(t){return t.toBlob?new Promise(function(e){t.toBlob(e)}):function(i){return new Promise(function(e){for(var t=g(i.toDataURL().split(\",\")[1]),n=t.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=t.charCodeAt(o);e(new Blob([r],{type:\"image/png\"}))})}(t)},resolveUrl:function(e,t){var n=document.implementation.createHTMLDocument(),r=n.createElement(\"base\");n.head.appendChild(r);var o=n.createElement(\"a\");return n.body.appendChild(o),r.href=t,o.href=e,o.href},getAndEncode:function(a){d.impl.options.cacheBust&&(a+=(/\\?/.test(a)?\"&\":\"?\")+(new Date).getTime());return new Promise(function(n){var e,t,r=d.impl.options.httpTimeout,o=new XMLHttpRequest;function i(e){console.error(e),n(\"\")}o.onreadystatechange=function(){var t;4===o.readyState&&(200===o.status?((t=new FileReader).onloadend=function(){var e=t.result.split(/,/)[1];n(e)},t.readAsDataURL(o.response)):e?n(e):i(\"cannot fetch resource: \"+a+\", status: \"+o.status))},o.ontimeout=function(){e?n(e):i(\"timeout of \"+r+\"ms occured while fetching resource: \"+a)},o.responseType=\"blob\",o.timeout=r,d.impl.options.useCredentials&&(o.withCredentials=!0),o.open(\"GET\",a,!0),o.send(),!d.impl.options.imagePlaceholder||(t=d.impl.options.imagePlaceholder.split(/,/))&&t[1]&&(e=t[1])})},uid:function(){var e=0;return function(){return\"u\"+(\"0000\"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+e++}}(),delay:function(n){return function(t){return new Promise(function(e){setTimeout(function(){e(t)},n)})}},asArray:function(e){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t},escapeXhtml:function(e){return e.replace(/%/g,\"%25\").replace(/#/g,\"%23\").replace(/\\n/g,\"%0A\")},makeImage:function(r){return\"data:,\"===r?Promise.resolve():new Promise(function(e,t){var n=new Image;d.impl.options.useCredentials&&(n.crossOrigin=\"use-credentials\"),n.onload=function(){e(n)},n.onerror=t,n.src=r})},width:function(e){var t=r(e,\"border-left-width\"),n=r(e,\"border-right-width\");return e.scrollWidth+t+n},height:function(e){var t=r(e,\"border-top-width\"),n=r(e,\"border-bottom-width\");return e.scrollHeight+t+n}};function t(e){e=/\\.([^\\.\\/]*?)(\\?|$)/g.exec(e);return e?e[1]:\"\"}function r(e,t){t=p(e).getPropertyValue(t);return parseFloat(t.replace(\"px\",\"\"))}var o,i={inlineAll:function(t,r,o){return n(t)?Promise.resolve(t).then(a).then(function(e){var n=Promise.resolve(t);return e.forEach(function(t){n=n.then(function(e){return u(e,t,r,o)})}),n}):Promise.resolve(t)},shouldProcess:n,impl:{readUrls:a,inline:u}};function n(e){return-1!==e.search(o)}function a(e){for(var t,n=[];null!==(t=o.exec(e));)n.push(t[1]);return n.filter(function(e){return!s.isDataUrl(e)})}function u(t,n,r,e){return Promise.resolve(n).then(function(e){return r?s.resolveUrl(e,r):e}).then(e||s.getAndEncode).then(function(e){return s.dataAsUrl(e,s.mimeType(n))}).then(function(e){return t.replace(new RegExp(\"(url\\\\(['\\\"]?)(\"+s.escape(n)+\")(['\\\"]?\\\\))\",\"g\"),\"$1\"+e+\"$3\")})}var c={resolveAll:function(){return l().then(function(e){return Promise.all(e.map(function(e){return e.resolve()}))}).then(function(e){return e.join(\"\\n\")})},impl:{readAll:l}};function l(){return Promise.resolve(s.asArray(document.styleSheets)).then(function(e){var n=[];return e.forEach(function(t){if(Object.getPrototypeOf(t).hasOwnProperty(\"cssRules\"))try{s.asArray(t.cssRules||[]).forEach(n.push.bind(n))}catch(e){console.log(\"Error while reading CSS rules from \"+t.href,e.toString())}}),n}).then(function(e){return e.filter(function(e){return e.type===CSSRule.FONT_FACE_RULE}).filter(function(e){return i.shouldProcess(e.style.getPropertyValue(\"src\"))})}).then(function(e){return e.map(t)});function t(t){return{resolve:function(){var e=(t.parentStyleSheet||{}).href;return i.inlineAll(t.cssText,e)},src:function(){return t.style.getPropertyValue(\"src\")}}}}var f={inlineAll:function t(e){if(!(e instanceof Element))return Promise.resolve(e);return n(e).then(function(){return e instanceof HTMLImageElement?h(e).inline():Promise.all(s.asArray(e.childNodes).map(function(e){return t(e)}))});function n(t){var n=t.style.getPropertyValue(\"background\");return n?i.inlineAll(n).then(function(e){t.style.setProperty(\"background\",e,n)}).then(function(){return t}):Promise.resolve(t)}},impl:{newImage:h}};function h(n){return{inline:function(e){return s.isDataUrl(n.src)?Promise.resolve():Promise.resolve(n.src).then(e||s.getAndEncode).then(function(e){return s.dataAsUrl(e,s.mimeType(n.src))}).then(function(t){return new Promise(function(e){n.onload=e,n.onerror=e,n.src=t})})}}}var m={imagePlaceholder:void 0,cacheBust:!(o=/url\\(['\"]?([^'\"]+?)['\"]?\\)/g),useCredentials:!1,httpTimeout:3e4},d={toSvg:y,toPng:function(e,t){return(t=t||{}).raster=!0,v(e,t).then(function(e){return e.toDataURL()})},toJpeg:function(e,t){return(t=t||{}).raster=!0,v(e,t).then(function(e){return e.toDataURL(\"image/jpeg\",t.quality||1)})},toBlob:function(e,t){return(t=t||{}).raster=!0,v(e,t).then(s.canvasToBlob)},toPixelData:function(t,e){return(e=e||{}).raster=!0,v(t,e).then(function(e){return e.getContext(\"2d\").getImageData(0,0,s.width(t),s.height(t)).data})},toCanvas:function(e,t){return(t=t||{}).raster=!0,v(e,t||{})},impl:{fontFaces:c,images:f,util:s,inliner:i,options:{}}}; true?module.exports=d:0;const p=e.getComputedStyle||window.getComputedStyle,g=e.atob||window.atob;function y(r,o){return function(e){void 0===e.imagePlaceholder?d.impl.options.imagePlaceholder=m.imagePlaceholder:d.impl.options.imagePlaceholder=e.imagePlaceholder;void 0===e.cacheBust?d.impl.options.cacheBust=m.cacheBust:d.impl.options.cacheBust=e.cacheBust;void 0===e.useCredentials?d.impl.options.useCredentials=m.useCredentials:d.impl.options.useCredentials=e.useCredentials}(o=o||{}),Promise.resolve(r).then(function(e){return function i(t,a,c,u,l=null){if(!c&&a&&!a(t))return Promise.resolve();return Promise.resolve(t).then(e).then(function(e){return n(t,e)}).then(function(e){return r(t,e,u)});function e(e){return e instanceof HTMLCanvasElement?s.makeImage(e.toDataURL()):\"IFRAME\"===e.nodeName?html2canvas(e.contentDocument.body).then(e=>e.toDataURL()).then(s.makeImage):e.cloneNode(!1)}function n(o,e){var t=o.childNodes;return 0===t.length?Promise.resolve(e):n(e,s.asArray(t)).then(function(){return e});function n(t,e){var n=p(o),r=Promise.resolve();return e.forEach(function(e){r=r.then(function(){return i(e,a,!1,u,n)}).then(function(e){e&&t.appendChild(e)})}),r}}function r(n,u,o){return u instanceof Element?Promise.resolve().then(e).then(t).then(r).then(i).then(function(){return u}):u;function e(){function r(e,t){t.font=e.font,t.fontFamily=e.fontFamily,t.fontFeatureSettings=e.fontFeatureSettings,t.fontKerning=e.fontKerning,t.fontSize=e.fontSize,t.fontStretch=e.fontStretch,t.fontStyle=e.fontStyle,t.fontVariant=e.fontVariant,t.fontVariantCaps=e.fontVariantCaps,t.fontVariantEastAsian=e.fontVariantEastAsian,t.fontVariantLigatures=e.fontVariantLigatures,t.fontVariantNumeric=e.fontVariantNumeric,t.fontVariationSettings=e.fontVariationSettings,t.fontWeight=e.fontWeight}function e(e,t){var n=p(e);n.cssText?(t.style.cssText=n.cssText,r(n,t.style)):(o?b(e,n,t,c):E(n,l,t),c&&([\"inset-block\",\"inset-block-start\",\"inset-block-end\"].forEach(e=>t.style.removeProperty(e)),[\"left\",\"right\",\"top\",\"bottom\"].forEach(e=>{t.style.getPropertyValue(e)&&t.style.setProperty(e,\"0px\")})))}e(n,u)}function t(){function t(o){var i,a=p(n,o),e=a.getPropertyValue(\"content\");function t(){var e=\".\"+i+\":\"+o,t=(a.cssText?n:r)();return document.createTextNode(e+\"{\"+t+\"}\");function n(){return a.cssText+\" content: \"+a.getPropertyValue(\"content\")+\";\"}function r(){return s.asArray(a).map(e).join(\"; \")+\";\";function e(e){return e+\": \"+a.getPropertyValue(e)+(a.getPropertyPriority(e)?\" !important\":\"\")}}}\"\"!==e&&\"none\"!==e&&(i=s.uid(),(e=u.getAttribute(\"class\"))&&u.setAttribute(\"class\",e+\" \"+i),(e=document.createElement(\"style\")).appendChild(t()),u.appendChild(e))}[\":before\",\":after\"].forEach(function(e){t(e)})}function r(){n instanceof HTMLTextAreaElement&&(u.innerHTML=n.value),n instanceof HTMLInputElement&&u.setAttribute(\"value\",n.value)}function i(){u instanceof SVGElement&&(u.setAttribute(\"xmlns\",\"http://www.w3.org/2000/svg\"),u instanceof SVGRectElement&&[\"width\",\"height\"].forEach(function(e){var t=u.getAttribute(e);t&&u.style.setProperty(e,t)}))}}}(e,o.filter,!0,!o.raster)}).then(P).then(w).then(function(t){o.bgcolor&&(t.style.backgroundColor=o.bgcolor);o.width&&(t.style.width=o.width+\"px\");o.height&&(t.style.height=o.height+\"px\");o.style&&Object.keys(o.style).forEach(function(e){t.style[e]=o.style[e]});var e=null;\"function\"==typeof o.onclone&&(e=o.onclone(t));return Promise.resolve(e).then(function(){return t})}).then(function(e){return e=e,t=o.width||s.width(r),n=o.height||s.height(r),Promise.resolve(e).then(function(e){return e.setAttribute(\"xmlns\",\"http://www.w3.org/1999/xhtml\"),(new XMLSerializer).serializeToString(e)}).then(s.escapeXhtml).then(function(e){return'<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">'+e+\"</foreignObject>\"}).then(function(e){return'<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"'+t+'\" height=\"'+n+'\">'+e+\"</svg>\"}).then(function(e){return\"data:image/svg+xml;charset=utf-8,\"+e});var t,n})}function v(o,i){return y(o,i).then(s.makeImage).then(s.delay(0)).then(function(e){var t=\"number\"!=typeof i.scale?1:i.scale,n=function(e,t){var n=document.createElement(\"canvas\");n.width=(i.width||s.width(e))*t,n.height=(i.height||s.height(e))*t,i.bgcolor&&((t=n.getContext(\"2d\")).fillStyle=i.bgcolor,t.fillRect(0,0,n.width,n.height));return n}(o,t),r=n.getContext(\"2d\");return r.mozImageSmoothingEnabled=!1,r.msImageSmoothingEnabled=!1,r.imageSmoothingEnabled=!1,e&&(r.scale(t,t),r.drawImage(e,0,0)),A&&(document.body.removeChild(A),A=null,C&&clearTimeout(C),C=setTimeout(()=>{C=null,x={}},2e4)),n})}function P(n){return c.resolveAll().then(function(e){var t=document.createElement(\"style\");return n.appendChild(t),t.appendChild(document.createTextNode(e)),n})}function w(e){return f.inlineAll(e).then(function(){return e})}function b(e,t,n,r){var o,i=n.style,a=e.style;for(o of t){var u=t.getPropertyValue(o),c=a.getPropertyValue(o);a.setProperty(o,r?\"initial\":\"unset\"),t.getPropertyValue(o)!==u?i.setProperty(o,u):i.removeProperty(o),a.setProperty(o,c)}}function E(n,r,e){var o=function(e){if(x[e])return x[e];A||((A=document.createElement(\"iframe\")).style.visibility=\"hidden\",A.style.position=\"fixed\",document.body.appendChild(A),A.contentWindow.document.write('<!DOCTYPE html><meta charset=\"UTF-8\"><title>sandbox</title><body>'));var t=document.createElement(e);A.contentWindow.document.body.appendChild(t),t.textContent=\".\";var n=A.contentWindow.getComputedStyle(t),r={};return s.asArray(n).forEach(function(e){r[e]=\"width\"===e||\"height\"===e?\"auto\":n.getPropertyValue(e)}),A.contentWindow.document.body.removeChild(t),x[e]=r}(e.tagName),i=e.style;s.asArray(n).forEach(function(e){var t=n.getPropertyValue(e);(t!==o[e]||r&&t!==r.getPropertyValue(e))&&i.setProperty(e,t,n.getPropertyPriority(e))})}var C=null,A=null,x={}}(this);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZG9tLXRvLWltYWdlLW1vcmUvZGlzdC9kb20tdG8taW1hZ2UtbW9yZS5taW4uanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3VwZXJzZXQvLi9ub2RlX21vZHVsZXMvZG9tLXRvLWltYWdlLW1vcmUvZGlzdC9kb20tdG8taW1hZ2UtbW9yZS5taW4uanM/ZjE0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgZG9tLXRvLWltYWdlLW1vcmUgMTItMDUtMjAyMiAqL1xuXG4hZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHM9e2VzY2FwZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKC8oWy4qKz9eJHt9KCl8XFxbXFxdXFwvXFxcXF0pL2csXCJcXFxcJDFcIil9LHBhcnNlRXh0ZW5zaW9uOnQsbWltZVR5cGU6ZnVuY3Rpb24oZSl7ZT10KGUpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9XCJhcHBsaWNhdGlvbi9mb250LXdvZmZcIix0PVwiaW1hZ2UvanBlZ1wiO3JldHVybnt3b2ZmOmUsd29mZjI6ZSx0dGY6XCJhcHBsaWNhdGlvbi9mb250LXRydWV0eXBlXCIsZW90OlwiYXBwbGljYXRpb24vdm5kLm1zLWZvbnRvYmplY3RcIixwbmc6XCJpbWFnZS9wbmdcIixqcGc6dCxqcGVnOnQsZ2lmOlwiaW1hZ2UvZ2lmXCIsdGlmZjpcImltYWdlL3RpZmZcIixzdmc6XCJpbWFnZS9zdmcreG1sXCJ9fSgpW2VdfHxcIlwifSxkYXRhQXNVcmw6ZnVuY3Rpb24oZSx0KXtyZXR1cm5cImRhdGE6XCIrdCtcIjtiYXNlNjQsXCIrZX0saXNEYXRhVXJsOmZ1bmN0aW9uKGUpe3JldHVybi0xIT09ZS5zZWFyY2goL14oZGF0YTopLyl9LGNhbnZhc1RvQmxvYjpmdW5jdGlvbih0KXtyZXR1cm4gdC50b0Jsb2I/bmV3IFByb21pc2UoZnVuY3Rpb24oZSl7dC50b0Jsb2IoZSl9KTpmdW5jdGlvbihpKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWcoaS50b0RhdGFVUkwoKS5zcGxpdChcIixcIilbMV0pLG49dC5sZW5ndGgscj1uZXcgVWludDhBcnJheShuKSxvPTA7bzxuO28rKylyW29dPXQuY2hhckNvZGVBdChvKTtlKG5ldyBCbG9iKFtyXSx7dHlwZTpcImltYWdlL3BuZ1wifSkpfSl9KHQpfSxyZXNvbHZlVXJsOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCkscj1uLmNyZWF0ZUVsZW1lbnQoXCJiYXNlXCIpO24uaGVhZC5hcHBlbmRDaGlsZChyKTt2YXIgbz1uLmNyZWF0ZUVsZW1lbnQoXCJhXCIpO3JldHVybiBuLmJvZHkuYXBwZW5kQ2hpbGQobyksci5ocmVmPXQsby5ocmVmPWUsby5ocmVmfSxnZXRBbmRFbmNvZGU6ZnVuY3Rpb24oYSl7ZC5pbXBsLm9wdGlvbnMuY2FjaGVCdXN0JiYoYSs9KC9cXD8vLnRlc3QoYSk/XCImXCI6XCI/XCIpKyhuZXcgRGF0ZSkuZ2V0VGltZSgpKTtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24obil7dmFyIGUsdCxyPWQuaW1wbC5vcHRpb25zLmh0dHBUaW1lb3V0LG89bmV3IFhNTEh0dHBSZXF1ZXN0O2Z1bmN0aW9uIGkoZSl7Y29uc29sZS5lcnJvcihlKSxuKFwiXCIpfW8ub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7dmFyIHQ7ND09PW8ucmVhZHlTdGF0ZSYmKDIwMD09PW8uc3RhdHVzPygodD1uZXcgRmlsZVJlYWRlcikub25sb2FkZW5kPWZ1bmN0aW9uKCl7dmFyIGU9dC5yZXN1bHQuc3BsaXQoLywvKVsxXTtuKGUpfSx0LnJlYWRBc0RhdGFVUkwoby5yZXNwb25zZSkpOmU/bihlKTppKFwiY2Fubm90IGZldGNoIHJlc291cmNlOiBcIithK1wiLCBzdGF0dXM6IFwiK28uc3RhdHVzKSl9LG8ub250aW1lb3V0PWZ1bmN0aW9uKCl7ZT9uKGUpOmkoXCJ0aW1lb3V0IG9mIFwiK3IrXCJtcyBvY2N1cmVkIHdoaWxlIGZldGNoaW5nIHJlc291cmNlOiBcIithKX0sby5yZXNwb25zZVR5cGU9XCJibG9iXCIsby50aW1lb3V0PXIsZC5pbXBsLm9wdGlvbnMudXNlQ3JlZGVudGlhbHMmJihvLndpdGhDcmVkZW50aWFscz0hMCksby5vcGVuKFwiR0VUXCIsYSwhMCksby5zZW5kKCksIWQuaW1wbC5vcHRpb25zLmltYWdlUGxhY2Vob2xkZXJ8fCh0PWQuaW1wbC5vcHRpb25zLmltYWdlUGxhY2Vob2xkZXIuc3BsaXQoLywvKSkmJnRbMV0mJihlPXRbMV0pfSl9LHVpZDpmdW5jdGlvbigpe3ZhciBlPTA7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuXCJ1XCIrKFwiMDAwMFwiKyhNYXRoLnJhbmRvbSgpKk1hdGgucG93KDM2LDQpPDwwKS50b1N0cmluZygzNikpLnNsaWNlKC00KStlKyt9fSgpLGRlbGF5OmZ1bmN0aW9uKG4pe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSl7c2V0VGltZW91dChmdW5jdGlvbigpe2UodCl9LG4pfSl9fSxhc0FycmF5OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPWUubGVuZ3RoLHI9MDtyPG47cisrKXQucHVzaChlW3JdKTtyZXR1cm4gdH0sZXNjYXBlWGh0bWw6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvJS9nLFwiJTI1XCIpLnJlcGxhY2UoLyMvZyxcIiUyM1wiKS5yZXBsYWNlKC9cXG4vZyxcIiUwQVwiKX0sbWFrZUltYWdlOmZ1bmN0aW9uKHIpe3JldHVyblwiZGF0YTosXCI9PT1yP1Byb21pc2UucmVzb2x2ZSgpOm5ldyBQcm9taXNlKGZ1bmN0aW9uKGUsdCl7dmFyIG49bmV3IEltYWdlO2QuaW1wbC5vcHRpb25zLnVzZUNyZWRlbnRpYWxzJiYobi5jcm9zc09yaWdpbj1cInVzZS1jcmVkZW50aWFsc1wiKSxuLm9ubG9hZD1mdW5jdGlvbigpe2Uobil9LG4ub25lcnJvcj10LG4uc3JjPXJ9KX0sd2lkdGg6ZnVuY3Rpb24oZSl7dmFyIHQ9cihlLFwiYm9yZGVyLWxlZnQtd2lkdGhcIiksbj1yKGUsXCJib3JkZXItcmlnaHQtd2lkdGhcIik7cmV0dXJuIGUuc2Nyb2xsV2lkdGgrdCtufSxoZWlnaHQ6ZnVuY3Rpb24oZSl7dmFyIHQ9cihlLFwiYm9yZGVyLXRvcC13aWR0aFwiKSxuPXIoZSxcImJvcmRlci1ib3R0b20td2lkdGhcIik7cmV0dXJuIGUuc2Nyb2xsSGVpZ2h0K3Qrbn19O2Z1bmN0aW9uIHQoZSl7ZT0vXFwuKFteXFwuXFwvXSo/KShcXD98JCkvZy5leGVjKGUpO3JldHVybiBlP2VbMV06XCJcIn1mdW5jdGlvbiByKGUsdCl7dD1wKGUpLmdldFByb3BlcnR5VmFsdWUodCk7cmV0dXJuIHBhcnNlRmxvYXQodC5yZXBsYWNlKFwicHhcIixcIlwiKSl9dmFyIG8saT17aW5saW5lQWxsOmZ1bmN0aW9uKHQscixvKXtyZXR1cm4gbih0KT9Qcm9taXNlLnJlc29sdmUodCkudGhlbihhKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciBuPVByb21pc2UucmVzb2x2ZSh0KTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe249bi50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiB1KGUsdCxyLG8pfSl9KSxufSk6UHJvbWlzZS5yZXNvbHZlKHQpfSxzaG91bGRQcm9jZXNzOm4saW1wbDp7cmVhZFVybHM6YSxpbmxpbmU6dX19O2Z1bmN0aW9uIG4oZSl7cmV0dXJuLTEhPT1lLnNlYXJjaChvKX1mdW5jdGlvbiBhKGUpe2Zvcih2YXIgdCxuPVtdO251bGwhPT0odD1vLmV4ZWMoZSkpOyluLnB1c2godFsxXSk7cmV0dXJuIG4uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFzLmlzRGF0YVVybChlKX0pfWZ1bmN0aW9uIHUodCxuLHIsZSl7cmV0dXJuIFByb21pc2UucmVzb2x2ZShuKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiByP3MucmVzb2x2ZVVybChlLHIpOmV9KS50aGVuKGV8fHMuZ2V0QW5kRW5jb2RlKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBzLmRhdGFBc1VybChlLHMubWltZVR5cGUobikpfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gdC5yZXBsYWNlKG5ldyBSZWdFeHAoXCIodXJsXFxcXChbJ1xcXCJdPykoXCIrcy5lc2NhcGUobikrXCIpKFsnXFxcIl0/XFxcXCkpXCIsXCJnXCIpLFwiJDFcIitlK1wiJDNcIil9KX12YXIgYz17cmVzb2x2ZUFsbDpmdW5jdGlvbigpe3JldHVybiBsKCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gUHJvbWlzZS5hbGwoZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVzb2x2ZSgpfSkpfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gZS5qb2luKFwiXFxuXCIpfSl9LGltcGw6e3JlYWRBbGw6bH19O2Z1bmN0aW9uIGwoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHMuYXNBcnJheShkb2N1bWVudC5zdHlsZVNoZWV0cykpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIG49W107cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbih0KXtpZihPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkuaGFzT3duUHJvcGVydHkoXCJjc3NSdWxlc1wiKSl0cnl7cy5hc0FycmF5KHQuY3NzUnVsZXN8fFtdKS5mb3JFYWNoKG4ucHVzaC5iaW5kKG4pKX1jYXRjaChlKXtjb25zb2xlLmxvZyhcIkVycm9yIHdoaWxlIHJlYWRpbmcgQ1NTIHJ1bGVzIGZyb20gXCIrdC5ocmVmLGUudG9TdHJpbmcoKSl9fSksbn0pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLnR5cGU9PT1DU1NSdWxlLkZPTlRfRkFDRV9SVUxFfSkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBpLnNob3VsZFByb2Nlc3MoZS5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwic3JjXCIpKX0pfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gZS5tYXAodCl9KTtmdW5jdGlvbiB0KHQpe3JldHVybntyZXNvbHZlOmZ1bmN0aW9uKCl7dmFyIGU9KHQucGFyZW50U3R5bGVTaGVldHx8e30pLmhyZWY7cmV0dXJuIGkuaW5saW5lQWxsKHQuY3NzVGV4dCxlKX0sc3JjOmZ1bmN0aW9uKCl7cmV0dXJuIHQuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShcInNyY1wiKX19fX12YXIgZj17aW5saW5lQWxsOmZ1bmN0aW9uIHQoZSl7aWYoIShlIGluc3RhbmNlb2YgRWxlbWVudCkpcmV0dXJuIFByb21pc2UucmVzb2x2ZShlKTtyZXR1cm4gbihlKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGUgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50P2goZSkuaW5saW5lKCk6UHJvbWlzZS5hbGwocy5hc0FycmF5KGUuY2hpbGROb2RlcykubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0KGUpfSkpfSk7ZnVuY3Rpb24gbih0KXt2YXIgbj10LnN0eWxlLmdldFByb3BlcnR5VmFsdWUoXCJiYWNrZ3JvdW5kXCIpO3JldHVybiBuP2kuaW5saW5lQWxsKG4pLnRoZW4oZnVuY3Rpb24oZSl7dC5zdHlsZS5zZXRQcm9wZXJ0eShcImJhY2tncm91bmRcIixlLG4pfSkudGhlbihmdW5jdGlvbigpe3JldHVybiB0fSk6UHJvbWlzZS5yZXNvbHZlKHQpfX0saW1wbDp7bmV3SW1hZ2U6aH19O2Z1bmN0aW9uIGgobil7cmV0dXJue2lubGluZTpmdW5jdGlvbihlKXtyZXR1cm4gcy5pc0RhdGFVcmwobi5zcmMpP1Byb21pc2UucmVzb2x2ZSgpOlByb21pc2UucmVzb2x2ZShuLnNyYykudGhlbihlfHxzLmdldEFuZEVuY29kZSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gcy5kYXRhQXNVcmwoZSxzLm1pbWVUeXBlKG4uc3JjKSl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXtuLm9ubG9hZD1lLG4ub25lcnJvcj1lLG4uc3JjPXR9KX0pfX19dmFyIG09e2ltYWdlUGxhY2Vob2xkZXI6dm9pZCAwLGNhY2hlQnVzdDohKG89L3VybFxcKFsnXCJdPyhbXidcIl0rPylbJ1wiXT9cXCkvZyksdXNlQ3JlZGVudGlhbHM6ITEsaHR0cFRpbWVvdXQ6M2U0fSxkPXt0b1N2Zzp5LHRvUG5nOmZ1bmN0aW9uKGUsdCl7cmV0dXJuKHQ9dHx8e30pLnJhc3Rlcj0hMCx2KGUsdCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gZS50b0RhdGFVUkwoKX0pfSx0b0pwZWc6ZnVuY3Rpb24oZSx0KXtyZXR1cm4odD10fHx7fSkucmFzdGVyPSEwLHYoZSx0KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRvRGF0YVVSTChcImltYWdlL2pwZWdcIix0LnF1YWxpdHl8fDEpfSl9LHRvQmxvYjpmdW5jdGlvbihlLHQpe3JldHVybih0PXR8fHt9KS5yYXN0ZXI9ITAsdihlLHQpLnRoZW4ocy5jYW52YXNUb0Jsb2IpfSx0b1BpeGVsRGF0YTpmdW5jdGlvbih0LGUpe3JldHVybihlPWV8fHt9KS5yYXN0ZXI9ITAsdih0LGUpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0Q29udGV4dChcIjJkXCIpLmdldEltYWdlRGF0YSgwLDAscy53aWR0aCh0KSxzLmhlaWdodCh0KSkuZGF0YX0pfSx0b0NhbnZhczpmdW5jdGlvbihlLHQpe3JldHVybih0PXR8fHt9KS5yYXN0ZXI9ITAsdihlLHR8fHt9KX0saW1wbDp7Zm9udEZhY2VzOmMsaW1hZ2VzOmYsdXRpbDpzLGlubGluZXI6aSxvcHRpb25zOnt9fX07XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9ZDplLmRvbXRvaW1hZ2U9ZDtjb25zdCBwPWUuZ2V0Q29tcHV0ZWRTdHlsZXx8d2luZG93LmdldENvbXB1dGVkU3R5bGUsZz1lLmF0b2J8fHdpbmRvdy5hdG9iO2Z1bmN0aW9uIHkocixvKXtyZXR1cm4gZnVuY3Rpb24oZSl7dm9pZCAwPT09ZS5pbWFnZVBsYWNlaG9sZGVyP2QuaW1wbC5vcHRpb25zLmltYWdlUGxhY2Vob2xkZXI9bS5pbWFnZVBsYWNlaG9sZGVyOmQuaW1wbC5vcHRpb25zLmltYWdlUGxhY2Vob2xkZXI9ZS5pbWFnZVBsYWNlaG9sZGVyO3ZvaWQgMD09PWUuY2FjaGVCdXN0P2QuaW1wbC5vcHRpb25zLmNhY2hlQnVzdD1tLmNhY2hlQnVzdDpkLmltcGwub3B0aW9ucy5jYWNoZUJ1c3Q9ZS5jYWNoZUJ1c3Q7dm9pZCAwPT09ZS51c2VDcmVkZW50aWFscz9kLmltcGwub3B0aW9ucy51c2VDcmVkZW50aWFscz1tLnVzZUNyZWRlbnRpYWxzOmQuaW1wbC5vcHRpb25zLnVzZUNyZWRlbnRpYWxzPWUudXNlQ3JlZGVudGlhbHN9KG89b3x8e30pLFByb21pc2UucmVzb2x2ZShyKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbiBpKHQsYSxjLHUsbD1udWxsKXtpZighYyYmYSYmIWEodCkpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO3JldHVybiBQcm9taXNlLnJlc29sdmUodCkudGhlbihlKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBuKHQsZSl9KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiByKHQsZSx1KX0pO2Z1bmN0aW9uIGUoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudD9zLm1ha2VJbWFnZShlLnRvRGF0YVVSTCgpKTpcIklGUkFNRVwiPT09ZS5ub2RlTmFtZT9odG1sMmNhbnZhcyhlLmNvbnRlbnREb2N1bWVudC5ib2R5KS50aGVuKGU9PmUudG9EYXRhVVJMKCkpLnRoZW4ocy5tYWtlSW1hZ2UpOmUuY2xvbmVOb2RlKCExKX1mdW5jdGlvbiBuKG8sZSl7dmFyIHQ9by5jaGlsZE5vZGVzO3JldHVybiAwPT09dC5sZW5ndGg/UHJvbWlzZS5yZXNvbHZlKGUpOm4oZSxzLmFzQXJyYXkodCkpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZX0pO2Z1bmN0aW9uIG4odCxlKXt2YXIgbj1wKG8pLHI9UHJvbWlzZS5yZXNvbHZlKCk7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXtyPXIudGhlbihmdW5jdGlvbigpe3JldHVybiBpKGUsYSwhMSx1LG4pfSkudGhlbihmdW5jdGlvbihlKXtlJiZ0LmFwcGVuZENoaWxkKGUpfSl9KSxyfX1mdW5jdGlvbiByKG4sdSxvKXtyZXR1cm4gdSBpbnN0YW5jZW9mIEVsZW1lbnQ/UHJvbWlzZS5yZXNvbHZlKCkudGhlbihlKS50aGVuKHQpLnRoZW4ocikudGhlbihpKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHV9KTp1O2Z1bmN0aW9uIGUoKXtmdW5jdGlvbiByKGUsdCl7dC5mb250PWUuZm9udCx0LmZvbnRGYW1pbHk9ZS5mb250RmFtaWx5LHQuZm9udEZlYXR1cmVTZXR0aW5ncz1lLmZvbnRGZWF0dXJlU2V0dGluZ3MsdC5mb250S2VybmluZz1lLmZvbnRLZXJuaW5nLHQuZm9udFNpemU9ZS5mb250U2l6ZSx0LmZvbnRTdHJldGNoPWUuZm9udFN0cmV0Y2gsdC5mb250U3R5bGU9ZS5mb250U3R5bGUsdC5mb250VmFyaWFudD1lLmZvbnRWYXJpYW50LHQuZm9udFZhcmlhbnRDYXBzPWUuZm9udFZhcmlhbnRDYXBzLHQuZm9udFZhcmlhbnRFYXN0QXNpYW49ZS5mb250VmFyaWFudEVhc3RBc2lhbix0LmZvbnRWYXJpYW50TGlnYXR1cmVzPWUuZm9udFZhcmlhbnRMaWdhdHVyZXMsdC5mb250VmFyaWFudE51bWVyaWM9ZS5mb250VmFyaWFudE51bWVyaWMsdC5mb250VmFyaWF0aW9uU2V0dGluZ3M9ZS5mb250VmFyaWF0aW9uU2V0dGluZ3MsdC5mb250V2VpZ2h0PWUuZm9udFdlaWdodH1mdW5jdGlvbiBlKGUsdCl7dmFyIG49cChlKTtuLmNzc1RleHQ/KHQuc3R5bGUuY3NzVGV4dD1uLmNzc1RleHQscihuLHQuc3R5bGUpKToobz9iKGUsbix0LGMpOkUobixsLHQpLGMmJihbXCJpbnNldC1ibG9ja1wiLFwiaW5zZXQtYmxvY2stc3RhcnRcIixcImluc2V0LWJsb2NrLWVuZFwiXS5mb3JFYWNoKGU9PnQuc3R5bGUucmVtb3ZlUHJvcGVydHkoZSkpLFtcImxlZnRcIixcInJpZ2h0XCIsXCJ0b3BcIixcImJvdHRvbVwiXS5mb3JFYWNoKGU9Pnt0LnN0eWxlLmdldFByb3BlcnR5VmFsdWUoZSkmJnQuc3R5bGUuc2V0UHJvcGVydHkoZSxcIjBweFwiKX0pKSl9ZShuLHUpfWZ1bmN0aW9uIHQoKXtmdW5jdGlvbiB0KG8pe3ZhciBpLGE9cChuLG8pLGU9YS5nZXRQcm9wZXJ0eVZhbHVlKFwiY29udGVudFwiKTtmdW5jdGlvbiB0KCl7dmFyIGU9XCIuXCIraStcIjpcIitvLHQ9KGEuY3NzVGV4dD9uOnIpKCk7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGUrXCJ7XCIrdCtcIn1cIik7ZnVuY3Rpb24gbigpe3JldHVybiBhLmNzc1RleHQrXCIgY29udGVudDogXCIrYS5nZXRQcm9wZXJ0eVZhbHVlKFwiY29udGVudFwiKStcIjtcIn1mdW5jdGlvbiByKCl7cmV0dXJuIHMuYXNBcnJheShhKS5tYXAoZSkuam9pbihcIjsgXCIpK1wiO1wiO2Z1bmN0aW9uIGUoZSl7cmV0dXJuIGUrXCI6IFwiK2EuZ2V0UHJvcGVydHlWYWx1ZShlKSsoYS5nZXRQcm9wZXJ0eVByaW9yaXR5KGUpP1wiICFpbXBvcnRhbnRcIjpcIlwiKX19fVwiXCIhPT1lJiZcIm5vbmVcIiE9PWUmJihpPXMudWlkKCksKGU9dS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSkmJnUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixlK1wiIFwiK2kpLChlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKSkuYXBwZW5kQ2hpbGQodCgpKSx1LmFwcGVuZENoaWxkKGUpKX1bXCI6YmVmb3JlXCIsXCI6YWZ0ZXJcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt0KGUpfSl9ZnVuY3Rpb24gcigpe24gaW5zdGFuY2VvZiBIVE1MVGV4dEFyZWFFbGVtZW50JiYodS5pbm5lckhUTUw9bi52YWx1ZSksbiBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQmJnUuc2V0QXR0cmlidXRlKFwidmFsdWVcIixuLnZhbHVlKX1mdW5jdGlvbiBpKCl7dSBpbnN0YW5jZW9mIFNWR0VsZW1lbnQmJih1LnNldEF0dHJpYnV0ZShcInhtbG5zXCIsXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiKSx1IGluc3RhbmNlb2YgU1ZHUmVjdEVsZW1lbnQmJltcIndpZHRoXCIsXCJoZWlnaHRcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD11LmdldEF0dHJpYnV0ZShlKTt0JiZ1LnN0eWxlLnNldFByb3BlcnR5KGUsdCl9KSl9fX0oZSxvLmZpbHRlciwhMCwhby5yYXN0ZXIpfSkudGhlbihQKS50aGVuKHcpLnRoZW4oZnVuY3Rpb24odCl7by5iZ2NvbG9yJiYodC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9by5iZ2NvbG9yKTtvLndpZHRoJiYodC5zdHlsZS53aWR0aD1vLndpZHRoK1wicHhcIik7by5oZWlnaHQmJih0LnN0eWxlLmhlaWdodD1vLmhlaWdodCtcInB4XCIpO28uc3R5bGUmJk9iamVjdC5rZXlzKG8uc3R5bGUpLmZvckVhY2goZnVuY3Rpb24oZSl7dC5zdHlsZVtlXT1vLnN0eWxlW2VdfSk7dmFyIGU9bnVsbDtcImZ1bmN0aW9uXCI9PXR5cGVvZiBvLm9uY2xvbmUmJihlPW8ub25jbG9uZSh0KSk7cmV0dXJuIFByb21pc2UucmVzb2x2ZShlKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHR9KX0pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZSx0PW8ud2lkdGh8fHMud2lkdGgociksbj1vLmhlaWdodHx8cy5oZWlnaHQociksUHJvbWlzZS5yZXNvbHZlKGUpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2V0QXR0cmlidXRlKFwieG1sbnNcIixcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIiksKG5ldyBYTUxTZXJpYWxpemVyKS5zZXJpYWxpemVUb1N0cmluZyhlKX0pLnRoZW4ocy5lc2NhcGVYaHRtbCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4nPGZvcmVpZ25PYmplY3QgeD1cIjBcIiB5PVwiMFwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIj4nK2UrXCI8L2ZvcmVpZ25PYmplY3Q+XCJ9KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybic8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIicrdCsnXCIgaGVpZ2h0PVwiJytuKydcIj4nK2UrXCI8L3N2Zz5cIn0pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCxcIitlfSk7dmFyIHQsbn0pfWZ1bmN0aW9uIHYobyxpKXtyZXR1cm4geShvLGkpLnRoZW4ocy5tYWtlSW1hZ2UpLnRoZW4ocy5kZWxheSgwKSkudGhlbihmdW5jdGlvbihlKXt2YXIgdD1cIm51bWJlclwiIT10eXBlb2YgaS5zY2FsZT8xOmkuc2NhbGUsbj1mdW5jdGlvbihlLHQpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7bi53aWR0aD0oaS53aWR0aHx8cy53aWR0aChlKSkqdCxuLmhlaWdodD0oaS5oZWlnaHR8fHMuaGVpZ2h0KGUpKSp0LGkuYmdjb2xvciYmKCh0PW4uZ2V0Q29udGV4dChcIjJkXCIpKS5maWxsU3R5bGU9aS5iZ2NvbG9yLHQuZmlsbFJlY3QoMCwwLG4ud2lkdGgsbi5oZWlnaHQpKTtyZXR1cm4gbn0obyx0KSxyPW4uZ2V0Q29udGV4dChcIjJkXCIpO3JldHVybiByLm1vekltYWdlU21vb3RoaW5nRW5hYmxlZD0hMSxyLm1zSW1hZ2VTbW9vdGhpbmdFbmFibGVkPSExLHIuaW1hZ2VTbW9vdGhpbmdFbmFibGVkPSExLGUmJihyLnNjYWxlKHQsdCksci5kcmF3SW1hZ2UoZSwwLDApKSxBJiYoZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChBKSxBPW51bGwsQyYmY2xlYXJUaW1lb3V0KEMpLEM9c2V0VGltZW91dCgoKT0+e0M9bnVsbCx4PXt9fSwyZTQpKSxufSl9ZnVuY3Rpb24gUChuKXtyZXR1cm4gYy5yZXNvbHZlQWxsKCkudGhlbihmdW5jdGlvbihlKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7cmV0dXJuIG4uYXBwZW5kQ2hpbGQodCksdC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShlKSksbn0pfWZ1bmN0aW9uIHcoZSl7cmV0dXJuIGYuaW5saW5lQWxsKGUpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZX0pfWZ1bmN0aW9uIGIoZSx0LG4scil7dmFyIG8saT1uLnN0eWxlLGE9ZS5zdHlsZTtmb3IobyBvZiB0KXt2YXIgdT10LmdldFByb3BlcnR5VmFsdWUobyksYz1hLmdldFByb3BlcnR5VmFsdWUobyk7YS5zZXRQcm9wZXJ0eShvLHI/XCJpbml0aWFsXCI6XCJ1bnNldFwiKSx0LmdldFByb3BlcnR5VmFsdWUobykhPT11P2kuc2V0UHJvcGVydHkobyx1KTppLnJlbW92ZVByb3BlcnR5KG8pLGEuc2V0UHJvcGVydHkobyxjKX19ZnVuY3Rpb24gRShuLHIsZSl7dmFyIG89ZnVuY3Rpb24oZSl7aWYoeFtlXSlyZXR1cm4geFtlXTtBfHwoKEE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKSkuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiLEEuc3R5bGUucG9zaXRpb249XCJmaXhlZFwiLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoQSksQS5jb250ZW50V2luZG93LmRvY3VtZW50LndyaXRlKCc8IURPQ1RZUEUgaHRtbD48bWV0YSBjaGFyc2V0PVwiVVRGLThcIj48dGl0bGU+c2FuZGJveDwvdGl0bGU+PGJvZHk+JykpO3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZSk7QS5jb250ZW50V2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodCksdC50ZXh0Q29udGVudD1cIi5cIjt2YXIgbj1BLmNvbnRlbnRXaW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KSxyPXt9O3JldHVybiBzLmFzQXJyYXkobikuZm9yRWFjaChmdW5jdGlvbihlKXtyW2VdPVwid2lkdGhcIj09PWV8fFwiaGVpZ2h0XCI9PT1lP1wiYXV0b1wiOm4uZ2V0UHJvcGVydHlWYWx1ZShlKX0pLEEuY29udGVudFdpbmRvdy5kb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHQpLHhbZV09cn0oZS50YWdOYW1lKSxpPWUuc3R5bGU7cy5hc0FycmF5KG4pLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9bi5nZXRQcm9wZXJ0eVZhbHVlKGUpOyh0IT09b1tlXXx8ciYmdCE9PXIuZ2V0UHJvcGVydHlWYWx1ZShlKSkmJmkuc2V0UHJvcGVydHkoZSx0LG4uZ2V0UHJvcGVydHlQcmlvcml0eShlKSl9KX12YXIgQz1udWxsLEE9bnVsbCx4PXt9fSh0aGlzKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/dom-to-image-more/dist/dom-to-image-more.min.js\n");

/***/ }),

/***/ "./packages/superset-ui-core/src/utils/getSelectedText.ts":
/*!****************************************************************!*\
  !*** ./packages/superset-ui-core/src/utils/getSelectedText.ts ***!
  \****************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSelectedText: () => (/* binding */ getSelectedText)\n/* harmony export */ });\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\nconst getSelectedText = () => {var _window$getSelection;return (_window$getSelection = window.getSelection()) == null ? void 0 : _window$getSelection.toString();};;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(getSelectedText, \"getSelectedText\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\packages\\\\superset-ui-core\\\\src\\\\utils\\\\getSelectedText.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9zdXBlcnNldC11aS1jb3JlL3NyYy91dGlscy9nZXRTZWxlY3RlZFRleHQudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdXBlcnNldC8uL3BhY2thZ2VzL3N1cGVyc2V0LXVpLWNvcmUvc3JjL3V0aWxzL2dldFNlbGVjdGVkVGV4dC50cz85MTIxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmV4cG9ydCBjb25zdCBnZXRTZWxlY3RlZFRleHQgPSAoKSA9PiB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk/LnRvU3RyaW5nKCk7XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/superset-ui-core/src/utils/getSelectedText.ts\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/PivotScreenshotAPI.tsx":
/*!*********************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/PivotScreenshotAPI.tsx ***!
  \*********************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ PivotTableChart)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ant-design/icons */ \"./node_modules/@ant-design/icons/es/icons/PlusSquareOutlined.js\");\n/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ant-design/icons */ \"./node_modules/@ant-design/icons/es/icons/MinusSquareOutlined.js\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/style/index.tsx\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/translation/TranslatorSingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/currency-format/CurrencyFormatter.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/number-format/NumberFormatterRegistrySingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/query/getColumnLabel.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/query/types/Column.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/utils/getSelectedText.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/utils/featureFlags.ts\");\n/* harmony import */ var _react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./react-pivot-screen-api */ \"./plugins/plugin-chart-pivot-table/src/react-pivot-screen-api/utilities.js\");\n/* harmony import */ var _react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./react-pivot-screen-api */ \"./plugins/plugin-chart-pivot-table/src/react-pivot-screen-api/PivotTable.jsx\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./types */ \"./plugins/plugin-chart-pivot-table/src/types.ts\");\n/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @emotion/react */ \"./node_modules/@emotion/react/dist/emotion-react.browser.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\n\n\n\n\n\nconst Styles = _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.styled.div`\n  ${(_ref) => {let { height, width, margin } = _ref;return `\n      margin: ${margin}px;\n      height: ${height - margin * 2}px;\n      width: ${typeof width === 'string' ? parseInt(width, 10) : width - margin * 2}px;\n `;}}\n`;\nconst PivotTableWrapper = _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.styled.div`\n  height: 100%;\n  max-width: inherit;\n  overflow: auto;\n`;\nconst METRIC_KEY = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_2__.t)('Metric');\nconst vals = ['value'];\nconst StyledPlusSquareOutlined = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.styled)((0,_ant_design_icons__WEBPACK_IMPORTED_MODULE_3__[\"default\"]))`\n  stroke: ${(_ref2) => {let { theme } = _ref2;return theme.colors.grayscale.light2;}};\n  stroke-width: 16px;\n`;\nconst StyledMinusSquareOutlined = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.styled)((0,_ant_design_icons__WEBPACK_IMPORTED_MODULE_4__[\"default\"]))`\n  stroke: ${(_ref3) => {let { theme } = _ref3;return theme.colors.grayscale.light2;}};\n  stroke-width: 16px;\n`;\nconst aggregatorsFactory = (formatter) => ({\n  Count: _react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.count(formatter),\n  'Count Unique Values': _react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.countUnique(formatter),\n  'List Unique Values': _react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.listUnique(', ', formatter),\n  Sum: _react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.sum(formatter),\n  Average: _react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.average(formatter),\n  Median: _react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.median(formatter),\n  'Sample Variance': _react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.var(1, formatter),\n  'Sample Standard Deviation': _react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.stdev(1, formatter),\n  Minimum: _react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.min(formatter),\n  Maximum: _react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.max(formatter),\n  First: _react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.first(formatter),\n  Last: _react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.last(formatter),\n  'Sum as Fraction of Total': _react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.fractionOf(_react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.sum(), 'total', formatter),\n  'Sum as Fraction of Rows': _react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.fractionOf(_react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.sum(), 'row', formatter),\n  'Sum as Fraction of Columns': _react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.fractionOf(_react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.sum(), 'col', formatter),\n  'Count as Fraction of Total': _react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.fractionOf(_react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.count(), 'total', formatter),\n  'Count as Fraction of Rows': _react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.fractionOf(_react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.count(), 'row', formatter),\n  'Count as Fraction of Columns': _react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.fractionOf(_react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.count(), 'col', formatter)\n});\n/* If you change this logic, please update the corresponding Python\r\n * function (https://github.com/apache/superset/blob/master/superset/charts/post_processing.py),\r\n * or reach out to @betodealmeida.\r\n */\nfunction PivotTableChart(props) {\n  const { data, height, width, groupbyRows: groupbyRowsRaw, groupbyColumns: groupbyColumnsRaw, metrics, colOrder, rowOrder, aggregateFunction, transposePivot, combineMetric, rowSubtotalPosition, colSubtotalPosition, colTotals, colSubTotals, rowTotals, rowSubTotals, valueFormat, currencyFormat, emitCrossFilters, setDataMask, selectedFilters, verboseMap, columnFormats, currencyFormats, metricsLayout, metricColorFormatters, dateFormatters, onContextMenu, timeGrainSqla } = props;\n  const theme = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.useTheme)();\n  const defaultFormatter = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => currencyFormat != null && currencyFormat.symbol ?\n  new _superset_ui_core__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({\n    currency: currencyFormat,\n    d3Format: valueFormat\n  }) :\n  (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_7__.getNumberFormatter)(valueFormat), [valueFormat, currencyFormat]);\n  const customFormatsArray = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => Array.from(new Set([\n  ...Object.keys(columnFormats || {}),\n  ...Object.keys(currencyFormats || {})]\n  )).map((metricName) => [\n  metricName,\n  columnFormats[metricName] || valueFormat,\n  currencyFormats[metricName] || currencyFormat]\n  ), [columnFormats, currencyFormat, currencyFormats, valueFormat]);\n  const hasCustomMetricFormatters = customFormatsArray.length > 0;\n  const metricFormatters = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => hasCustomMetricFormatters ?\n  {\n    [METRIC_KEY]: Object.fromEntries(customFormatsArray.map((_ref4) => {let [metric, d3Format, currency] = _ref4;return [\n      metric,\n      currency ?\n      new _superset_ui_core__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({\n        currency,\n        d3Format\n      }) :\n      (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_7__.getNumberFormatter)(d3Format)];}\n    ))\n  } :\n  undefined, [customFormatsArray, hasCustomMetricFormatters]);\n  const metricNames = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => metrics.map((metric) => typeof metric === 'string' ? metric : metric.label), [metrics]);\n  const unpivotedData = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => data.reduce((acc, record) => [\n  ...acc,\n  ...metricNames.\n  map((name) => ({\n    ...record,\n    [METRIC_KEY]: name,\n    value: record[name]\n  })).\n  filter((record) => record.value !== null)],\n  []), [data, metricNames]);\n  const groupbyRows = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => groupbyRowsRaw.map(_superset_ui_core__WEBPACK_IMPORTED_MODULE_8__[\"default\"]), [groupbyRowsRaw]);\n  const groupbyColumns = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => groupbyColumnsRaw.map(_superset_ui_core__WEBPACK_IMPORTED_MODULE_8__[\"default\"]), [groupbyColumnsRaw]);\n  const sorters = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ({\n    [METRIC_KEY]: (0,_react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_5__.sortAs)(metricNames)\n  }), [metricNames]);\n  const [rows, cols] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    let [rows_, cols_] = transposePivot ?\n    [groupbyColumns, groupbyRows] :\n    [groupbyRows, groupbyColumns];\n    if (metricsLayout === _types__WEBPACK_IMPORTED_MODULE_9__.MetricsLayoutEnum.ROWS) {\n      rows_ = combineMetric ? [...rows_, METRIC_KEY] : [METRIC_KEY, ...rows_];\n    } else\n    {\n      cols_ = combineMetric ? [...cols_, METRIC_KEY] : [METRIC_KEY, ...cols_];\n    }\n    // if (metricsLayout === MetricsLayoutEnum.ROWS) {\n    //   rows_ = [...rows_];\n    // } else {\n    //   cols_ = [...cols_];\n    // }\n    return [rows_, cols_];\n  }, [\n  combineMetric,\n  groupbyColumns,\n  groupbyRows,\n  metricsLayout,\n  transposePivot]\n  );\n  const handleChange = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((filters) => {\n    const filterKeys = Object.keys(filters);\n    const groupby = [...groupbyRowsRaw, ...groupbyColumnsRaw];\n    setDataMask({\n      extraFormData: {\n        filters: filterKeys.length === 0 ?\n        undefined :\n        filterKeys.map((key) => {var _groupby$find;\n          const val = filters == null ? void 0 : filters[key];\n          const col = (_groupby$find = groupby.find((item) => {\n            if ((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_10__.isPhysicalColumn)(item)) {\n              return item === key;\n            }\n            if ((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_10__.isAdhocColumn)(item)) {\n              return item.label === key;\n            }\n            return false;\n          })) != null ? _groupby$find : '';\n          if (val === null || val === undefined)\n          return {\n            col,\n            op: 'IS NULL'\n          };\n          return {\n            col,\n            op: 'IN',\n            val: val\n          };\n        })\n      },\n      filterState: {\n        value: filters && Object.keys(filters).length ?\n        Object.values(filters) :\n        null,\n        selectedFilters: filters && Object.keys(filters).length ? filters : null\n      }\n    });\n  }, [groupbyColumnsRaw, groupbyRowsRaw, setDataMask]);\n  const getCrossFilterDataMask = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((value) => {\n    const isActiveFilterValue = (key, val) => {var _selectedFilters$key;return !!selectedFilters && ((_selectedFilters$key = selectedFilters[key]) == null ? void 0 : _selectedFilters$key.includes(val));};\n    if (!value) {\n      return undefined;\n    }\n    const [key, val] = Object.entries(value)[0];\n    let values = { ...selectedFilters };\n    if (isActiveFilterValue(key, val)) {\n      values = {};\n    } else\n    {\n      values = { [key]: [val] };\n    }\n    const filterKeys = Object.keys(values);\n    const groupby = [...groupbyRowsRaw, ...groupbyColumnsRaw];\n    return {\n      dataMask: {\n        extraFormData: {\n          filters: filterKeys.length === 0 ?\n          undefined :\n          filterKeys.map((key) => {var _values, _groupby$find2;\n            const val = (_values = values) == null ? void 0 : _values[key];\n            const col = (_groupby$find2 = groupby.find((item) => {\n              if ((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_10__.isPhysicalColumn)(item)) {\n                return item === key;\n              }\n              if ((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_10__.isAdhocColumn)(item)) {\n                return item.label === key;\n              }\n              return false;\n            })) != null ? _groupby$find2 : '';\n            if (val === null || val === undefined)\n            return {\n              col,\n              op: 'IS NULL'\n            };\n            return {\n              col,\n              op: 'IN',\n              val: val\n            };\n          })\n        },\n        filterState: {\n          value: values && Object.keys(values).length ?\n          Object.values(values) :\n          null,\n          selectedFilters: values && Object.keys(values).length ? values : null\n        }\n      },\n      isCurrentValueSelected: isActiveFilterValue(key, val)\n    };\n  }, [groupbyColumnsRaw, groupbyRowsRaw, selectedFilters]);\n  const toggleFilter = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e, value, filters, pivotData, isSubtotal, isGrandTotal) => {\n    if (isSubtotal || isGrandTotal || !emitCrossFilters) {\n      return;\n    }\n    // allow selecting text in a cell\n    if ((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_11__.getSelectedText)()) {\n      return;\n    }\n    const isActiveFilterValue = (key, val) => {var _selectedFilters$key2;return !!selectedFilters && ((_selectedFilters$key2 = selectedFilters[key]) == null ? void 0 : _selectedFilters$key2.includes(val));};\n    const filtersCopy = { ...filters };\n    delete filtersCopy[METRIC_KEY];\n    const filtersEntries = Object.entries(filtersCopy);\n    if (filtersEntries.length === 0) {\n      return;\n    }\n    const [key, val] = filtersEntries[filtersEntries.length - 1];\n    let updatedFilters = { ...(selectedFilters || {}) };\n    // multi select\n    // if (selectedFilters && isActiveFilterValue(key, val)) {\n    //   updatedFilters[key] = selectedFilters[key].filter((x: DataRecordValue) => x !== val);\n    // } else {\n    //   updatedFilters[key] = [...(selectedFilters?.[key] || []), val];\n    // }\n    // single select\n    if (selectedFilters && isActiveFilterValue(key, val)) {\n      updatedFilters = {};\n    } else\n    {\n      updatedFilters = {\n        [key]: [val]\n      };\n    }\n    if (Array.isArray(updatedFilters[key]) &&\n    updatedFilters[key].length === 0) {\n      delete updatedFilters[key];\n    }\n    handleChange(updatedFilters);\n  }, [emitCrossFilters, selectedFilters, handleChange]);\n  const tableOptions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ({\n    clickRowHeaderCallback: toggleFilter,\n    clickColumnHeaderCallback: toggleFilter,\n    colTotals,\n    colSubTotals,\n    rowTotals,\n    rowSubTotals,\n    highlightHeaderCellsOnHover: emitCrossFilters ||\n    (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_12__.isFeatureEnabled)(_superset_ui_core__WEBPACK_IMPORTED_MODULE_12__.FeatureFlag.DRILL_BY) ||\n    (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_12__.isFeatureEnabled)(_superset_ui_core__WEBPACK_IMPORTED_MODULE_12__.FeatureFlag.DRILL_TO_DETAIL),\n    highlightedHeaderCells: selectedFilters,\n    omittedHighlightHeaderGroups: [METRIC_KEY],\n    cellColorFormatters: { [METRIC_KEY]: metricColorFormatters },\n    dateFormatters\n  }), [\n  colTotals,\n  colSubTotals,\n  dateFormatters,\n  emitCrossFilters,\n  metricColorFormatters,\n  rowTotals,\n  rowSubTotals,\n  selectedFilters,\n  toggleFilter]\n  );\n  const subtotalOptions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ({\n    colSubtotalDisplay: { displayOnTop: colSubtotalPosition },\n    rowSubtotalDisplay: { displayOnTop: rowSubtotalPosition },\n    arrowCollapsed: (0,_emotion_react__WEBPACK_IMPORTED_MODULE_13__.jsx)(StyledPlusSquareOutlined, null),\n    arrowExpanded: (0,_emotion_react__WEBPACK_IMPORTED_MODULE_13__.jsx)(StyledMinusSquareOutlined, null)\n  }), [colSubtotalPosition, rowSubtotalPosition]);\n  const handleContextMenu = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e, colKey, rowKey, dataPoint) => {\n    if (onContextMenu) {\n      e.preventDefault();\n      e.stopPropagation();\n      const drillToDetailFilters = [];\n      if (colKey && colKey.length > 1) {\n        colKey.forEach((val, i) => {\n          const col = cols[i];\n          const formatter = dateFormatters[col];\n          const formattedVal = (formatter == null ? void 0 : formatter(val)) || String(val);\n          if (i > 0) {\n            drillToDetailFilters.push({\n              col,\n              op: '==',\n              val,\n              formattedVal,\n              grain: formatter ? timeGrainSqla : undefined\n            });\n          }\n        });\n      }\n      if (rowKey) {\n        rowKey.forEach((val, i) => {\n          const col = rows[i];\n          const formatter = dateFormatters[col];\n          const formattedVal = (formatter == null ? void 0 : formatter(val)) || String(val);\n          drillToDetailFilters.push({\n            col,\n            op: '==',\n            val,\n            formattedVal,\n            grain: formatter ? timeGrainSqla : undefined\n          });\n        });\n      }\n      onContextMenu(e.clientX, e.clientY, {\n        drillToDetail: drillToDetailFilters,\n        crossFilter: getCrossFilterDataMask(dataPoint),\n        drillBy: dataPoint && {\n          filters: [\n          {\n            col: Object.keys(dataPoint)[0],\n            op: '==',\n            val: Object.values(dataPoint)[0]\n          }],\n\n          groupbyFieldName: rowKey ? 'groupbyRows' : 'groupbyColumns'\n        }\n      });\n    }\n  }, [\n  cols,\n  dateFormatters,\n  getCrossFilterDataMask,\n  onContextMenu,\n  rows,\n  timeGrainSqla]\n  );\n  return (0,_emotion_react__WEBPACK_IMPORTED_MODULE_13__.jsx)(Styles, { height: height, width: width, margin: theme.gridUnit * 4 },\n  (0,_emotion_react__WEBPACK_IMPORTED_MODULE_13__.jsx)(PivotTableWrapper, null,\n  (0,_emotion_react__WEBPACK_IMPORTED_MODULE_13__.jsx)(_react_pivot_screen_api__WEBPACK_IMPORTED_MODULE_14__[\"default\"], { data: unpivotedData, rows: rows, cols: cols, aggregatorsFactory: aggregatorsFactory, defaultFormatter: defaultFormatter, customFormatters: metricFormatters, aggregatorName: aggregateFunction, vals: vals, colOrder: colOrder, rowOrder: rowOrder, sorters: sorters, tableOptions: tableOptions, subtotalOptions: subtotalOptions, namesMapping: verboseMap, onContextMenu: handleContextMenu })\n  )\n  );\n}__signature__(PivotTableChart, \"useTheme{theme}\\nuseMemo{defaultFormatter}\\nuseMemo{customFormatsArray}\\nuseMemo{metricFormatters}\\nuseMemo{metricNames}\\nuseMemo{unpivotedData}\\nuseMemo{groupbyRows}\\nuseMemo{groupbyColumns}\\nuseMemo{sorters}\\nuseMemo{[rows, cols]}\\nuseCallback{handleChange}\\nuseCallback{getCrossFilterDataMask}\\nuseCallback{toggleFilter}\\nuseMemo{tableOptions}\\nuseMemo{subtotalOptions}\\nuseCallback{handleContextMenu}\", () => [_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.useTheme]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(Styles, \"Styles\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotScreenshotAPI.tsx\");reactHotLoader.register(PivotTableWrapper, \"PivotTableWrapper\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotScreenshotAPI.tsx\");reactHotLoader.register(METRIC_KEY, \"METRIC_KEY\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotScreenshotAPI.tsx\");reactHotLoader.register(vals, \"vals\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotScreenshotAPI.tsx\");reactHotLoader.register(StyledPlusSquareOutlined, \"StyledPlusSquareOutlined\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotScreenshotAPI.tsx\");reactHotLoader.register(StyledMinusSquareOutlined, \"StyledMinusSquareOutlined\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotScreenshotAPI.tsx\");reactHotLoader.register(aggregatorsFactory, \"aggregatorsFactory\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotScreenshotAPI.tsx\");reactHotLoader.register(PivotTableChart, \"PivotTableChart\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotScreenshotAPI.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvUGl2b3RTY3JlZW5zaG90QVBJLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkE7QUFDQTtBQUNBO0FBaUJBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBOzs7O0FBSUE7QUFFQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUVBO0FBQ0E7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFLQTtBQUtBO0FBS0E7QUFLQTtBQUtBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBaUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQVFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFJQTtBQUtBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFJQTtBQUVBO0FBR0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBU0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7O0FBR0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBRUE7QUFFQTs7QUFFQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQWlCQTtBQUNBO0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdXBlcnNldC8uL3BsdWdpbnMvcGx1Z2luLWNoYXJ0LXBpdm90LXRhYmxlL3NyYy9QaXZvdFNjcmVlbnNob3RBUEkudHN4PzZmMDEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBNaW51c1NxdWFyZU91dGxpbmVkLCBQbHVzU3F1YXJlT3V0bGluZWQgfSBmcm9tICdAYW50LWRlc2lnbi9pY29ucyc7XHJcbmltcG9ydCB7XHJcbiAgQWRob2NNZXRyaWMsXHJcbiAgQmluYXJ5UXVlcnlPYmplY3RGaWx0ZXJDbGF1c2UsXHJcbiAgQ3VycmVuY3lGb3JtYXR0ZXIsXHJcbiAgRGF0YVJlY29yZFZhbHVlLFxyXG4gIEZlYXR1cmVGbGFnLFxyXG4gIGdldENvbHVtbkxhYmVsLFxyXG4gIGdldE51bWJlckZvcm1hdHRlcixcclxuICBnZXRTZWxlY3RlZFRleHQsXHJcbiAgaXNBZGhvY0NvbHVtbixcclxuICBpc0ZlYXR1cmVFbmFibGVkLFxyXG4gIGlzUGh5c2ljYWxDb2x1bW4sXHJcbiAgTnVtYmVyRm9ybWF0dGVyLFxyXG4gIHN0eWxlZCxcclxuICB0LFxyXG4gIHVzZVRoZW1lLFxyXG59IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcclxuaW1wb3J0IHsgYWdncmVnYXRvclRlbXBsYXRlcywgUGl2b3RUYWJsZSwgc29ydEFzIH0gZnJvbSAnLi9yZWFjdC1waXZvdC1zY3JlZW4tYXBpJztcclxuaW1wb3J0IHtcclxuICBGaWx0ZXJUeXBlLFxyXG4gIE1ldHJpY3NMYXlvdXRFbnVtLFxyXG4gIFBpdm90VGFibGVQcm9wcyxcclxuICBQaXZvdFRhYmxlU3R5bGVzUHJvcHMsXHJcbiAgU2VsZWN0ZWRGaWx0ZXJzVHlwZSxcclxufSBmcm9tICcuL3R5cGVzJztcclxuXHJcbmNvbnN0IFN0eWxlcyA9IHN0eWxlZC5kaXY8UGl2b3RUYWJsZVN0eWxlc1Byb3BzPmBcclxuICAkeyh7IGhlaWdodCwgd2lkdGgsIG1hcmdpbiB9KSA9PiBgXHJcbiAgICAgIG1hcmdpbjogJHttYXJnaW59cHg7XHJcbiAgICAgIGhlaWdodDogJHtoZWlnaHQgLSBtYXJnaW4gKiAyfXB4O1xyXG4gICAgICB3aWR0aDogJHtcclxuICAgICAgICB0eXBlb2Ygd2lkdGggPT09ICdzdHJpbmcnID8gcGFyc2VJbnQod2lkdGgsIDEwKSA6IHdpZHRoIC0gbWFyZ2luICogMlxyXG4gICAgICB9cHg7XHJcbiBgfVxyXG5gO1xyXG5cclxuY29uc3QgUGl2b3RUYWJsZVdyYXBwZXIgPSBzdHlsZWQuZGl2YFxyXG4gIGhlaWdodDogMTAwJTtcclxuICBtYXgtd2lkdGg6IGluaGVyaXQ7XHJcbiAgb3ZlcmZsb3c6IGF1dG87XHJcbmA7XHJcblxyXG5jb25zdCBNRVRSSUNfS0VZID0gdCgnTWV0cmljJyk7XHJcbmNvbnN0IHZhbHMgPSBbJ3ZhbHVlJ107XHJcblxyXG5jb25zdCBTdHlsZWRQbHVzU3F1YXJlT3V0bGluZWQgPSBzdHlsZWQoUGx1c1NxdWFyZU91dGxpbmVkKWBcclxuICBzdHJva2U6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuY29sb3JzLmdyYXlzY2FsZS5saWdodDJ9O1xyXG4gIHN0cm9rZS13aWR0aDogMTZweDtcclxuYDtcclxuXHJcbmNvbnN0IFN0eWxlZE1pbnVzU3F1YXJlT3V0bGluZWQgPSBzdHlsZWQoTWludXNTcXVhcmVPdXRsaW5lZClgXHJcbiAgc3Ryb2tlOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQyfTtcclxuICBzdHJva2Utd2lkdGg6IDE2cHg7XHJcbmA7XHJcblxyXG5jb25zdCBhZ2dyZWdhdG9yc0ZhY3RvcnkgPSAoZm9ybWF0dGVyOiBOdW1iZXJGb3JtYXR0ZXIpID0+ICh7XHJcbiAgQ291bnQ6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuY291bnQoZm9ybWF0dGVyKSxcclxuICAnQ291bnQgVW5pcXVlIFZhbHVlcyc6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuY291bnRVbmlxdWUoZm9ybWF0dGVyKSxcclxuICAnTGlzdCBVbmlxdWUgVmFsdWVzJzogYWdncmVnYXRvclRlbXBsYXRlcy5saXN0VW5pcXVlKCcsICcsIGZvcm1hdHRlciksXHJcbiAgU3VtOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLnN1bShmb3JtYXR0ZXIpLFxyXG4gIEF2ZXJhZ2U6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuYXZlcmFnZShmb3JtYXR0ZXIpLFxyXG4gIE1lZGlhbjogYWdncmVnYXRvclRlbXBsYXRlcy5tZWRpYW4oZm9ybWF0dGVyKSxcclxuICAnU2FtcGxlIFZhcmlhbmNlJzogYWdncmVnYXRvclRlbXBsYXRlcy52YXIoMSwgZm9ybWF0dGVyKSxcclxuICAnU2FtcGxlIFN0YW5kYXJkIERldmlhdGlvbic6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuc3RkZXYoMSwgZm9ybWF0dGVyKSxcclxuICBNaW5pbXVtOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLm1pbihmb3JtYXR0ZXIpLFxyXG4gIE1heGltdW06IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMubWF4KGZvcm1hdHRlciksXHJcbiAgRmlyc3Q6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuZmlyc3QoZm9ybWF0dGVyKSxcclxuICBMYXN0OiBhZ2dyZWdhdG9yVGVtcGxhdGVzLmxhc3QoZm9ybWF0dGVyKSxcclxuICAnU3VtIGFzIEZyYWN0aW9uIG9mIFRvdGFsJzogYWdncmVnYXRvclRlbXBsYXRlcy5mcmFjdGlvbk9mKFxyXG4gICAgYWdncmVnYXRvclRlbXBsYXRlcy5zdW0oKSxcclxuICAgICd0b3RhbCcsXHJcbiAgICBmb3JtYXR0ZXIsXHJcbiAgKSxcclxuICAnU3VtIGFzIEZyYWN0aW9uIG9mIFJvd3MnOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLmZyYWN0aW9uT2YoXHJcbiAgICBhZ2dyZWdhdG9yVGVtcGxhdGVzLnN1bSgpLFxyXG4gICAgJ3JvdycsXHJcbiAgICBmb3JtYXR0ZXIsXHJcbiAgKSxcclxuICAnU3VtIGFzIEZyYWN0aW9uIG9mIENvbHVtbnMnOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLmZyYWN0aW9uT2YoXHJcbiAgICBhZ2dyZWdhdG9yVGVtcGxhdGVzLnN1bSgpLFxyXG4gICAgJ2NvbCcsXHJcbiAgICBmb3JtYXR0ZXIsXHJcbiAgKSxcclxuICAnQ291bnQgYXMgRnJhY3Rpb24gb2YgVG90YWwnOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLmZyYWN0aW9uT2YoXHJcbiAgICBhZ2dyZWdhdG9yVGVtcGxhdGVzLmNvdW50KCksXHJcbiAgICAndG90YWwnLFxyXG4gICAgZm9ybWF0dGVyLFxyXG4gICksXHJcbiAgJ0NvdW50IGFzIEZyYWN0aW9uIG9mIFJvd3MnOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLmZyYWN0aW9uT2YoXHJcbiAgICBhZ2dyZWdhdG9yVGVtcGxhdGVzLmNvdW50KCksXHJcbiAgICAncm93JyxcclxuICAgIGZvcm1hdHRlcixcclxuICApLFxyXG4gICdDb3VudCBhcyBGcmFjdGlvbiBvZiBDb2x1bW5zJzogYWdncmVnYXRvclRlbXBsYXRlcy5mcmFjdGlvbk9mKFxyXG4gICAgYWdncmVnYXRvclRlbXBsYXRlcy5jb3VudCgpLFxyXG4gICAgJ2NvbCcsXHJcbiAgICBmb3JtYXR0ZXIsXHJcbiAgKSxcclxufSk7XHJcblxyXG4vKiBJZiB5b3UgY2hhbmdlIHRoaXMgbG9naWMsIHBsZWFzZSB1cGRhdGUgdGhlIGNvcnJlc3BvbmRpbmcgUHl0aG9uXHJcbiAqIGZ1bmN0aW9uIChodHRwczovL2dpdGh1Yi5jb20vYXBhY2hlL3N1cGVyc2V0L2Jsb2IvbWFzdGVyL3N1cGVyc2V0L2NoYXJ0cy9wb3N0X3Byb2Nlc3NpbmcucHkpLFxyXG4gKiBvciByZWFjaCBvdXQgdG8gQGJldG9kZWFsbWVpZGEuXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQaXZvdFRhYmxlQ2hhcnQocHJvcHM6IFBpdm90VGFibGVQcm9wcykge1xyXG4gIGNvbnN0IHtcclxuICAgIGRhdGEsXHJcbiAgICBoZWlnaHQsXHJcbiAgICB3aWR0aCxcclxuICAgIGdyb3VwYnlSb3dzOiBncm91cGJ5Um93c1JhdyxcclxuICAgIGdyb3VwYnlDb2x1bW5zOiBncm91cGJ5Q29sdW1uc1JhdyxcclxuICAgIG1ldHJpY3MsXHJcbiAgICBjb2xPcmRlcixcclxuICAgIHJvd09yZGVyLFxyXG4gICAgYWdncmVnYXRlRnVuY3Rpb24sXHJcbiAgICB0cmFuc3Bvc2VQaXZvdCxcclxuICAgIGNvbWJpbmVNZXRyaWMsXHJcbiAgICByb3dTdWJ0b3RhbFBvc2l0aW9uLFxyXG4gICAgY29sU3VidG90YWxQb3NpdGlvbixcclxuICAgIGNvbFRvdGFscyxcclxuICAgIGNvbFN1YlRvdGFscyxcclxuICAgIHJvd1RvdGFscyxcclxuICAgIHJvd1N1YlRvdGFscyxcclxuICAgIHZhbHVlRm9ybWF0LFxyXG4gICAgY3VycmVuY3lGb3JtYXQsXHJcbiAgICBlbWl0Q3Jvc3NGaWx0ZXJzLFxyXG4gICAgc2V0RGF0YU1hc2ssXHJcbiAgICBzZWxlY3RlZEZpbHRlcnMsXHJcbiAgICB2ZXJib3NlTWFwLFxyXG4gICAgY29sdW1uRm9ybWF0cyxcclxuICAgIGN1cnJlbmN5Rm9ybWF0cyxcclxuICAgIG1ldHJpY3NMYXlvdXQsXHJcbiAgICBtZXRyaWNDb2xvckZvcm1hdHRlcnMsXHJcbiAgICBkYXRlRm9ybWF0dGVycyxcclxuICAgIG9uQ29udGV4dE1lbnUsXHJcbiAgICB0aW1lR3JhaW5TcWxhLFxyXG4gIH0gPSBwcm9wcztcclxuXHJcbiAgY29uc3QgdGhlbWUgPSB1c2VUaGVtZSgpO1xyXG4gIGNvbnN0IGRlZmF1bHRGb3JtYXR0ZXIgPSB1c2VNZW1vKFxyXG4gICAgKCkgPT5cclxuICAgICAgY3VycmVuY3lGb3JtYXQ/LnN5bWJvbFxyXG4gICAgICAgID8gbmV3IEN1cnJlbmN5Rm9ybWF0dGVyKHtcclxuICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5Rm9ybWF0LFxyXG4gICAgICAgICAgICBkM0Zvcm1hdDogdmFsdWVGb3JtYXQsXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIDogZ2V0TnVtYmVyRm9ybWF0dGVyKHZhbHVlRm9ybWF0KSxcclxuICAgIFt2YWx1ZUZvcm1hdCwgY3VycmVuY3lGb3JtYXRdLFxyXG4gICk7XHJcbiAgY29uc3QgY3VzdG9tRm9ybWF0c0FycmF5ID0gdXNlTWVtbyhcclxuICAgICgpID0+XHJcbiAgICAgIEFycmF5LmZyb20oXHJcbiAgICAgICAgbmV3IFNldChbXHJcbiAgICAgICAgICAuLi5PYmplY3Qua2V5cyhjb2x1bW5Gb3JtYXRzIHx8IHt9KSxcclxuICAgICAgICAgIC4uLk9iamVjdC5rZXlzKGN1cnJlbmN5Rm9ybWF0cyB8fCB7fSksXHJcbiAgICAgICAgXSksXHJcbiAgICAgICkubWFwKG1ldHJpY05hbWUgPT4gW1xyXG4gICAgICAgIG1ldHJpY05hbWUsXHJcbiAgICAgICAgY29sdW1uRm9ybWF0c1ttZXRyaWNOYW1lXSB8fCB2YWx1ZUZvcm1hdCxcclxuICAgICAgICBjdXJyZW5jeUZvcm1hdHNbbWV0cmljTmFtZV0gfHwgY3VycmVuY3lGb3JtYXQsXHJcbiAgICAgIF0pLFxyXG4gICAgW2NvbHVtbkZvcm1hdHMsIGN1cnJlbmN5Rm9ybWF0LCBjdXJyZW5jeUZvcm1hdHMsIHZhbHVlRm9ybWF0XSxcclxuICApO1xyXG4gIGNvbnN0IGhhc0N1c3RvbU1ldHJpY0Zvcm1hdHRlcnMgPSBjdXN0b21Gb3JtYXRzQXJyYXkubGVuZ3RoID4gMDtcclxuICBjb25zdCBtZXRyaWNGb3JtYXR0ZXJzID0gdXNlTWVtbyhcclxuICAgICgpID0+XHJcbiAgICAgIGhhc0N1c3RvbU1ldHJpY0Zvcm1hdHRlcnNcclxuICAgICAgICA/IHtcclxuICAgICAgICAgICAgW01FVFJJQ19LRVldOiBPYmplY3QuZnJvbUVudHJpZXMoXHJcbiAgICAgICAgICAgICAgY3VzdG9tRm9ybWF0c0FycmF5Lm1hcCgoW21ldHJpYywgZDNGb3JtYXQsIGN1cnJlbmN5XSkgPT4gW1xyXG4gICAgICAgICAgICAgICAgbWV0cmljLFxyXG4gICAgICAgICAgICAgICAgY3VycmVuY3lcclxuICAgICAgICAgICAgICAgICAgPyBuZXcgQ3VycmVuY3lGb3JtYXR0ZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgY3VycmVuY3ksXHJcbiAgICAgICAgICAgICAgICAgICAgICBkM0Zvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICA6IGdldE51bWJlckZvcm1hdHRlcihkM0Zvcm1hdCksXHJcbiAgICAgICAgICAgICAgXSksXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICBbY3VzdG9tRm9ybWF0c0FycmF5LCBoYXNDdXN0b21NZXRyaWNGb3JtYXR0ZXJzXSxcclxuICApO1xyXG5cclxuICBjb25zdCBtZXRyaWNOYW1lcyA9IHVzZU1lbW8oXHJcbiAgICAoKSA9PlxyXG4gICAgICBtZXRyaWNzLm1hcCgobWV0cmljOiBzdHJpbmcgfCBBZGhvY01ldHJpYykgPT5cclxuICAgICAgICB0eXBlb2YgbWV0cmljID09PSAnc3RyaW5nJyA/IG1ldHJpYyA6IChtZXRyaWMubGFiZWwgYXMgc3RyaW5nKSxcclxuICAgICAgKSxcclxuICAgIFttZXRyaWNzXSxcclxuICApO1xyXG5cclxuICBjb25zdCB1bnBpdm90ZWREYXRhID0gdXNlTWVtbyhcclxuICAgICgpID0+XHJcbiAgICAgIGRhdGEucmVkdWNlKFxyXG4gICAgICAgIChhY2M6IFJlY29yZDxzdHJpbmcsIGFueT5bXSwgcmVjb3JkOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiBbXHJcbiAgICAgICAgICAuLi5hY2MsXHJcbiAgICAgICAgICAuLi5tZXRyaWNOYW1lc1xyXG4gICAgICAgICAgICAubWFwKChuYW1lOiBzdHJpbmcpID0+ICh7XHJcbiAgICAgICAgICAgICAgLi4ucmVjb3JkLFxyXG4gICAgICAgICAgICAgIFtNRVRSSUNfS0VZXTogbmFtZSxcclxuICAgICAgICAgICAgICB2YWx1ZTogcmVjb3JkW25hbWVdLFxyXG4gICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgLmZpbHRlcihyZWNvcmQgPT4gcmVjb3JkLnZhbHVlICE9PSBudWxsKSxcclxuICAgICAgICBdLFxyXG4gICAgICAgIFtdLFxyXG4gICAgICApLFxyXG4gICAgW2RhdGEsIG1ldHJpY05hbWVzXSxcclxuICApO1xyXG4gIGNvbnN0IGdyb3VwYnlSb3dzID0gdXNlTWVtbyhcclxuICAgICgpID0+IGdyb3VwYnlSb3dzUmF3Lm1hcChnZXRDb2x1bW5MYWJlbCksXHJcbiAgICBbZ3JvdXBieVJvd3NSYXddLFxyXG4gICk7XHJcbiAgY29uc3QgZ3JvdXBieUNvbHVtbnMgPSB1c2VNZW1vKFxyXG4gICAgKCkgPT4gZ3JvdXBieUNvbHVtbnNSYXcubWFwKGdldENvbHVtbkxhYmVsKSxcclxuICAgIFtncm91cGJ5Q29sdW1uc1Jhd10sXHJcbiAgKTtcclxuXHJcbiAgY29uc3Qgc29ydGVycyA9IHVzZU1lbW8oXHJcbiAgICAoKSA9PiAoe1xyXG4gICAgICBbTUVUUklDX0tFWV06IHNvcnRBcyhtZXRyaWNOYW1lcyksXHJcbiAgICB9KSxcclxuICAgIFttZXRyaWNOYW1lc10sXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgW3Jvd3MsIGNvbHNdID0gdXNlTWVtbygoKSA9PiB7XHJcbiAgICBsZXQgW3Jvd3NfLCBjb2xzX10gPSB0cmFuc3Bvc2VQaXZvdFxyXG4gICAgICA/IFtncm91cGJ5Q29sdW1ucywgZ3JvdXBieVJvd3NdXHJcbiAgICAgIDogW2dyb3VwYnlSb3dzLCBncm91cGJ5Q29sdW1uc107XHJcblxyXG4gICAgaWYgKG1ldHJpY3NMYXlvdXQgPT09IE1ldHJpY3NMYXlvdXRFbnVtLlJPV1MpIHtcclxuICAgICAgcm93c18gPSBjb21iaW5lTWV0cmljID8gWy4uLnJvd3NfLCBNRVRSSUNfS0VZXSA6IFtNRVRSSUNfS0VZLCAuLi5yb3dzX107XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb2xzXyA9IGNvbWJpbmVNZXRyaWMgPyBbLi4uY29sc18sIE1FVFJJQ19LRVldIDogW01FVFJJQ19LRVksIC4uLmNvbHNfXTtcclxuICAgIH1cclxuICAgIC8vIGlmIChtZXRyaWNzTGF5b3V0ID09PSBNZXRyaWNzTGF5b3V0RW51bS5ST1dTKSB7XHJcbiAgICAvLyAgIHJvd3NfID0gWy4uLnJvd3NfXTtcclxuICAgIC8vIH0gZWxzZSB7XHJcbiAgICAvLyAgIGNvbHNfID0gWy4uLmNvbHNfXTtcclxuICAgIC8vIH1cclxuICAgIHJldHVybiBbcm93c18sIGNvbHNfXTtcclxuICB9LCBbXHJcbiAgICBjb21iaW5lTWV0cmljLFxyXG4gICAgZ3JvdXBieUNvbHVtbnMsXHJcbiAgICBncm91cGJ5Um93cyxcclxuICAgIG1ldHJpY3NMYXlvdXQsXHJcbiAgICB0cmFuc3Bvc2VQaXZvdCxcclxuICBdKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlQ2hhbmdlID0gdXNlQ2FsbGJhY2soXHJcbiAgICAoZmlsdGVyczogU2VsZWN0ZWRGaWx0ZXJzVHlwZSkgPT4ge1xyXG4gICAgICBjb25zdCBmaWx0ZXJLZXlzID0gT2JqZWN0LmtleXMoZmlsdGVycyk7XHJcbiAgICAgIGNvbnN0IGdyb3VwYnkgPSBbLi4uZ3JvdXBieVJvd3NSYXcsIC4uLmdyb3VwYnlDb2x1bW5zUmF3XTtcclxuICAgICAgc2V0RGF0YU1hc2soe1xyXG4gICAgICAgIGV4dHJhRm9ybURhdGE6IHtcclxuICAgICAgICAgIGZpbHRlcnM6XHJcbiAgICAgICAgICAgIGZpbHRlcktleXMubGVuZ3RoID09PSAwXHJcbiAgICAgICAgICAgICAgPyB1bmRlZmluZWRcclxuICAgICAgICAgICAgICA6IGZpbHRlcktleXMubWFwKGtleSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IGZpbHRlcnM/LltrZXldO1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBjb2wgPVxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwYnkuZmluZChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1BoeXNpY2FsQ29sdW1uKGl0ZW0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtID09PSBrZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNBZGhvY0NvbHVtbihpdGVtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5sYWJlbCA9PT0ga2V5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pID8/ICcnO1xyXG4gICAgICAgICAgICAgICAgICBpZiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb2wsXHJcbiAgICAgICAgICAgICAgICAgICAgICBvcDogJ0lTIE5VTEwnLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wOiAnSU4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbDogdmFsIGFzIChzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuKVtdLFxyXG4gICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgfSxcclxuICAgICAgICBmaWx0ZXJTdGF0ZToge1xyXG4gICAgICAgICAgdmFsdWU6XHJcbiAgICAgICAgICAgIGZpbHRlcnMgJiYgT2JqZWN0LmtleXMoZmlsdGVycykubGVuZ3RoXHJcbiAgICAgICAgICAgICAgPyBPYmplY3QudmFsdWVzKGZpbHRlcnMpXHJcbiAgICAgICAgICAgICAgOiBudWxsLFxyXG4gICAgICAgICAgc2VsZWN0ZWRGaWx0ZXJzOlxyXG4gICAgICAgICAgICBmaWx0ZXJzICYmIE9iamVjdC5rZXlzKGZpbHRlcnMpLmxlbmd0aCA/IGZpbHRlcnMgOiBudWxsLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIFtncm91cGJ5Q29sdW1uc1JhdywgZ3JvdXBieVJvd3NSYXcsIHNldERhdGFNYXNrXSxcclxuICApO1xyXG5cclxuICBjb25zdCBnZXRDcm9zc0ZpbHRlckRhdGFNYXNrID0gdXNlQ2FsbGJhY2soXHJcbiAgICAodmFsdWU6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pID0+IHtcclxuICAgICAgY29uc3QgaXNBY3RpdmVGaWx0ZXJWYWx1ZSA9IChrZXk6IHN0cmluZywgdmFsOiBEYXRhUmVjb3JkVmFsdWUpID0+XHJcbiAgICAgICAgISFzZWxlY3RlZEZpbHRlcnMgJiYgc2VsZWN0ZWRGaWx0ZXJzW2tleV0/LmluY2x1ZGVzKHZhbCk7XHJcblxyXG4gICAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgW2tleSwgdmFsXSA9IE9iamVjdC5lbnRyaWVzKHZhbHVlKVswXTtcclxuICAgICAgbGV0IHZhbHVlcyA9IHsgLi4uc2VsZWN0ZWRGaWx0ZXJzIH07XHJcbiAgICAgIGlmIChpc0FjdGl2ZUZpbHRlclZhbHVlKGtleSwgdmFsKSkge1xyXG4gICAgICAgIHZhbHVlcyA9IHt9O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhbHVlcyA9IHsgW2tleV06IFt2YWxdIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGZpbHRlcktleXMgPSBPYmplY3Qua2V5cyh2YWx1ZXMpO1xyXG4gICAgICBjb25zdCBncm91cGJ5ID0gWy4uLmdyb3VwYnlSb3dzUmF3LCAuLi5ncm91cGJ5Q29sdW1uc1Jhd107XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgZGF0YU1hc2s6IHtcclxuICAgICAgICAgIGV4dHJhRm9ybURhdGE6IHtcclxuICAgICAgICAgICAgZmlsdGVyczpcclxuICAgICAgICAgICAgICBmaWx0ZXJLZXlzLmxlbmd0aCA9PT0gMFxyXG4gICAgICAgICAgICAgICAgPyB1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgIDogZmlsdGVyS2V5cy5tYXAoa2V5ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSB2YWx1ZXM/LltrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICBncm91cGJ5LmZpbmQoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1BoeXNpY2FsQ29sdW1uKGl0ZW0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0gPT09IGtleTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNBZGhvY0NvbHVtbihpdGVtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmxhYmVsID09PSBrZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSkgPz8gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6ICdJUyBOVUxMJyBhcyBjb25zdCxcclxuICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbCxcclxuICAgICAgICAgICAgICAgICAgICAgIG9wOiAnSU4nIGFzIGNvbnN0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgdmFsOiB2YWwgYXMgKHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4pW10sXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZmlsdGVyU3RhdGU6IHtcclxuICAgICAgICAgICAgdmFsdWU6XHJcbiAgICAgICAgICAgICAgdmFsdWVzICYmIE9iamVjdC5rZXlzKHZhbHVlcykubGVuZ3RoXHJcbiAgICAgICAgICAgICAgICA/IE9iamVjdC52YWx1ZXModmFsdWVzKVxyXG4gICAgICAgICAgICAgICAgOiBudWxsLFxyXG4gICAgICAgICAgICBzZWxlY3RlZEZpbHRlcnM6XHJcbiAgICAgICAgICAgICAgdmFsdWVzICYmIE9iamVjdC5rZXlzKHZhbHVlcykubGVuZ3RoID8gdmFsdWVzIDogbnVsbCxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpc0N1cnJlbnRWYWx1ZVNlbGVjdGVkOiBpc0FjdGl2ZUZpbHRlclZhbHVlKGtleSwgdmFsKSxcclxuICAgICAgfTtcclxuICAgIH0sXHJcbiAgICBbZ3JvdXBieUNvbHVtbnNSYXcsIGdyb3VwYnlSb3dzUmF3LCBzZWxlY3RlZEZpbHRlcnNdLFxyXG4gICk7XHJcblxyXG4gIGNvbnN0IHRvZ2dsZUZpbHRlciA9IHVzZUNhbGxiYWNrKFxyXG4gICAgKFxyXG4gICAgICBlOiBNb3VzZUV2ZW50LFxyXG4gICAgICB2YWx1ZTogc3RyaW5nLFxyXG4gICAgICBmaWx0ZXJzOiBGaWx0ZXJUeXBlLFxyXG4gICAgICBwaXZvdERhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4sXHJcbiAgICAgIGlzU3VidG90YWw6IGJvb2xlYW4sXHJcbiAgICAgIGlzR3JhbmRUb3RhbDogYm9vbGVhbixcclxuICAgICkgPT4ge1xyXG4gICAgICBpZiAoaXNTdWJ0b3RhbCB8fCBpc0dyYW5kVG90YWwgfHwgIWVtaXRDcm9zc0ZpbHRlcnMpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGFsbG93IHNlbGVjdGluZyB0ZXh0IGluIGEgY2VsbFxyXG4gICAgICBpZiAoZ2V0U2VsZWN0ZWRUZXh0KCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGlzQWN0aXZlRmlsdGVyVmFsdWUgPSAoa2V5OiBzdHJpbmcsIHZhbDogRGF0YVJlY29yZFZhbHVlKSA9PlxyXG4gICAgICAgICEhc2VsZWN0ZWRGaWx0ZXJzICYmIHNlbGVjdGVkRmlsdGVyc1trZXldPy5pbmNsdWRlcyh2YWwpO1xyXG5cclxuICAgICAgY29uc3QgZmlsdGVyc0NvcHkgPSB7IC4uLmZpbHRlcnMgfTtcclxuICAgICAgZGVsZXRlIGZpbHRlcnNDb3B5W01FVFJJQ19LRVldO1xyXG5cclxuICAgICAgY29uc3QgZmlsdGVyc0VudHJpZXMgPSBPYmplY3QuZW50cmllcyhmaWx0ZXJzQ29weSk7XHJcbiAgICAgIGlmIChmaWx0ZXJzRW50cmllcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IFtrZXksIHZhbF0gPSBmaWx0ZXJzRW50cmllc1tmaWx0ZXJzRW50cmllcy5sZW5ndGggLSAxXTtcclxuXHJcbiAgICAgIGxldCB1cGRhdGVkRmlsdGVycyA9IHsgLi4uKHNlbGVjdGVkRmlsdGVycyB8fCB7fSkgfTtcclxuICAgICAgLy8gbXVsdGkgc2VsZWN0XHJcbiAgICAgIC8vIGlmIChzZWxlY3RlZEZpbHRlcnMgJiYgaXNBY3RpdmVGaWx0ZXJWYWx1ZShrZXksIHZhbCkpIHtcclxuICAgICAgLy8gICB1cGRhdGVkRmlsdGVyc1trZXldID0gc2VsZWN0ZWRGaWx0ZXJzW2tleV0uZmlsdGVyKCh4OiBEYXRhUmVjb3JkVmFsdWUpID0+IHggIT09IHZhbCk7XHJcbiAgICAgIC8vIH0gZWxzZSB7XHJcbiAgICAgIC8vICAgdXBkYXRlZEZpbHRlcnNba2V5XSA9IFsuLi4oc2VsZWN0ZWRGaWx0ZXJzPy5ba2V5XSB8fCBbXSksIHZhbF07XHJcbiAgICAgIC8vIH1cclxuICAgICAgLy8gc2luZ2xlIHNlbGVjdFxyXG4gICAgICBpZiAoc2VsZWN0ZWRGaWx0ZXJzICYmIGlzQWN0aXZlRmlsdGVyVmFsdWUoa2V5LCB2YWwpKSB7XHJcbiAgICAgICAgdXBkYXRlZEZpbHRlcnMgPSB7fTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB1cGRhdGVkRmlsdGVycyA9IHtcclxuICAgICAgICAgIFtrZXldOiBbdmFsXSxcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChcclxuICAgICAgICBBcnJheS5pc0FycmF5KHVwZGF0ZWRGaWx0ZXJzW2tleV0pICYmXHJcbiAgICAgICAgdXBkYXRlZEZpbHRlcnNba2V5XS5sZW5ndGggPT09IDBcclxuICAgICAgKSB7XHJcbiAgICAgICAgZGVsZXRlIHVwZGF0ZWRGaWx0ZXJzW2tleV07XHJcbiAgICAgIH1cclxuICAgICAgaGFuZGxlQ2hhbmdlKHVwZGF0ZWRGaWx0ZXJzKTtcclxuICAgIH0sXHJcbiAgICBbZW1pdENyb3NzRmlsdGVycywgc2VsZWN0ZWRGaWx0ZXJzLCBoYW5kbGVDaGFuZ2VdLFxyXG4gICk7XHJcblxyXG4gIGNvbnN0IHRhYmxlT3B0aW9ucyA9IHVzZU1lbW8oXHJcbiAgICAoKSA9PiAoe1xyXG4gICAgICBjbGlja1Jvd0hlYWRlckNhbGxiYWNrOiB0b2dnbGVGaWx0ZXIsXHJcbiAgICAgIGNsaWNrQ29sdW1uSGVhZGVyQ2FsbGJhY2s6IHRvZ2dsZUZpbHRlcixcclxuICAgICAgY29sVG90YWxzLFxyXG4gICAgICBjb2xTdWJUb3RhbHMsXHJcbiAgICAgIHJvd1RvdGFscyxcclxuICAgICAgcm93U3ViVG90YWxzLFxyXG4gICAgICBoaWdobGlnaHRIZWFkZXJDZWxsc09uSG92ZXI6XHJcbiAgICAgICAgZW1pdENyb3NzRmlsdGVycyB8fFxyXG4gICAgICAgIGlzRmVhdHVyZUVuYWJsZWQoRmVhdHVyZUZsYWcuRFJJTExfQlkpIHx8XHJcbiAgICAgICAgaXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5EUklMTF9UT19ERVRBSUwpLFxyXG4gICAgICBoaWdobGlnaHRlZEhlYWRlckNlbGxzOiBzZWxlY3RlZEZpbHRlcnMsXHJcbiAgICAgIG9taXR0ZWRIaWdobGlnaHRIZWFkZXJHcm91cHM6IFtNRVRSSUNfS0VZXSxcclxuICAgICAgY2VsbENvbG9yRm9ybWF0dGVyczogeyBbTUVUUklDX0tFWV06IG1ldHJpY0NvbG9yRm9ybWF0dGVycyB9LFxyXG4gICAgICBkYXRlRm9ybWF0dGVycyxcclxuICAgIH0pLFxyXG4gICAgW1xyXG4gICAgICBjb2xUb3RhbHMsXHJcbiAgICAgIGNvbFN1YlRvdGFscyxcclxuICAgICAgZGF0ZUZvcm1hdHRlcnMsXHJcbiAgICAgIGVtaXRDcm9zc0ZpbHRlcnMsXHJcbiAgICAgIG1ldHJpY0NvbG9yRm9ybWF0dGVycyxcclxuICAgICAgcm93VG90YWxzLFxyXG4gICAgICByb3dTdWJUb3RhbHMsXHJcbiAgICAgIHNlbGVjdGVkRmlsdGVycyxcclxuICAgICAgdG9nZ2xlRmlsdGVyLFxyXG4gICAgXSxcclxuICApO1xyXG5cclxuICBjb25zdCBzdWJ0b3RhbE9wdGlvbnMgPSB1c2VNZW1vKFxyXG4gICAgKCkgPT4gKHtcclxuICAgICAgY29sU3VidG90YWxEaXNwbGF5OiB7IGRpc3BsYXlPblRvcDogY29sU3VidG90YWxQb3NpdGlvbiB9LFxyXG4gICAgICByb3dTdWJ0b3RhbERpc3BsYXk6IHsgZGlzcGxheU9uVG9wOiByb3dTdWJ0b3RhbFBvc2l0aW9uIH0sXHJcbiAgICAgIGFycm93Q29sbGFwc2VkOiA8U3R5bGVkUGx1c1NxdWFyZU91dGxpbmVkIC8+LFxyXG4gICAgICBhcnJvd0V4cGFuZGVkOiA8U3R5bGVkTWludXNTcXVhcmVPdXRsaW5lZCAvPixcclxuICAgIH0pLFxyXG4gICAgW2NvbFN1YnRvdGFsUG9zaXRpb24sIHJvd1N1YnRvdGFsUG9zaXRpb25dLFxyXG4gICk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZUNvbnRleHRNZW51ID0gdXNlQ2FsbGJhY2soXHJcbiAgICAoXHJcbiAgICAgIGU6IE1vdXNlRXZlbnQsXHJcbiAgICAgIGNvbEtleTogKHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4pW10gfCB1bmRlZmluZWQsXHJcbiAgICAgIHJvd0tleTogKHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4pW10gfCB1bmRlZmluZWQsXHJcbiAgICAgIGRhdGFQb2ludDogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSxcclxuICAgICkgPT4ge1xyXG4gICAgICBpZiAob25Db250ZXh0TWVudSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGNvbnN0IGRyaWxsVG9EZXRhaWxGaWx0ZXJzOiBCaW5hcnlRdWVyeU9iamVjdEZpbHRlckNsYXVzZVtdID0gW107XHJcbiAgICAgICAgaWYgKGNvbEtleSAmJiBjb2xLZXkubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgY29sS2V5LmZvckVhY2goKHZhbCwgaSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb2wgPSBjb2xzW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBmb3JtYXR0ZXIgPSBkYXRlRm9ybWF0dGVyc1tjb2xdO1xyXG4gICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWRWYWwgPSBmb3JtYXR0ZXI/Lih2YWwgYXMgbnVtYmVyKSB8fCBTdHJpbmcodmFsKTtcclxuICAgICAgICAgICAgaWYgKGkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgZHJpbGxUb0RldGFpbEZpbHRlcnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBjb2wsXHJcbiAgICAgICAgICAgICAgICBvcDogJz09JyxcclxuICAgICAgICAgICAgICAgIHZhbCxcclxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbCxcclxuICAgICAgICAgICAgICAgIGdyYWluOiBmb3JtYXR0ZXIgPyB0aW1lR3JhaW5TcWxhIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJvd0tleSkge1xyXG4gICAgICAgICAgcm93S2V5LmZvckVhY2goKHZhbCwgaSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb2wgPSByb3dzW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBmb3JtYXR0ZXIgPSBkYXRlRm9ybWF0dGVyc1tjb2xdO1xyXG4gICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWRWYWwgPSBmb3JtYXR0ZXI/Lih2YWwgYXMgbnVtYmVyKSB8fCBTdHJpbmcodmFsKTtcclxuICAgICAgICAgICAgZHJpbGxUb0RldGFpbEZpbHRlcnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgY29sLFxyXG4gICAgICAgICAgICAgIG9wOiAnPT0nLFxyXG4gICAgICAgICAgICAgIHZhbCxcclxuICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWwsXHJcbiAgICAgICAgICAgICAgZ3JhaW46IGZvcm1hdHRlciA/IHRpbWVHcmFpblNxbGEgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG9uQ29udGV4dE1lbnUoZS5jbGllbnRYLCBlLmNsaWVudFksIHtcclxuICAgICAgICAgIGRyaWxsVG9EZXRhaWw6IGRyaWxsVG9EZXRhaWxGaWx0ZXJzLFxyXG4gICAgICAgICAgY3Jvc3NGaWx0ZXI6IGdldENyb3NzRmlsdGVyRGF0YU1hc2soZGF0YVBvaW50KSxcclxuICAgICAgICAgIGRyaWxsQnk6IGRhdGFQb2ludCAmJiB7XHJcbiAgICAgICAgICAgIGZpbHRlcnM6IFtcclxuICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb2w6IE9iamVjdC5rZXlzKGRhdGFQb2ludClbMF0sXHJcbiAgICAgICAgICAgICAgICBvcDogJz09JyxcclxuICAgICAgICAgICAgICAgIHZhbDogT2JqZWN0LnZhbHVlcyhkYXRhUG9pbnQpWzBdLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIGdyb3VwYnlGaWVsZE5hbWU6IHJvd0tleSA/ICdncm91cGJ5Um93cycgOiAnZ3JvdXBieUNvbHVtbnMnLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIFtcclxuICAgICAgY29scyxcclxuICAgICAgZGF0ZUZvcm1hdHRlcnMsXHJcbiAgICAgIGdldENyb3NzRmlsdGVyRGF0YU1hc2ssXHJcbiAgICAgIG9uQ29udGV4dE1lbnUsXHJcbiAgICAgIHJvd3MsXHJcbiAgICAgIHRpbWVHcmFpblNxbGEsXHJcbiAgICBdLFxyXG4gICk7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8U3R5bGVzIGhlaWdodD17aGVpZ2h0fSB3aWR0aD17d2lkdGh9IG1hcmdpbj17dGhlbWUuZ3JpZFVuaXQgKiA0fT5cclxuICAgICAgPFBpdm90VGFibGVXcmFwcGVyPlxyXG4gICAgICAgIDxQaXZvdFRhYmxlXHJcbiAgICAgICAgICBkYXRhPXt1bnBpdm90ZWREYXRhfVxyXG4gICAgICAgICAgcm93cz17cm93c31cclxuICAgICAgICAgIGNvbHM9e2NvbHN9XHJcbiAgICAgICAgICBhZ2dyZWdhdG9yc0ZhY3Rvcnk9e2FnZ3JlZ2F0b3JzRmFjdG9yeX1cclxuICAgICAgICAgIGRlZmF1bHRGb3JtYXR0ZXI9e2RlZmF1bHRGb3JtYXR0ZXJ9XHJcbiAgICAgICAgICBjdXN0b21Gb3JtYXR0ZXJzPXttZXRyaWNGb3JtYXR0ZXJzfVxyXG4gICAgICAgICAgYWdncmVnYXRvck5hbWU9e2FnZ3JlZ2F0ZUZ1bmN0aW9ufVxyXG4gICAgICAgICAgdmFscz17dmFsc31cclxuICAgICAgICAgIGNvbE9yZGVyPXtjb2xPcmRlcn1cclxuICAgICAgICAgIHJvd09yZGVyPXtyb3dPcmRlcn1cclxuICAgICAgICAgIHNvcnRlcnM9e3NvcnRlcnN9XHJcbiAgICAgICAgICB0YWJsZU9wdGlvbnM9e3RhYmxlT3B0aW9uc31cclxuICAgICAgICAgIHN1YnRvdGFsT3B0aW9ucz17c3VidG90YWxPcHRpb25zfVxyXG4gICAgICAgICAgbmFtZXNNYXBwaW5nPXt2ZXJib3NlTWFwfVxyXG4gICAgICAgICAgb25Db250ZXh0TWVudT17aGFuZGxlQ29udGV4dE1lbnV9XHJcbiAgICAgICAgLz5cclxuICAgICAgPC9QaXZvdFRhYmxlV3JhcHBlcj5cclxuICAgIDwvU3R5bGVzPlxyXG4gICk7XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/PivotScreenshotAPI.tsx\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/plugin/downloadAsImage.ts":
/*!************************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/plugin/downloadAsImage.ts ***!
  \************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ downloadAsImage)\n/* harmony export */ });\n/* harmony import */ var dom_to_image_more__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dom-to-image-more */ \"./node_modules/dom-to-image-more/dist/dom-to-image-more.min.js\");\n/* harmony import */ var dom_to_image_more__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dom_to_image_more__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lodash_kebabCase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash/kebabCase */ \"./node_modules/lodash/kebabCase.js\");\n/* harmony import */ var lodash_kebabCase__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_kebabCase__WEBPACK_IMPORTED_MODULE_1__);\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;};\n\n/**\r\n * generate a consistent file stem from a description and date\r\n *\r\n * @param description title or description of content of file\r\n * @param date date when file was generated\r\n */\nconst generateFileStem = function (description, date) {if (date === void 0) {date = new Date();}return `${lodash_kebabCase__WEBPACK_IMPORTED_MODULE_1___default()(description)}-${date.toISOString().replace(/[: ]/g, '-')}`;};\n/**\r\n * Create an event handler for turning an element into an image\r\n *\r\n * @param selector css selector of the parent element which should be turned into image\r\n * @param description name or a short description of what is being printed.\r\n *   Value will be normalized, and a date as well as a file extension will be added.\r\n * @param isExactSelector if false, searches for the closest ancestor that matches selector.\r\n * @returns event handler\r\n */\nfunction downloadAsImage(selector, description, isExactSelector) {if (isExactSelector === void 0) {isExactSelector = false;}\n  return (event) => {\n    const elementToPrint = isExactSelector ?\n    document.querySelector(selector) :\n    event.currentTarget.closest(selector);\n    if (!elementToPrint) {\n      return addWarningToast(t('Image download failed, please refresh and try again.'));\n    }\n    // Mapbox controls are loaded from different origin, causing CORS error\n    // See https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toDataURL#exceptions\n    const filter = (node) => {\n      if (typeof node.className === 'string') {\n        return node.className !== 'mapboxgl-control-container' &&\n        !node.className.includes('ant-dropdown');\n      }\n      return true;\n    };\n    return dom_to_image_more__WEBPACK_IMPORTED_MODULE_0___default().toJpeg(elementToPrint, {\n      quality: 1,\n      bgcolor: 'white',\n      filter\n    }).\n    then((dataUrl) => {\n      const link = document.createElement('a');\n      link.download = `${generateFileStem(description)}.jpg`;\n      link.href = dataUrl;\n      link.click();\n    }).\n    catch((e) => {\n      console.error('Creating image failed', e);\n    });\n  };\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(generateFileStem, \"generateFileStem\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\plugin\\\\downloadAsImage.ts\");reactHotLoader.register(downloadAsImage, \"downloadAsImage\", \"C:\\\\dawson\\\\acryl-superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\plugin\\\\downloadAsImage.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcGx1Z2luL2Rvd25sb2FkQXNJbWFnZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQW1CQTtBQUNBO0FBRUE7Ozs7OztBQU1BO0FBR0E7Ozs7Ozs7OztBQVNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFHQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdXBlcnNldC8uL3BsdWdpbnMvcGx1Z2luLWNoYXJ0LXBpdm90LXRhYmxlL3NyYy9wbHVnaW4vZG93bmxvYWRBc0ltYWdlLnRzP2VkZWMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsgU3ludGhldGljRXZlbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgZG9tVG9JbWFnZSBmcm9tICdkb20tdG8taW1hZ2UtbW9yZSc7XG5pbXBvcnQga2ViYWJDYXNlIGZyb20gJ2xvZGFzaC9rZWJhYkNhc2UnO1xuXG4vKipcbiAqIGdlbmVyYXRlIGEgY29uc2lzdGVudCBmaWxlIHN0ZW0gZnJvbSBhIGRlc2NyaXB0aW9uIGFuZCBkYXRlXG4gKlxuICogQHBhcmFtIGRlc2NyaXB0aW9uIHRpdGxlIG9yIGRlc2NyaXB0aW9uIG9mIGNvbnRlbnQgb2YgZmlsZVxuICogQHBhcmFtIGRhdGUgZGF0ZSB3aGVuIGZpbGUgd2FzIGdlbmVyYXRlZFxuICovXG5jb25zdCBnZW5lcmF0ZUZpbGVTdGVtID0gKGRlc2NyaXB0aW9uOiBzdHJpbmcsIGRhdGUgPSBuZXcgRGF0ZSgpKSA9PlxuICBgJHtrZWJhYkNhc2UoZGVzY3JpcHRpb24pfS0ke2RhdGUudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9bOiBdL2csICctJyl9YDtcblxuLyoqXG4gKiBDcmVhdGUgYW4gZXZlbnQgaGFuZGxlciBmb3IgdHVybmluZyBhbiBlbGVtZW50IGludG8gYW4gaW1hZ2VcbiAqXG4gKiBAcGFyYW0gc2VsZWN0b3IgY3NzIHNlbGVjdG9yIG9mIHRoZSBwYXJlbnQgZWxlbWVudCB3aGljaCBzaG91bGQgYmUgdHVybmVkIGludG8gaW1hZ2VcbiAqIEBwYXJhbSBkZXNjcmlwdGlvbiBuYW1lIG9yIGEgc2hvcnQgZGVzY3JpcHRpb24gb2Ygd2hhdCBpcyBiZWluZyBwcmludGVkLlxuICogICBWYWx1ZSB3aWxsIGJlIG5vcm1hbGl6ZWQsIGFuZCBhIGRhdGUgYXMgd2VsbCBhcyBhIGZpbGUgZXh0ZW5zaW9uIHdpbGwgYmUgYWRkZWQuXG4gKiBAcGFyYW0gaXNFeGFjdFNlbGVjdG9yIGlmIGZhbHNlLCBzZWFyY2hlcyBmb3IgdGhlIGNsb3Nlc3QgYW5jZXN0b3IgdGhhdCBtYXRjaGVzIHNlbGVjdG9yLlxuICogQHJldHVybnMgZXZlbnQgaGFuZGxlclxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkb3dubG9hZEFzSW1hZ2UoXG4gIHNlbGVjdG9yOiBzdHJpbmcsXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmcsXG4gIGlzRXhhY3RTZWxlY3RvciA9IGZhbHNlLFxuKSB7XG4gIHJldHVybiAoZXZlbnQ6IFN5bnRoZXRpY0V2ZW50KSA9PiB7XG4gICAgY29uc3QgZWxlbWVudFRvUHJpbnQgPSBpc0V4YWN0U2VsZWN0b3JcbiAgICAgID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcilcbiAgICAgIDogZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KHNlbGVjdG9yKTtcblxuICAgIGlmICghZWxlbWVudFRvUHJpbnQpIHtcbiAgICAgIHJldHVybiBhZGRXYXJuaW5nVG9hc3QoXG4gICAgICAgIHQoJ0ltYWdlIGRvd25sb2FkIGZhaWxlZCwgcGxlYXNlIHJlZnJlc2ggYW5kIHRyeSBhZ2Fpbi4nKSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gTWFwYm94IGNvbnRyb2xzIGFyZSBsb2FkZWQgZnJvbSBkaWZmZXJlbnQgb3JpZ2luLCBjYXVzaW5nIENPUlMgZXJyb3JcbiAgICAvLyBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0hUTUxDYW52YXNFbGVtZW50L3RvRGF0YVVSTCNleGNlcHRpb25zXG4gICAgY29uc3QgZmlsdGVyID0gKG5vZGU6IEVsZW1lbnQpID0+IHtcbiAgICAgIGlmICh0eXBlb2Ygbm9kZS5jbGFzc05hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgbm9kZS5jbGFzc05hbWUgIT09ICdtYXBib3hnbC1jb250cm9sLWNvbnRhaW5lcicgJiZcbiAgICAgICAgICAhbm9kZS5jbGFzc05hbWUuaW5jbHVkZXMoJ2FudC1kcm9wZG93bicpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRvbVRvSW1hZ2VcbiAgICAgIC50b0pwZWcoZWxlbWVudFRvUHJpbnQsIHtcbiAgICAgICAgcXVhbGl0eTogMSxcbiAgICAgICAgYmdjb2xvcjogJ3doaXRlJyxcbiAgICAgICAgZmlsdGVyLFxuICAgICAgfSlcbiAgICAgIC50aGVuKGRhdGFVcmwgPT4ge1xuICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICBsaW5rLmRvd25sb2FkID0gYCR7Z2VuZXJhdGVGaWxlU3RlbShkZXNjcmlwdGlvbil9LmpwZ2A7XG4gICAgICAgIGxpbmsuaHJlZiA9IGRhdGFVcmw7XG4gICAgICAgIGxpbmsuY2xpY2soKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NyZWF0aW5nIGltYWdlIGZhaWxlZCcsIGUpO1xuICAgICAgfSk7XG4gIH07XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/plugin/downloadAsImage.ts\n");

/***/ })

}]);